(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7546],{343:e=>{"use strict";const t=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,r=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function s(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function a(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const o={scheme:"http",domainHost:!0,parse:s,serialize:a},i={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=n(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(n(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},l={http:o,https:{scheme:"https",domainHost:o.domainHost,parse:s,serialize:a},ws:i,wss:{scheme:"wss",domainHost:i.domainHost,parse:i.parse,serialize:i.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(r);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=`${r}:${t.nid||e.nid}`,a=l[s];e.path=void 0,a&&(e=a.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,a=l[s];a&&(e=a.serialize(e,t));const o=e,i=e.nss;return o.path=`${n||t.nid}:${i}`,t.skipEscape=!0,o},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,r){const n=e;return n.uuid=n.nss,n.nss=void 0,r.tolerant||n.uuid&&t.test(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};e.exports=l},1239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>n.str`must match "${e.ifClause}" schema`,params:({params:e})=>n._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:a}=e;void 0===r.then&&void 0===r.else&&(0,s.checkStrictMode)(a,'"if" without "then" and "else" is ignored');const i=o(a,"then"),l=o(a,"else");if(!i&&!l)return;const c=t.let("valid",!0),d=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(t)}(),e.reset(),i&&l){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(d,u("then",r),u("else",r))}else i?t.if(d,u("then")):t.if((0,n.not)(d),u("else"));function u(r,s){return()=>{const a=e.subschema({keyword:r},d);t.assign(c,d),e.mergeValidEvaluated(a,c),s?t.assign(s,n._`${r}`):e.setParams({ifClause:r})}}e.pass(c,(()=>e.error(!0)))}};function o(e,t){const r=e.schema[t];return void 0!==r&&!(0,s.alwaysValidSchema)(e,r)}t.default=a},4042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=r(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var s=r(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const a=r(13558),o=r(34551),i=r(10396),l=r(73835),c=r(99029),d=r(66939),u=r(10208),h=r(94227),m=r(63837),p=r(55944),f=(e,t)=>new RegExp(e,t);f.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function w(e){var t,r,n,s,a,o,i,l,c,d,u,h,m,g,y,v,b,w,S,C,x,E,$,_,A;const k=e.strict,P=null===(t=e.code)||void 0===t?void 0:t.optimize,T=!0===P||void 0===P?1:P||0,I=null!==(n=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==n?n:f,D=null!==(s=e.uriResolver)&&void 0!==s?s:p.default;return{strictSchema:null===(o=null!==(a=e.strictSchema)&&void 0!==a?a:k)||void 0===o||o,strictNumbers:null===(l=null!==(i=e.strictNumbers)&&void 0!==i?i:k)||void 0===l||l,strictTypes:null!==(d=null!==(c=e.strictTypes)&&void 0!==c?c:k)&&void 0!==d?d:"log",strictTuples:null!==(h=null!==(u=e.strictTuples)&&void 0!==u?u:k)&&void 0!==h?h:"log",strictRequired:null!==(g=null!==(m=e.strictRequired)&&void 0!==m?m:k)&&void 0!==g&&g,code:e.code?{...e.code,optimize:T,regExp:I}:{optimize:T,regExp:I},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(S=e.inlineRefs)||void 0===S||S,schemaId:null!==(C=e.schemaId)&&void 0!==C?C:"$id",addUsedSchema:null===(x=e.addUsedSchema)||void 0===x||x,validateSchema:null===(E=e.validateSchema)||void 0===E||E,validateFormats:null===($=e.validateFormats)||void 0===$||$,unicodeRegExp:null===(_=e.unicodeRegExp)||void 0===_||_,int32range:null===(A=e.int32range)||void 0===A||A,uriResolver:D}}class S{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...w(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:y,es5:t,lines:r}),this.logger=function(e){if(!1===e)return k;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,i.getRules)(),C.call(this,v,e,"NOT SUPPORTED"),C.call(this,b,e,"DEPRECATED","warn"),this._metaOpts=A.call(this),e.formats&&$.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&_.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),E.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let n=m;"id"===r&&(n={...m},n.id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await s.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||a.call(this,r)}async function s(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function a(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof o.default))throw t;return i.call(this,t),await l.call(this,t.missingSchema),a.call(this,e)}}function i({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const r=await c.call(this,e);this.refs[e]||await s.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,d.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=x.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,n=new l.SchemaEnv({schema:{},schemaId:r});if(t=l.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=x.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,d.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(T.call(this,r,t),!t)return(0,h.eachItem)(r,(e=>I.call(this,e))),this;O.call(this,t);const n={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(r,0===n.type.length?e=>I.call(this,e,n):e=>n.type.forEach((t=>I.call(this,e,n,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex((t=>t.keyword===e));t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map((e=>`${r}${e.instancePath} ${e.message}`)).reduce(((e,r)=>e+t+r)):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,a=s[e];n&&a&&(s[e]=R(a))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,s=this.opts.addUsedSchema){let a;const{schemaId:o}=this.opts;if("object"==typeof e)a=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let i=this._cache.get(e);if(void 0!==i)return i;r=(0,d.normalizeId)(a||r);const c=d.getSchemaRefs.call(this,e,r);return i=new l.SchemaEnv({schema:e,schemaId:o,meta:t,baseId:r,localRefs:c}),this._cache.set(i.schema,i),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=i),n&&this.validateSchema(e,!0),i}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function C(e,t,r,n="error"){for(const s in e){const a=s;a in t&&this.logger[n](`${r}: option ${s}. ${e[a]}`)}}function x(e){return e=(0,d.normalizeId)(e),this.schemas[e]||this.refs[e]}function E(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function $(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function _(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function A(){const e={...this.opts};for(const t of g)delete e[t];return e}S.ValidationError=a.default,S.MissingRefError=o.default,t.default=S;const k={log(){},warn(){},error(){}},P=/^[a-z_$][a-z0-9_$:-]*$/i;function T(e,t){const{RULES:r}=this;if((0,h.eachItem)(e,(e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!P.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function I(e,t,r){var n;const s=null==t?void 0:t.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:a}=this;let o=s?a.post:a.rules.find((({type:e})=>e===r));if(o||(o={type:r,rules:[]},a.rules.push(o)),a.keywords[e]=!0,!t)return;const i={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?D.call(this,o,i,t.before):o.rules.push(i),a.all[e]=i,null===(n=t.implements)||void 0===n||n.forEach((e=>this.addKeyword(e)))}function D(e,t,r){const n=e.rules.findIndex((e=>e.keyword===r));n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function O(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=R(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function R(e){return{anyOf:[e,N]}}},4454:(e,t,r)=>{"use strict";r.d(t,{D:()=>T});var n=r(62193),s=r.n(n),a=r(96540),o=r(78697),i=r(15595),l=r(90868),c=r(85861),d=r(46920),u=r(96453),h=r(35742),m=r(95579),p=r(93641),f=r(61225),g=r(74353),y=r.n(g),v=r(58561),b=r.n(v),w=r(74680),S=r(95272),C=r(39829),x=r(85183),E=r(60237),$=r(27023),_=r(2445);const A=u.I4.div`
  ${({theme:e})=>`\n  .sdm-body {\n    margin: 0 ${2*e.gridUnit}px;\n  }\n  .sdm-input {\n    margin-left: ${10*e.gridUnit}px;\n    width: 401px;\n  }\n  .sdm-autocomplete {\n    width: 401px;\n    align-self: center;\n    margin-left: ${e.gridUnit}px;\n  }\n  .sdm-radio {\n    height: 30px;\n    margin: 10px 0px;\n    line-height: 30px;\n  }\n  .sdm-radio span {\n    display: inline-flex;\n    padding-right: 0px;\n  }\n  .sdm-overwrite-msg {\n    margin: ${2*e.gridUnit}px;\n  }\n  .sdm-overwrite-container {\n    flex: 1 1 auto;\n    display: flex;\n  `}
`,k=async(e,t,r,n,s,a)=>{const o=`api/v1/dataset/${t}?override_columns=${a}`,i=JSON.stringify({sql:r,columns:n,owners:s,database_id:e});return(await h.A.put({endpoint:o,headers:{"Content-Type":"application/json"},body:i})).json.result},P=(0,m.t)("Untitled Dataset"),T=({visible:e,onHide:t,buttonTextOnSave:r,buttonTextOnOverwrite:n,modalDescription:u,datasource:g,openWindow:v=!0,formData:T={}})=>{const I=(0,f.d4)((e=>{var t,r;return(null==(t=e.common)||null==(r=t.conf)?void 0:r.DEFAULT_VIZ_TYPE)||p.Y.Table})),D=()=>`${(null==g?void 0:g.name)||P} ${y()().format("L HH:mm:ss")}`,[O,N]=(0,a.useState)(D()),[R,M]=(0,a.useState)(C.lr.SaveNew),[F,j]=(0,a.useState)(!1),[L,Y]=(0,a.useState)({}),[q,U]=(0,a.useState)(void 0),[z,B]=(0,a.useState)(!1),W=(0,f.d4)((e=>e.user)),V=(0,f.wA)(),H=e=>{v?window.open(e,"_blank","noreferrer"):window.location.href=e},K={...C.V0,...T||{}},Q=(0,a.useCallback)((async(e="")=>{const{userId:t}=W,r=b().encode({filters:[{col:"table_name",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:t}],order_column:"changed_on_delta_humanized",order_direction:"desc"});return h.A.get({endpoint:`/api/v1/dataset/?q=${r}`}).then((e=>({data:e.json.result.map((e=>({value:e.table_name,label:e.table_name,datasetid:e.id,owners:e.owners}))),totalCount:e.json.count})))}),[W]),G=R===C.lr.SaveNew&&0===O.length||R===C.lr.OverwriteDataset&&s()(q);return(0,_.Y)(c.Ay,{show:e,title:(0,m.t)("Save or Overwrite Dataset"),onHide:t,footer:(0,_.FD)(_.FK,{children:[R===C.lr.SaveNew&&(0,_.Y)(d.A,{disabled:G,buttonStyle:"primary",onClick:()=>{var e,r;B(!0);const n=null!=(e=null==g?void 0:g.columns)?e:[];let s;if("string"==typeof(null==g?void 0:g.templateParams)){const e=JSON.parse(g.templateParams);e._filters&&(delete e._filters,s=JSON.stringify(e))}V((0,w.createDatasource)({sql:g.sql,dbId:g.dbId||(null==g||null==(r=g.database)?void 0:r.id),catalog:null==g?void 0:g.catalog,schema:null==g?void 0:g.schema,templateParams:s,datasourceName:O})).then((e=>(0,E.T3)(e.id,"table",{...K,datasource:`${e.id}__table`,...I===p.Y.Table&&{all_columns:n.map((e=>e.column_name))}}))).then((e=>{B(!1);const r=(0,x.eX)(null,{[$.vX.formDataKey.name]:e});H(r),N(D()),t()})).catch((()=>{B(!1),(0,S.iB)((0,m.t)("An error occurred saving dataset"))}))},loading:z,children:r}),R===C.lr.OverwriteDataset&&(0,_.FD)(_.FK,{children:[F&&(0,_.Y)(d.A,{onClick:()=>{j(!1),Y({})},children:(0,m.t)("Back")}),(0,_.Y)(d.A,{className:"md",buttonStyle:"primary",onClick:async()=>{var e,r,n;if(!F)return void j(!0);B(!0);const[,s]=await Promise.all([k(null==g?void 0:g.dbId,null==L?void 0:L.datasetid,null==g?void 0:g.sql,null==g||null==(e=g.columns)?void 0:e.map((e=>({column_name:e.column_name,type:e.type,is_dttm:e.is_dttm}))),null==L||null==(r=L.owners)?void 0:r.map((e=>e.id)),!0),(0,E.T3)(L.datasetid,"table",{...K,datasource:`${L.datasetid}__table`,...I===p.Y.Table&&{all_columns:null==g||null==(n=g.columns)?void 0:n.map((e=>e.column_name))}})]);B(!1);const a=(0,x.eX)(null,{[$.vX.formDataKey.name]:s});H(a),j(!1),N(D()),t()},disabled:G,loading:z,children:n})]})]}),children:(0,_.FD)(A,{children:[!F&&(0,_.FD)("div",{className:"sdm-body",children:[u&&(0,_.Y)("div",{className:"sdm-prompt",children:u}),(0,_.FD)(o.s.Group,{onChange:e=>{M(Number(e.target.value))},value:R,children:[(0,_.FD)(o.s,{className:"sdm-radio",value:1,children:[(0,m.t)("Save as new"),(0,_.Y)(l.pd,{className:"sdm-input",value:O,onChange:e=>{N(e.target.value)},disabled:1!==R})]}),(0,_.FD)("div",{className:"sdm-overwrite-container",children:[(0,_.Y)(o.s,{className:"sdm-radio",value:2,children:(0,m.t)("Overwrite existing")}),(0,_.Y)("div",{className:"sdm-autocomplete",children:(0,_.Y)(i.DW,{allowClear:!0,showSearch:!0,placeholder:(0,m.t)("Select or type dataset name"),ariaLabel:(0,m.t)("Existing dataset"),onChange:(e,t)=>{Y(t),U(e)},options:e=>Q(e),value:q,filterOption:(e,t)=>t.value.toLowerCase().includes(e.toLowerCase()),disabled:2!==R,getPopupContainer:()=>document.body})})]})]})]}),F&&(0,_.Y)("div",{className:"sdm-overwrite-msg",children:(0,m.t)("Are you sure you want to overwrite this dataset?")})]})})}},5109:(e,t,r)=>{const n=r(35970),s=r(80795),a=r(11331),o=r(63375),i=r(9063),l=r(91648),c=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d=e=>a(e)||Array.isArray(e)?Object.keys(e):[],u=e=>!d(e).length&&!1!==e&&!0!==e;e.exports={allUniqueKeys:e=>o(s(e.map(d))),deleteUndefinedProps:function(e){for(const t in e)c(e,t)&&u(e[t])&&delete e[t];return e},getValues:(e,t)=>e.map((e=>e&&e[t])),has:c,isEmptySchema:u,isSchema:e=>a(e)||!0===e||!1===e,keys:d,notUndefined:e=>void 0!==e,uniqWith:i,withoutArr:(e,...t)=>l.apply(null,[e].concat(n(t)))}},6411:(e,t,r)=>{var n;!function(s,a){if(s){for(var o,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();v.prototype.bind=function(e,t,r){var n=this;return e=e instanceof Array?e:[e],n._bindMultiple.call(n,e,t,r),n},v.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},v.prototype.trigger=function(e,t){var r=this;return r._directMap[e+":"+t]&&r._directMap[e+":"+t]({},e),r},v.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},v.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(y(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var r=e.composedPath()[0];r!==e.target&&(t=r)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);o=null},v.init=function(){var e=v(a);for(var t in e)"_"!==t.charAt(0)&&(v[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},v.init(),s.Mousetrap=v,e.exports&&(e.exports=v),void 0===(n=function(){return v}.call(t,r,t,e))||(e.exports=n)}function h(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function m(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return i[e.which]?i[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(e,t,r){return r||(r=function(){if(!o)for(var e in o={},i)e>95&&e<112||i.hasOwnProperty(e)&&(o[i[e]]=e);return o}()[e]?"keydown":"keypress"),"keypress"==r&&t.length&&(r="keydown"),r}function g(e,t){var r,n,s,a=[];for(r=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),s=0;s<r.length;++s)n=r[s],d[n]&&(n=d[n]),t&&"keypress"!=t&&c[n]&&(n=c[n],a.push("shift")),p(n)&&a.push(n);return{key:n,modifiers:a,action:t=f(n,a,t)}}function y(e,t){return null!==e&&e!==a&&(e===t||y(e.parentNode,t))}function v(e){var t=this;if(e=e||a,!(t instanceof v))return new v(e);t.target=e,t._callbacks={},t._directMap={};var r,n={},s=!1,o=!1,i=!1;function l(e){e=e||{};var t,r=!1;for(t in n)e[t]?r=!0:n[t]=0;r||(i=!1)}function c(e,r,s,a,o,i){var l,c,d,u,h=[],m=s.type;if(!t._callbacks[e])return[];for("keyup"==m&&p(e)&&(r=[e]),l=0;l<t._callbacks[e].length;++l)if(c=t._callbacks[e][l],(a||!c.seq||n[c.seq]==c.level)&&m==c.action&&("keypress"==m&&!s.metaKey&&!s.ctrlKey||(d=r,u=c.modifiers,d.sort().join(",")===u.sort().join(",")))){var f=!a&&c.combo==o,g=a&&c.seq==a&&c.level==i;(f||g)&&t._callbacks[e].splice(l,1),h.push(c)}return h}function d(e,r,n,s){t.stopCallback(r,r.target||r.srcElement,n,s)||!1===e(r,n)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(r),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(r))}function u(e){"number"!=typeof e.which&&(e.which=e.keyCode);var r=m(e);r&&("keyup"!=e.type||s!==r?t.handleKey(r,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):s=!1)}function f(e,a,o,u,h){t._directMap[e+":"+o]=a;var p,y=(e=e.replace(/\s+/g," ")).split(" ");y.length>1?function(e,t,a,o){function c(t){return function(){i=t,++n[e],clearTimeout(r),r=setTimeout(l,1e3)}}function u(t){d(a,t,e),"keyup"!==o&&(s=m(t)),setTimeout(l,10)}n[e]=0;for(var h=0;h<t.length;++h){var p=h+1===t.length?u:c(o||g(t[h+1]).action);f(t[h],p,o,e,h)}}(e,y,a,o):(p=g(e,o),t._callbacks[p.key]=t._callbacks[p.key]||[],c(p.key,p.modifiers,{type:p.action},u,e,h),t._callbacks[p.key][u?"unshift":"push"]({callback:a,modifiers:p.modifiers,action:p.action,seq:u,level:h,combo:e}))}t._handleKey=function(e,t,r){var n,s=c(e,t,r),a={},u=0,h=!1;for(n=0;n<s.length;++n)s[n].seq&&(u=Math.max(u,s[n].level));for(n=0;n<s.length;++n)if(s[n].seq){if(s[n].level!=u)continue;h=!0,a[s[n].seq]=1,d(s[n].callback,r,s[n].combo,s[n].seq)}else h||d(s[n].callback,r,s[n].combo);var m="keypress"==r.type&&o;r.type!=i||p(e)||m||l(a),o=h&&"keydown"==r.type},t._bindMultiple=function(e,t,r){for(var n=0;n<e.length;++n)f(e[n],t,r)},h(e,"keypress",u),h(e,"keydown",u),h(e,"keyup",u)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},6638:(e,t,r)=>{var n=r(78096),s=r(24066),a=r(61489),o=4294967295,i=Math.min;e.exports=function(e,t){if((e=a(e))<1||e>9007199254740991)return[];var r=o,l=i(e,o);t=s(t),e-=o;for(var c=n(l,t);++r<e;)t(r);return c}},7106:e=>{"use strict";var t=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function r(e,n,s,a,o,i,l,c,d,u){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var h in n(a,o,i,l,c,d,u),a){var m=a[h];if(Array.isArray(m)){if(h in t.arrayKeywords)for(var p=0;p<m.length;p++)r(e,n,s,m[p],o+"/"+h+"/"+p,i,o,h,a,p)}else if(h in t.propsKeywords){if(m&&"object"==typeof m)for(var f in m)r(e,n,s,m[f],o+"/"+h+"/"+f.replace(/~/g,"~0").replace(/\//g,"~1"),i,o,h,a,f)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&r(e,n,s,m,o+"/"+h,i,o,h,a)}s(a,o,i,l,c,d,u)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const n=r(99029),s=r(94227);function a(e,t,r){const{gen:a,compositeRule:o,data:i,opts:l}=e;if(void 0===r)return;const c=n._`${i}${(0,n.getProperty)(t)}`;if(o)return void(0,s.checkStrictMode)(e,`default is ignored for: ${c}`);let d=n._`${c} === undefined`;"empty"===l.useDefaults&&(d=n._`${d} || ${c} === null || ${c} === ""`),a.if(d,n._`${c} = ${(0,n.stringify)(r)}`)}t.assignDefaults=function(e,t){const{properties:r,items:n}=e.schema;if("object"===t&&r)for(const t in r)a(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach(((t,r)=>a(e,r,t.default)))}},7887:(e,t)=>{"use strict";function r(e,t){return t.rules.some((t=>n(e,t)))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},n){const s=t.RULES.types[n];return s&&!0!==s&&r(e,s)},t.shouldUseGroup=r,t.shouldUseRule=n},7894:(e,t,r)=>{const n=r(90370),s=r(39754),{allUniqueKeys:a,deleteUndefinedProps:o,getValues:i,keys:l,notUndefined:c,uniqWith:d,withoutArr:u}=r(5109);function h(e,t){return a(e).reduce((function(r,s){const a=i(e,s),o=d(a.filter(c),n);return r[s]=t(o,s),r}),{})}e.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(e,t,r,n){n.ignoreAdditionalProperties||(e.forEach((function(t){const n=e.filter((e=>e!==t)),s=l(t.properties),a=l(t.patternProperties).map((e=>new RegExp(e)));n.forEach((function(e){const n=l(e.properties),o=n.filter((e=>a.some((t=>t.test(e)))));u(n,s,o).forEach((function(n){e.properties[n]=r.properties([e.properties[n],t.additionalProperties],n)}))}))})),e.forEach((function(t){const r=e.filter((e=>e!==t)),n=l(t.patternProperties);!1===t.additionalProperties&&r.forEach((function(e){const t=l(e.patternProperties);u(t,n).forEach((t=>delete e.patternProperties[t]))}))})));const a={additionalProperties:r.additionalProperties(e.map((e=>e.additionalProperties))),patternProperties:h(e.map((e=>e.patternProperties)),r.patternProperties),properties:h(e.map((e=>e.properties)),r.properties)};var i;return!1===a.additionalProperties&&s(i=a.properties,(function(e,t){!1===e&&delete i[t]})),o(a)}}},8960:(e,t,r)=>{"use strict";var n=r(30327);t.createFirstEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},t.createSecondEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},t.createFirstPageLink=function(e){var t=e.currentPage;return{type:n.ITEM_TYPES.FIRST_PAGE_LINK,key:n.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===t}},t.createPreviousPageLink=function(e){var t=e.currentPage;return{type:n.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:n.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,t-1),isActive:1===t}},t.createNextPageLink=function(e){var t=e.currentPage,r=e.totalPages;return{type:n.ITEM_TYPES.NEXT_PAGE_LINK,key:n.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(r,t+1),isActive:t===r}},t.createLastPageLink=function(e){var t=e.currentPage,r=e.totalPages;return{type:n.ITEM_TYPES.LAST_PAGE_LINK,key:n.ITEM_KEYS.LAST_PAGE_LINK,value:r,isActive:t===r}},t.createPageFunctionFactory=function(e){var t=e.currentPage;return function(e){return{type:n.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===t}}}},9066:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});const n=e=>{var t;return{columns:e.columns,name:(null==e?void 0:e.datasource_name)||(null==e?void 0:e.name)||"Untitled",dbId:(null==e||null==(t=e.database)?void 0:t.id)||(null==e?void 0:e.dbId),sql:(null==e?void 0:e.sql)||"",catalog:null==e?void 0:e.catalog,schema:null==e?void 0:e.schema}}},10208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const n=r(10396),s=r(7887),a=r(48708),o=r(99029),i=r(94227);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(n.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l||(t.DataType=l={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:r,data:n,opts:a}=e,i=function(e,t){return t?e.filter((e=>d.has(e)||"array"===t&&"array"===e)):[]}(t,a.coerceTypes),c=t.length>0&&!(0===i.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(c){const s=h(t,n,a.strictNumbers,l.Wrong);r.if(s,(()=>{i.length?function(e,t,r){const{gen:n,data:s,opts:a}=e,i=n.let("dataType",o._`typeof ${s}`),l=n.let("coerced",o._`undefined`);"array"===a.coerceTypes&&n.if(o._`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,(()=>n.assign(s,o._`${s}[0]`).assign(i,o._`typeof ${s}`).if(h(t,s,a.strictNumbers),(()=>n.assign(l,s))))),n.if(o._`${l} !== undefined`);for(const e of r)(d.has(e)||"array"===e&&"array"===a.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void n.elseIf(o._`${i} == "number" || ${i} == "boolean"`).assign(l,o._`"" + ${s}`).elseIf(o._`${s} === null`).assign(l,o._`""`);case"number":return void n.elseIf(o._`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(l,o._`+${s}`);case"integer":return void n.elseIf(o._`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(l,o._`+${s}`);case"boolean":return void n.elseIf(o._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(l,!1).elseIf(o._`${s} === "true" || ${s} === 1`).assign(l,!0);case"null":return n.elseIf(o._`${s} === "" || ${s} === 0 || ${s} === false`),void n.assign(l,null);case"array":n.elseIf(o._`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(l,o._`[${s}]`)}}n.else(),p(e),n.endIf(),n.if(o._`${l} !== undefined`,(()=>{n.assign(s,l),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(o._`${t} !== undefined`,(()=>e.assign(o._`${t}[${r}]`,n)))}(e,l)}))}(e,t,i):p(e)}))}return c};const d=new Set(["string","number","integer","boolean","null"]);function u(e,t,r,n=l.Correct){const s=n===l.Correct?o.operators.EQ:o.operators.NEQ;let a;switch(e){case"null":return o._`${t} ${s} null`;case"array":a=o._`Array.isArray(${t})`;break;case"object":a=o._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":a=i(o._`!(${t} % 1) && !isNaN(${t})`);break;case"number":a=i();break;default:return o._`typeof ${t} ${s} ${e}`}return n===l.Correct?a:(0,o.not)(a);function i(e=o.nil){return(0,o.and)(o._`typeof ${t} == "number"`,e,r?o._`isFinite(${t})`:o.nil)}}function h(e,t,r,n){if(1===e.length)return u(e[0],t,r,n);let s;const a=(0,i.toHash)(e);if(a.array&&a.object){const e=o._`typeof ${t} != "object"`;s=a.null?e:o._`!${t} || ${e}`,delete a.null,delete a.array,delete a.object}else s=o.nil;a.number&&delete a.integer;for(const e in a)s=(0,o.and)(s,u(e,t,r,n));return s}t.checkDataType=u,t.checkDataTypes=h;const m={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?o._`{type: ${e}}`:o._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:r,schema:n}=e,s=(0,i.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}(e);(0,a.reportError)(t,m)}t.reportTypeError=p},10396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},10853:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>xp});var n=r(96540),s=r(61225),a=r(17437),o=r(27366),i=r(43031);const l=i.F.injectEndpoints({endpoints:e=>({sqlLabInitialState:e.query({providesTags:["SqlLabInitialState"],query:()=>({endpoint:"/api/v1/sqllab/",headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>e.result})})})}),{useSqlLabInitialStateQuery:c}=l;var d=r(74680),u=r(95272),h=r(2445);const m=()=>(0,h.Y)(a.mL,{styles:e=>a.AH`
      body {
        min-height: max(
          100vh,
          ${125*e.gridUnit}px
        ); // Set a min height so the gutter is always visible when resizing
        overflow: hidden;
      }
    `});var p=r(7350),f=r.n(p),g=r(61574),y=r(6411),v=r.n(y),b=r(96453),w=r(95579),S=r(67553),C=r(7735),x=r(35700),E=r(44383),$=r.n(E),_=r(48327),A=r(84193),k=r.n(A),P=r(19129),T=r(15151),I=r(50455),D=r(38708);const O=(0,n.createContext)({}),{Provider:N}=O,R={},M=({children:e})=>{const t=(0,g.zy)();return(0,h.Y)(N,{value:t.state||R,children:e})};var F=r(16294),j=r(62193),L=r.n(j),Y=r(38221),q=r.n(Y),U=r(86963),z=r(58168),B=r(98587),W=r(77387);function V(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var H=r(28290);const K=n.createContext(null);var Q=function(e){return e.scrollTop},G="unmounted",J="exited",X="entering",Z="entered",ee="exiting",te=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var s,a=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?a?(s=J,n.appearStatus=X):s=Z:s=t.unmountOnExit||t.mountOnEnter?G:J,n.state={status:s},n.nextCallback=null,n}(0,W.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===G?{status:J}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==X&&r!==Z&&(t=X):r!==X&&r!==Z||(t=ee)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===X){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:H.findDOMNode(this);r&&Q(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===J&&this.setState({status:G})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,s=this.props.nodeRef?[n]:[H.findDOMNode(this),n],a=s[0],o=s[1],i=this.getTimeouts(),l=n?i.appear:i.enter;e||r?(this.props.onEnter(a,o),this.safeSetState({status:X},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:Z},(function(){t.props.onEntered(a,o)}))}))}))):this.safeSetState({status:Z},(function(){t.props.onEntered(a)}))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:H.findDOMNode(this);t?(this.props.onExit(n),this.safeSetState({status:ee},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:J},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:J},(function(){e.props.onExited(n)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:H.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],a=s[0],o=s[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===G)return null;var t=this.props,r=t.children,s=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,B.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n.createElement(K.Provider,{value:null},"function"==typeof r?r(e,s):n.cloneElement(n.Children.only(r),s))},t}(n.Component);function re(){}te.contextType=K,te.propTypes={},te.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:re,onEntering:re,onEntered:re,onExit:re,onExiting:re,onExited:re},te.UNMOUNTED=G,te.EXITED=J,te.ENTERING=X,te.ENTERED=Z,te.EXITING=ee;const ne=te;var se=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.remove(n):"string"==typeof r.className?r.className=V(r.className,n):r.setAttribute("class",V(r.className&&r.className.baseVal||"",n)));var r,n}))},ae=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),s=n[0],a=n[1];t.removeClasses(s,"exit"),t.addClass(s,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),s=n[0],a=n[1]?"appear":"enter";t.addClass(s,a,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),s=n[0],a=n[1]?"appear":"enter";t.removeClasses(s,a),t.addClass(s,a,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,s=n?(n&&r?r+"-":"")+e:r[e];return{baseClassName:s,activeClassName:n?s+"-active":r[e+"Active"],doneClassName:n?s+"-done":r[e+"Done"]}},t}(0,W.A)(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var n=this.getClassNames(t)[r+"ClassName"],s=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&s&&(n+=" "+s),"active"===r&&e&&Q(e),n&&(this.appliedClasses[t][r]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)));var r,n}))}(e,n))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,s=r.active,a=r.done;this.appliedClasses[t]={},n&&se(e,n),s&&se(e,s),a&&se(e,a)},r.render=function(){var e=this.props,t=(e.classNames,(0,B.A)(e,["classNames"]));return n.createElement(ne,(0,z.A)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(n.Component);ae.defaultProps={classNames:""},ae.propTypes={};const oe=ae;var ie=r(71764),le=r(72391),ce=r(85861),de=r(46920),ue=r(64527),he=r(41621),me=r(93103),pe=r(15595),fe=r(75488),ge=r(90868),ye=r(6749),ve=r(62221),be=r(25946);function we(e){const t=(0,s.wA)();return(0,n.useCallback)(((r,n)=>t((0,C.logEvent)(r,{payload:{...e,...n}}))),[e,t])}var Se=r(66537),Ce=r(69945),xe=r(18301),Ee=r(24976),$e=r(27023);function _e(e,t){return(0,s.d4)((({sqlLab:{unsavedQueryEditor:r,queryEditors:n}})=>$()({...n.find((({id:t})=>t===e)),...e===(null==r?void 0:r.id)&&r},["id"].concat(t))),s.bN)}const Ae=(0,b.I4)(Ee._p)`
  &.ace_editor {
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  }
`;var ke={name:"6n1ert",styles:"width:inherit"};const Pe=({queryEditorId:e,language:t,onChange:r=()=>{}})=>{const[s,a]=(0,n.useState)({}),[o,i]=(0,n.useState)(!0),{templateParams:l}=_e(e,["templateParams"]),c=null!=l?l:"{}";(0,n.useEffect)((()=>{try{a(JSON.parse(c)),i(!0)}catch{a({}),i(!1)}}),[c]);const d=(0,h.FD)("div",{children:[(0,h.FD)("p",{children:[(0,w.t)("Assign a set of parameters as"),(0,h.Y)("code",{children:"JSON"}),(0,w.t)("below (example:"),(0,h.Y)("code",{children:'{"my_table": "foo"}'}),(0,w.t)("), and they become available in your SQL (example:"),(0,h.FD)("code",{children:["SELECT * FROM ","{{ my_table }}"," "]}),") ",(0,w.t)("by using")," ",(0,h.Y)("a",{href:"https://superset.apache.org/sqllab.html#templating-with-jinja",target:"_blank",rel:"noopener noreferrer",children:(0,w.t)("Jinja templating")})," ",(0,w.t)("syntax.")]}),(0,h.Y)(Ae,{mode:t,minLines:25,maxLines:50,onChange:q()(r,$e.jW),width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,value:c})]}),u=s?Object.keys(s).length:0;return(0,h.Y)(xe.A,{modalTitle:(0,w.t)("Template parameters"),triggerNode:(0,h.Y)(P.m_,{id:"parameters-tooltip",placement:"top",title:(0,w.t)("Edit template parameters"),trigger:["hover"],children:(0,h.FD)("div",{role:"button",css:ke,children:[(0,w.t)("Parameters "),(0,h.Y)(Ce.A,{count:u}),!o&&(0,h.Y)(Se.W,{icon:"exclamation-triangle",bsStyle:"danger",tooltip:(0,w.t)("Invalid JSON"),label:"invalid-json"})]})}),modalBody:d})};var Te=r(43561),Ie=r(35768),De=r(90179),Oe=r.n(De),Ne=r(85692),Re=r(91162),Me=r(96484);const Fe=(0,b.I4)((({striped:e,...t})=>(0,h.Y)(Me.A,{...t})))`
  position: static;
  .antd5-progress-inner {
    position: static;
  }
  .antd5-progress-bg {
    position: static;
    ${({striped:e})=>e&&"\n        background-image: linear-gradient(45deg,\n            rgba(255, 255, 255, 0.15) 25%,\n            transparent 25%, transparent 50%,\n            rgba(255, 255, 255, 0.15) 50%,\n            rgba(255, 255, 255, 0.15) 75%,\n            transparent 75%, transparent) !important;\n        background-size: 1rem 1rem !important;\n        "};
  }
`;var je=r(50217),Le=r(7089);function Ye(e){const{className:t,children:r}=e;return(0,h.Y)("div",{role:"group",className:t,css:(0,a.AH)({display:"flex","& > :nth-of-type(1):not(:nth-last-of-type(1))":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0,marginLeft:0},"& > :not(:nth-of-type(1)):not(:nth-last-of-type(1))":{borderRadius:0,borderRight:0,marginLeft:0},"& > :nth-last-of-type(1):not(:nth-of-type(1))":{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:0},...e.expand&&{"& .superset-button":{flexGrow:1}}},"",""),children:r})}var qe=r(83505),Ue=r(32142),ze=r(69108),Be=r(79427),We=r(4454),Ve=r(39829),He=r(85183),Ke=r(60237),Qe=r(17444);const Ge="NULL";var Je=r(21013),Xe=r.n(Je),Ze=r(31070),et=r(15311),tt=r(19966);function rt(e){return"string"==typeof e&&/^"-?\d+"$/.test(e)?e.substring(1,e.length-1):e}function nt(e){return(0,h.Y)(h.FK,{children:rt(e)})}const st=({modalTitle:e,jsonObject:t,jsonValue:r})=>{const n=(0,et.B)();return(0,h.Y)(xe.A,{modalBody:(0,h.Y)(Ze.d,{data:t,theme:n,valueRenderer:nt}),modalFooter:(0,h.Y)(de.A,{children:(0,h.Y)(tt.A,{shouldShowText:!1,text:r})}),modalTitle:e,triggerNode:(0,h.Y)(h.FK,{children:r})})};var at=r(58642);var ot=r(80346),it=n.createContext({}),lt=(e,t,r,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const s=e.newAgStackInstance();let a,o,i=!1;return s.then((e=>{i?t.destroyBean(e):(a=e,o=a.getGui(),r.appendChild(o),ct(n,a))})),()=>{i=!0,a&&(o?.parentElement?.removeChild(o),t.destroyBean(a),n&&ct(n,void 0))}},ct=(e,t)=>{e&&(e instanceof Function?e(t):e.current=t)},dt=(...e)=>{const t=e.filter((e=>null!=e&&""!==e));return t.join(" ")},ut=class e{constructor(...e){this.classesMap={},e.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,r){if(!!this.classesMap[t]==r)return this;const n=new e;return n.classesMap={...this.classesMap},n.classesMap[t]=r,n}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},ht=e=>"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===("function"==typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),mt=n.version?.split(".")[0],pt="16"===mt||"17"===mt,ft=!1,gt=(e,t)=>{pt||!e||ft?t():H.flushSync(t)};function yt(e,t,r){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(r||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const n=[],s=[],a=new Map,o=new Map;for(let e=0;e<t.length;e++){const r=t[e];o.set(r.instanceId,r)}for(let t=0;t<e.length;t++){const r=e[t];a.set(r.instanceId,r),o.has(r.instanceId)&&n.push(r)}for(let e=0;e<t.length;e++){const r=t[e],n=r.instanceId;a.has(n)||s.push(r)}return n.length===e.length&&0===s.length?e:0===n.length&&s.length===t.length?t:0===n.length?s:0===s.length?n:[...n,...s]}var vt=(0,n.forwardRef)(((e,t)=>{const{registry:r,context:s}=(0,n.useContext)(it),a=(0,n.useRef)(null),o=(0,n.useRef)(null),i=(0,n.useRef)(null),l=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useRef)(),[u,h]=(0,n.useState)(),[m,p]=(0,n.useState)(),[f,g]=(0,n.useState)(),[y,v]=(0,n.useState)((()=>new ut)),[b,w]=(0,n.useState)((()=>new ut("ag-hidden"))),[S,C]=(0,n.useState)((()=>new ut("ag-hidden"))),[x,E]=(0,n.useState)((()=>new ut("ag-invisible")));(0,n.useImperativeHandle)(t,(()=>({refresh:()=>!1}))),(0,n.useLayoutEffect)((()=>lt(u,s,o.current)),[u]);const $=(0,n.useCallback)((t=>{if(a.current=t,!t)return void(d.current=s.destroyBean(d.current));const n={setInnerRenderer:(e,t)=>{h(e),g(t)},setChildCount:e=>p(e),addOrRemoveCssClass:(e,t)=>v((r=>r.setClass(e,t))),setContractedDisplayed:e=>C((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>w((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>E((t=>t.setClass("ag-invisible",!e)))},o=r.createDynamicBean("groupCellRendererCtrl",!0);o&&(d.current=s.createBean(o),d.current.init(n,t,i.current,l.current,c.current,vt,e))}),[]),_=(0,n.useMemo)((()=>`ag-cell-wrapper ${y.toString()}`),[y]),A=(0,n.useMemo)((()=>`ag-group-expanded ${b.toString()}`),[b]),k=(0,n.useMemo)((()=>`ag-group-contracted ${S.toString()}`),[S]),P=(0,n.useMemo)((()=>`ag-group-checkbox ${x.toString()}`),[x]),T=u&&u.componentFromFramework,I=T?u.componentClass:void 0,D=null==u&&null!=f,O=(0,ot.YR0)(f,!0);return n.createElement("span",{className:_,ref:$,...e.colDef?{}:{role:d.current?.getCellAriaRole()}},n.createElement("span",{className:A,ref:l}),n.createElement("span",{className:k,ref:c}),n.createElement("span",{className:P,ref:i}),n.createElement("span",{className:"ag-group-value",ref:o},D&&n.createElement(n.Fragment,null,O),T&&n.createElement(I,{...u.params})),n.createElement("span",{className:"ag-group-child-count"},m))})),bt=vt,wt=(0,n.createContext)({setMethods:()=>{}}),St=(0,n.memo)((e=>{const{initialProps:t,addUpdateCallback:r,CustomComponentClass:s,setMethods:a}=e,[{key:o,...i},l]=(0,n.useState)(t);return(0,n.useEffect)((()=>{r((e=>l(e)))}),[]),n.createElement(wt.Provider,{value:{setMethods:a}},n.createElement(s,{key:o,...i}))})),Ct=0;function xt(){return"agPortalKey_"+ ++Ct}var Et=class{constructor(e,t,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=xt(),this.portalKey=xt(),this.instanceCreated=this.isStatelessComponent()?ot.oY$.resolve(!1):new ot.oY$((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),r=document.createElement(t||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"==typeof Symbol&&Symbol.for}isStateless(e){return"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!r)return void setTimeout((()=>this.callMethod(e,t)));const n=r[e];return n?n.apply(r,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ot.oY$((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{this.componentInstance=e,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=(0,H.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,n.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(t)}fallbackMethodAvailable(e){return!this.suppressFallbackMethods&&!!this[`${e}Component`]}};function $t(e,t,r){e.forEach((e=>{const n=t[e];n&&(r[e]=n)}))}var _t=class extends Et{constructor(){super(...arguments),this.awaitUpdateCallback=new ot.oY$((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=St}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new ot.oY$((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,$t(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ot.oY$((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},At=class extends _t{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},kt=class extends _t{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Pt=class extends _t{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:r,shake:n}=this;return e.label=t,e.icon=r,e.shake=n,e}},Tt=class extends _t{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ot.oY$((e=>{this.resolveSetMethodsCallback=e}))}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then((()=>this.providedMethods?.afterGuiAttached?.(e)))}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){!1===this.expectingNewMethods&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout((()=>{this.sourceParams.filterChangedCallback()})),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback()}updateModel(e){this.setModel(e).then((()=>this.sourceParams.filterChangedCallback()))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function It(e,t){e.parentFilterInstance((r=>{(r.setModel(t)||ot.oY$.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var Dt=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){$t(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),It(this.floatingFilterParams,e)}},Ot=class extends _t{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),It(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Nt=class extends _t{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Rt=class extends _t{refresh(e){this.sourceParams=e,this.refreshProps()}},Mt=class extends _t{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Ft=class extends _t{refresh(e){this.sourceParams=e,this.refreshProps()}},jt=class extends _t{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Lt=class extends _t{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Yt(){(0,ot.ujB)(231)}var qt=class{constructor(e,t,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,r){this.portals=[...this.portals,e],this.waitForInstance(t,r),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,r=Date.now()){if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout((()=>{this.waitForInstance(e,t,r)}))}}},Ut=(0,n.memo)((({ctrl:e})=>{const t=e.isAlive(),{context:r}=(0,n.useContext)(it),s=t?e.column.getColId():void 0,[a,o]=(0,n.useState)(),[i,l]=(0,n.useState)(),c=(0,n.useRef)(),d=(0,n.useRef)(null),u=(0,n.useRef)(null),h=(0,n.useRef)(null),m=(0,n.useRef)(),p=(0,n.useRef)();t&&!p.current&&(p.current=new ot.hv8((()=>d.current)));const f=(0,n.useCallback)((n=>{if(d.current=n,c.current=n?r.createBean(new ot.dQD):r.destroyBean(c.current),!n||!t)return;const s={setWidth:e=>{d.current&&(d.current.style.width=e)},addOrRemoveCssClass:(e,t)=>p.current.addOrRemoveCssClass(e,t),setUserStyles:e=>l(e),setAriaSort:e=>{d.current&&(e?(0,ot.JJT)(d.current,e):(0,ot.T2p)(d.current))},setUserCompDetails:e=>o(e),getUserCompInstance:()=>m.current||void 0};e.setComp(s,n,u.current,h.current,c.current);const a=e.getSelectAllGui();a&&(u.current?.insertAdjacentElement("afterend",a),c.current.addDestroyFunc((()=>a.remove())))}),[]);(0,n.useLayoutEffect)((()=>lt(a,r,h.current,m)),[a]),(0,n.useEffect)((()=>{e.setDragSource(d.current)}),[a]);const g=(0,n.useMemo)((()=>!(!a?.componentFromFramework||!ht(a.componentClass))),[a]),y=a&&a.componentFromFramework,v=a&&a.componentClass;return n.createElement("div",{ref:f,style:i,className:"ag-header-cell","col-id":s,role:"columnheader"},n.createElement("div",{ref:u,className:"ag-header-cell-resize",role:"presentation"}),n.createElement("div",{ref:h,className:"ag-header-cell-comp-wrapper",role:"presentation"},y&&g&&n.createElement(v,{...a.params}),y&&!g&&n.createElement(v,{...a.params,ref:m})))})),zt=(0,n.memo)((({ctrl:e})=>{const{context:t,gos:r}=(0,n.useContext)(it),[s,a]=(0,n.useState)(),[o,i]=(0,n.useState)((()=>new ut("ag-header-cell","ag-floating-filter"))),[l,c]=(0,n.useState)((()=>new ut)),[d,u]=(0,n.useState)((()=>new ut("ag-floating-filter-button","ag-hidden"))),[h,m]=(0,n.useState)("false"),[p,f]=(0,n.useState)(),[,g]=(0,n.useState)(1),y=(0,n.useRef)(),v=(0,n.useRef)(null),b=(0,n.useRef)(null),w=(0,n.useRef)(null),S=(0,n.useRef)(null),C=(0,n.useRef)(),x=(0,n.useRef)(),E=e=>{null!=e&&C.current&&C.current(e)},$=(0,n.useCallback)((r=>{if(v.current=r,y.current=r?t.createBean(new ot.dQD):t.destroyBean(y.current),!r)return;x.current=new ot.oY$((e=>{C.current=e}));const n={addOrRemoveCssClass:(e,t)=>i((r=>r.setClass(e,t))),setUserStyles:e=>a(e),addOrRemoveBodyCssClass:(e,t)=>c((r=>r.setClass(e,t))),setButtonWrapperDisplayed:e=>{u((t=>t.setClass("ag-hidden",!e))),m(e?"false":"true")},setWidth:e=>{v.current&&(v.current.style.width=e)},setCompDetails:e=>f(e),getFloatingFilterComp:()=>x.current?x.current:null,setMenuIcon:e=>S.current?.appendChild(e)};e.setComp(n,r,S.current,b.current,y.current)}),[]);(0,n.useLayoutEffect)((()=>lt(p,t,b.current,E)),[p]);const _=(0,n.useMemo)((()=>o.toString()),[o]),A=(0,n.useMemo)((()=>l.toString()),[l]),k=(0,n.useMemo)((()=>d.toString()),[d]),P=(0,n.useMemo)((()=>!!(p&&p.componentFromFramework&&ht(p.componentClass))),[p]),T=(0,n.useMemo)((()=>r.get("reactiveCustomComponents")),[]),I=(0,n.useMemo)((()=>{if(p){if(T){const e=new Dt(p.params,(()=>g((e=>e+1))));return E(e),e}p.componentFromFramework&&Yt()}}),[p]),D=I?.getProps(),O=p&&p.componentFromFramework,N=p&&p.componentClass;return n.createElement("div",{ref:$,style:s,className:_,role:"gridcell"},n.createElement("div",{ref:b,className:A,role:"presentation"},O&&!T&&n.createElement(N,{...p.params,ref:P?()=>{}:E}),O&&T&&n.createElement(wt.Provider,{value:{setMethods:e=>I.setMethods(e)}},n.createElement(N,{...D}))),n.createElement("div",{ref:w,"aria-hidden":h,className:k,role:"presentation"},n.createElement("button",{ref:S,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})),Bt=(0,n.memo)((({ctrl:e})=>{const{context:t}=(0,n.useContext)(it),[r,s]=(0,n.useState)(),[a,o]=(0,n.useState)((()=>new ut)),[i,l]=(0,n.useState)((()=>new ut)),[c,d]=(0,n.useState)("false"),[u,h]=(0,n.useState)(),[m,p]=(0,n.useState)(),f=(0,n.useMemo)((()=>e.column.getUniqueId()),[]),g=(0,n.useRef)(),y=(0,n.useRef)(null),v=(0,n.useRef)(null),b=(0,n.useRef)(null),w=(0,n.useRef)(),S=(0,n.useCallback)((r=>{if(y.current=r,g.current=r?t.createBean(new ot.dQD):t.destroyBean(g.current),!r)return;const n={setWidth:e=>{y.current&&(y.current.style.width=e)},addOrRemoveCssClass:(e,t)=>o((r=>r.setClass(e,t))),setUserStyles:e=>s(e),setHeaderWrapperHidden:e=>{const t=b.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=b.current;t&&(null!=e?t.style.setProperty("max-height",`${e}px`):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>p(e),setResizableDisplayed:e=>{l((t=>t.setClass("ag-hidden",!e))),d(e?"false":"true")},setAriaExpanded:e=>h(e),getUserCompInstance:()=>w.current||void 0};e.setComp(n,r,v.current,b.current,g.current)}),[]);(0,n.useLayoutEffect)((()=>lt(m,t,b.current)),[m]),(0,n.useEffect)((()=>{y.current&&e.setDragSource(y.current)}),[m]);const C=(0,n.useMemo)((()=>!(!m?.componentFromFramework||!ht(m.componentClass))),[m]),x=(0,n.useMemo)((()=>"ag-header-group-cell "+a.toString()),[a]),E=(0,n.useMemo)((()=>"ag-header-cell-resize "+i.toString()),[i]),$=m&&m.componentFromFramework,_=m&&m.componentClass;return n.createElement("div",{ref:S,style:r,className:x,"col-id":f,role:"columnheader","aria-expanded":u},n.createElement("div",{ref:b,className:"ag-header-cell-comp-wrapper",role:"presentation"},$&&C&&n.createElement(_,{...m.params}),$&&!C&&n.createElement(_,{...m.params,ref:w})),n.createElement("div",{ref:v,"aria-hidden":c,className:E}))})),Wt=(0,n.memo)((({ctrl:e})=>{const{context:t}=(0,n.useContext)(it),{topOffset:r,rowHeight:s}=(0,n.useMemo)((()=>e.getTopAndHeight()),[]),a=e.getAriaRowIndex(),o=e.headerRowClass,[i,l]=(0,n.useState)((()=>s+"px")),[c,d]=(0,n.useState)((()=>r+"px")),u=(0,n.useRef)(null),h=(0,n.useRef)(null),[m,p]=(0,n.useState)((()=>e.getHeaderCtrls())),f=(0,n.useRef)(),g=(0,n.useRef)(null),y=(0,n.useCallback)((r=>{if(g.current=r,f.current=r?t.createBean(new ot.dQD):t.destroyBean(f.current),!r)return;const n={setHeight:e=>l(e),setTop:e=>d(e),setHeaderCtrls:(e,t,r)=>{h.current=u.current,u.current=e;const n=yt(h.current,e,t);n!==h.current&&gt(r,(()=>p(n)))},setWidth:e=>{g.current&&(g.current.style.width=e)}};e.setComp(n,f.current,!1)}),[]),v=(0,n.useMemo)((()=>({height:i,top:c})),[i,c]),b=(0,n.useCallback)((t=>{switch(e.type){case"group":return n.createElement(Bt,{ctrl:t,key:t.instanceId});case"filter":return n.createElement(zt,{ctrl:t,key:t.instanceId});default:return n.createElement(Ut,{ctrl:t,key:t.instanceId})}}),[]);return n.createElement("div",{ref:y,className:o,role:"row",style:v,"aria-rowindex":a},m.map(b))})),Vt=(0,n.memo)((({pinned:e})=>{const[t,r]=(0,n.useState)(!0),[s,a]=(0,n.useState)([]),{context:o}=(0,n.useContext)(it),i=(0,n.useRef)(null),l=(0,n.useRef)(null),c=(0,n.useRef)(),d="left"===e,u="right"===e,h=!d&&!u,m=(0,n.useCallback)((t=>{if(i.current=t,c.current=t?o.createBean(new ot.OPU(e)):o.destroyBean(c.current),!t)return;const n={setDisplayed:r,setCtrls:e=>a(e),setCenterWidth:e=>{l.current&&(l.current.style.width=e)},setViewportScrollLeft:e=>{i.current&&(i.current.scrollLeft=e)},setPinnedContainerWidth:e=>{i.current&&(i.current.style.width=e,i.current.style.minWidth=e,i.current.style.maxWidth=e)}};c.current.setComp(n,i.current)}),[]),p=t?"":"ag-hidden",f=()=>s.map((e=>n.createElement(Wt,{ctrl:e,key:e.instanceId})));return n.createElement(n.Fragment,null,d&&n.createElement("div",{ref:m,className:"ag-pinned-left-header "+p,"aria-hidden":!t,role:"rowgroup"},f()),u&&n.createElement("div",{ref:m,className:"ag-pinned-right-header "+p,"aria-hidden":!t,role:"rowgroup"},f()),h&&n.createElement("div",{ref:m,className:"ag-header-viewport "+p,role:"presentation"},n.createElement("div",{ref:l,className:"ag-header-container",role:"rowgroup"},f())))})),Ht=(0,n.memo)((()=>{const[e,t]=(0,n.useState)((()=>new ut)),[r,s]=(0,n.useState)(),{context:a}=(0,n.useContext)(it),o=(0,n.useRef)(null),i=(0,n.useRef)(),l=(0,n.useCallback)((e=>{if(o.current=e,i.current=e?a.createBean(new ot.vBt):a.destroyBean(i.current),!e)return;const r={addOrRemoveCssClass:(e,r)=>t((t=>t.setClass(e,r))),setHeightAndMinHeight:e=>s(e)};i.current.setComp(r,e,e)}),[]),c=(0,n.useMemo)((()=>"ag-header "+e.toString()),[e]),d=(0,n.useMemo)((()=>({height:r,minHeight:r})),[r]);return n.createElement("div",{ref:l,className:c,style:d,role:"presentation"},n.createElement(Vt,{pinned:"left"}),n.createElement(Vt,{pinned:null}),n.createElement(Vt,{pinned:"right"}))})),Kt=(e,t)=>{(0,n.useEffect)((()=>{const r=t.current;if(r){const t=r.parentElement;if(t){const n=document.createComment(e);return t.insertBefore(n,r),()=>{t.removeChild(n)}}}}),[e])},Qt=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new ot.oY$((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){$t(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},Gt=(0,n.memo)((e=>{const[t,r]=(0,n.useState)(),{context:s,popupSvc:a,localeSvc:o,gos:i,editSvc:l}=(0,n.useContext)(it);return(()=>{const t=(0,n.useRef)((()=>{const{editDetails:t,cellCtrl:n,eParentCell:c}=e,{compDetails:d}=t,u=i.get("stopEditingWhenCellsLoseFocus"),h=s.createBean(l.createPopupEditorWrapper(d.params)),m=h.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&m.appendChild(t)}const{column:p,rowNode:f}=n,g={column:p,rowNode:f,type:"popupCellEditor",eventSource:c,ePopup:m,position:t.popupPosition,keepWithinBounds:!0},y=a?.positionPopupByComponent.bind(a,g),v=(0,ot.PFX)(o),b=a?.addPopup({modal:u,eChild:m,closeOnEsc:!0,closedCallback:()=>{n.onPopupEditorClosed()},anchorToElement:c,positionCallback:y,ariaLabel:v("ariaLabelCellEditor","Cell Editor")}),w=b?b.hideFunc:void 0;return r(h),e.jsChildComp?.afterGuiAttached?.(),()=>{w?.(),s.destroyBean(h)}})),c=(0,n.useRef)(),d=(0,n.useRef)(!1),u=(0,n.useRef)(!1),[,h]=(0,n.useState)(0);d.current&&(u.current=!0),(0,n.useEffect)((()=>(d.current||(c.current=t.current(),d.current=!0),h((e=>e+1)),()=>{u.current&&c.current?.()})),[])})(),n.createElement(n.Fragment,null,t&&e.wrappedContent&&(0,H.createPortal)(e.wrappedContent,t.getGui()))})),Jt=(e,t,r)=>{const s=e.compProxy;return n.createElement(n.Fragment,null,s?((e,t,r)=>{const{compProxy:s}=e;r(s);const a=s.getProps(),o=ht(t);return n.createElement(wt.Provider,{value:{setMethods:e=>s.setMethods(e)}},o?n.createElement(t,{...a}):n.createElement(t,{...a,ref:e=>s.setRef(e)}))})(e,t,r):n.createElement(t,{...e.compDetails.params,ref:r}))},Xt=(0,n.memo)((({cellCtrl:e,printLayout:t,editingRow:r})=>{const{context:s}=(0,n.useContext)(it),{colIdSanitised:a,instanceId:o}=e,i=(0,n.useRef)(),[l,c]=(0,n.useState)((()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1})),[d,u]=(0,n.useState)(),[h,m]=(0,n.useState)(1),[p,f]=(0,n.useState)(),[g,y]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),[C,x]=(0,n.useState)(),E=(0,n.useMemo)((()=>e.isForceWrapper()),[e]),$=(0,n.useMemo)((()=>e.getCellAriaRole()),[e]),_=(0,n.useRef)(null),A=(0,n.useRef)(null),k=(0,n.useRef)(null),P=(0,n.useRef)(),T=(0,n.useRef)(),I=(0,n.useRef)(),D=(0,n.useRef)([]),O=(0,n.useRef)(),[N,R]=(0,n.useState)(0),M=(0,n.useCallback)((e=>{O.current=e,R((e=>e+1))}),[]),F=E||null!=l&&(g||w||v),j=(0,n.useCallback)((t=>{if(T.current=t,t){const r=t.isCancelBeforeStart&&t.isCancelBeforeStart();setTimeout((()=>{r?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()}))}}),[e]),L=(0,n.useRef)();L.current||(L.current=new ot.hv8((()=>_.current))),((e,t,r,s,a,o)=>{const{context:i}=(0,n.useContext)(it),l=(0,n.useCallback)((()=>{const e=a.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),i.destroyBean(e),a.current=void 0}),[]);(0,n.useEffect)((()=>{const n=null!=e,s=e?.compDetails&&!e.compDetails.componentFromFramework;if(!n||!s||t&&null==r)return void l();const i=e.compDetails;if(a.current){const t=a.current,r=!(null==t.refresh||0!=e.force)&&t.refresh(i.params);if(!0===r||void 0===r)return;l()}i.newAgStackInstance().then((e=>{if(!e)return;const n=e.getGui();n&&((t?r:o.current).appendChild(n),a.current=e)}))}),[e,t,s]),(0,n.useEffect)((()=>l),[])})(l,F,O.current,N,P,_);const Y=(0,n.useRef)();(0,n.useLayoutEffect)((()=>{const e=Y.current,t=l;if(Y.current=l,null==e||null==e.compDetails||null==t||null==t.compDetails)return;const r=e.compDetails,n=t.compDetails;r.componentClass==n.componentClass&&null!=k.current?.refresh&&1!=k.current.refresh(n.params)&&m((e=>e+1))}),[l]),(0,n.useLayoutEffect)((()=>{if(!d||d.compDetails.componentFromFramework)return;const e=d.compDetails,t=!0===d.popup,r=e.newAgStackInstance();return r.then((e=>{if(!e)return;const r=e.getGui();if(j(e),!t){const t=(E?I:_).current;t?.appendChild(r),e.afterGuiAttached&&e.afterGuiAttached()}x(e)})),()=>{r.then((e=>{const t=e.getGui();s.destroyBean(e),j(void 0),x(void 0),t?.parentElement?.removeChild(t)}))}}),[d]);const q=(0,n.useCallback)((t=>{if(I.current=t,!t)return D.current.forEach((e=>e())),void(D.current=[]);const r=e=>{if(e){const r=e.getGui();t.insertAdjacentElement("afterbegin",r),D.current.push((()=>{s.destroyBean(e),(0,ot.MwW)(r)}))}return e};g&&r(e.createSelectionCheckbox()),w&&r(e.createDndSource()),v&&r(e.createRowDragComp())}),[e,s,w,v,g]),U=(0,n.useCallback)((()=>{const n=!e.isCellSpanning()||A.current,a=_.current;if(i.current=a?s.createBean(new ot.dQD):s.destroyBean(i.current),!a||!n||!e)return;const o={addOrRemoveCssClass:(e,t)=>L.current.addOrRemoveCssClass(e,t),setUserStyles:e=>f(e),getFocusableElement:()=>_.current,setIncludeSelection:e=>y(e),setIncludeRowDrag:e=>b(e),setIncludeDndSource:e=>S(e),getCellEditor:()=>T.current||null,getCellRenderer:()=>k.current??P.current,getParentOfValue:()=>O.current??I.current??_.current,setRenderDetails:(e,t,r)=>{c((n=>n?.compDetails!==e||n?.value!==t||n?.force!==r?{value:t,compDetails:e,force:r}:n))},setEditDetails:(e,t,r,n)=>{if(e){let s;n?s=new Qt(e.params,(()=>m((e=>e+1)))):e.componentFromFramework&&Yt(),u({compDetails:e,popup:t,popupPosition:r,compProxy:s}),t||c(void 0)}else u((e=>{e?.compProxy&&(T.current=void 0)}))}},l=I.current||void 0;e.setComp(o,a,A.current??void 0,l,t,r,i.current)}),[]),z=(0,n.useCallback)((e=>{_.current=e,U()}),[]),B=(0,n.useCallback)((e=>{A.current=e,U()}),[]),W=(0,n.useMemo)((()=>!(!l?.compDetails?.componentFromFramework||!ht(l.compDetails.componentClass))),[l]);(0,n.useLayoutEffect)((()=>{_.current&&(L.current.addOrRemoveCssClass("ag-cell-value",!F),L.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),L.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),L.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),e.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.editing&&_.current.focus({preventScroll:!0}))}));const V=()=>n.createElement(n.Fragment,null,null!=l&&((e,t,r,s,a,o,i)=>{const{compDetails:l,value:c}=e,d=!l,u=l&&l.componentFromFramework,h=l&&l.componentClass,m=c?.toString?c.toString():c,p=()=>n.createElement(n.Fragment,null,d&&n.createElement(n.Fragment,null,m),u&&!o&&n.createElement(h,{...l.params,key:t,ref:s}),u&&o&&n.createElement(h,{...l.params,key:t}));return n.createElement(n.Fragment,null,a?n.createElement("span",{role:"presentation",id:`cell-${r}`,className:"ag-cell-value",ref:i},p()):p())})(l,h,o,k,F,W,M),null!=d&&((e,t,r,s,a)=>{const o=e.compDetails,i=o.componentClass,l=o.componentFromFramework&&!e.popup,c=o.componentFromFramework&&e.popup,d=!o.componentFromFramework&&e.popup;return n.createElement(n.Fragment,null,l&&Jt(e,i,t),c&&n.createElement(Gt,{editDetails:e,cellCtrl:s,eParentCell:r,wrappedContent:Jt(e,i,t)}),d&&a&&n.createElement(Gt,{editDetails:e,cellCtrl:s,eParentCell:r,jsChildComp:a}))})(d,j,_.current,e,C)),H=(0,n.useCallback)((()=>e.onFocusOut()),[]),K=()=>n.createElement("div",{ref:z,style:p,role:$,"col-id":a,onBlur:H},F?n.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:q},V()):V());return e.isCellSpanning()?n.createElement("div",{ref:B,className:"ag-spanned-cell-wrapper",role:"presentation"},K()):K()})),Zt=(0,n.memo)((({rowCtrl:e,containerType:t})=>{const{context:r,gos:s}=(0,n.useContext)(it),a=(0,n.useRef)(),o=(0,n.useRef)(e.getDomOrder()),i=e.isFullWidth(),l=e.rowNode.displayed,[c,d]=(0,n.useState)((()=>l?e.rowNode.getRowIndexString():null)),[u,h]=(0,n.useState)((()=>e.rowId)),[m,p]=(0,n.useState)((()=>e.businessKey)),[f,g]=(0,n.useState)((()=>e.rowStyles)),y=(0,n.useRef)(null),v=(0,n.useRef)(null),[b,w]=(0,n.useState)((()=>null)),[S,C]=(0,n.useState)(),[x,E]=(0,n.useState)((()=>l?e.getInitialRowTop(t):void 0)),[$,_]=(0,n.useState)((()=>l?e.getInitialTransform(t):void 0)),A=(0,n.useRef)(null),k=(0,n.useRef)(),P=(0,n.useRef)(!1),[T,I]=(0,n.useState)(0);(0,n.useEffect)((()=>{if(P.current||!S||T>10)return;const t=A.current?.firstChild;t?(e.setupDetailRowAutoHeight(t),P.current=!0):I((e=>e+1))}),[S,T]);const D=(0,n.useRef)();D.current||(D.current=new ot.hv8((()=>A.current)));const O=(0,n.useCallback)((n=>{if(A.current=n,a.current=n?r.createBean(new ot.dQD):r.destroyBean(a.current),!n)return void e.unsetComp(t);if(!e.isAlive())return;const s={setTop:E,setTransform:_,addOrRemoveCssClass:(e,t)=>D.current.addOrRemoveCssClass(e,t),setDomOrder:e=>o.current=e,setRowIndex:d,setRowId:h,setRowBusinessKey:p,setUserStyles:g,setCellCtrls:(e,t)=>{v.current=y.current,y.current=e;const r=yt(v.current,e,o.current);r!==v.current&&gt(t,(()=>w(r)))},showFullWidth:e=>C(e),getFullWidthCellRenderer:()=>k.current,refreshFullWidth:e=>j.current?(C((t=>({...t,params:e()}))),!0):!(!k.current||!k.current.refresh)&&k.current.refresh(e())};e.setComp(s,n,t,a.current)}),[]);(0,n.useLayoutEffect)((()=>lt(S,r,A.current,k)),[S]);const N=(0,n.useMemo)((()=>{const e={top:x,transform:$};return Object.assign(e,f),e}),[x,$,f]),R=i&&S?.componentFromFramework,M=!i&&null!=b,F=(0,n.useMemo)((()=>!(!S?.componentFromFramework||!ht(S.componentClass))),[S]),j=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{j.current=F&&!!S&&!!s.get("reactiveCustomComponents")}),[F,S]),n.createElement("div",{ref:O,role:"row",style:N,"row-index":c,"row-id":u,"row-business-key":m},M&&b?.map((t=>n.createElement(Xt,{cellCtrl:t,editingRow:e.editing,printLayout:e.printLayout,key:t.instanceId}))),R&&(()=>{const e=S.componentClass;return n.createElement(n.Fragment,null,F?n.createElement(e,{...S.params}):n.createElement(e,{...S.params,ref:k}))})())})),er=(0,n.memo)((({name:e})=>{const{context:t,gos:r}=(0,n.useContext)(it),s=(0,n.useMemo)((()=>(0,ot.BEv)(e)),[e]),a=(0,n.useRef)(null),o=(0,n.useRef)(null),i=(0,n.useRef)(null),l=(0,n.useRef)([]),c=(0,n.useRef)([]),[d,u]=(0,n.useState)((()=>[])),h=!!r.get("enableCellSpan")&&!!s.getSpannedRowCtrls,m=(0,n.useRef)([]),p=(0,n.useRef)([]),[f,g]=(0,n.useState)((()=>[])),y=(0,n.useRef)(!1),v=(0,n.useRef)(),b=(0,n.useMemo)((()=>dt("ag-viewport",(0,ot._oP)(e))),[e]),w=(0,n.useMemo)((()=>dt((0,ot.Hky)(e))),[e]),S=(0,n.useMemo)((()=>dt("ag-spanning-container",(0,ot.bUh)(e))),[e]),C="center"===s.type||h;Kt(" AG Row Container "+e+" ",C?a:o);const x=(0,n.useCallback)((()=>{const e=!C||null!=a.current,t=null!=o.current,r=!h||null!=i.current;return e&&t&&r}),[]),E=(0,n.useCallback)((()=>null==a.current&&null==o.current&&null==i.current),[]),$=(0,n.useCallback)((()=>{if(E()&&(v.current=t.destroyBean(v.current)),x()){const r=e=>{const t=yt(c.current,l.current,y.current);t!==c.current&&(c.current=t,gt(e,(()=>u(t))))},n=e=>{const t=yt(p.current,m.current,y.current);t!==p.current&&(p.current=t,gt(e,(()=>g(t))))},s={setHorizontalScroll:e=>{a.current&&(a.current.scrollLeft=e)},setViewportHeight:e=>{a.current&&(a.current.style.height=e)},setRowCtrls:({rowCtrls:e,useFlushSync:t})=>{const n=!!t&&l.current.length>0&&e.length>0;l.current=e,r(n)},setSpannedRowCtrls:(e,t)=>{const r=!!t&&m.current.length>0&&e.length>0;m.current=e,n(r)},setDomOrder:e=>{y.current!=e&&(y.current=e,r(!1))},setContainerWidth:e=>{o.current&&(o.current.style.width=e)},setOffsetTop:e=>{o.current&&(o.current.style.transform=`translateY(${e})`)}};v.current=t.createBean(new ot.Rlq(e)),v.current.setComp(s,o.current,i.current??void 0,a.current)}}),[x,E]),_=(0,n.useCallback)((e=>{o.current=e,$()}),[$]),A=(0,n.useCallback)((e=>{i.current=e,$()}),[$]),k=(0,n.useCallback)((e=>{a.current=e,$()}),[$]),P=()=>n.createElement("div",{className:w,ref:_,role:"rowgroup"},d.map((e=>n.createElement(Zt,{rowCtrl:e,containerType:s.type,key:e.instanceId}))));return C?n.createElement("div",{className:b,ref:k,role:"presentation"},P(),h&&n.createElement("div",{className:S,ref:A,role:"rowgroup"},f.map((e=>n.createElement(Zt,{rowCtrl:e,containerType:s.type,key:e.instanceId}))))):P()})),tr=(0,n.memo)((()=>{const e=(0,n.useContext)(it),{context:t,overlays:r}=e,[s,a]=(0,n.useState)(""),[o,i]=(0,n.useState)(0),[l,c]=(0,n.useState)(0),[d,u]=(0,n.useState)("0px"),[h,m]=(0,n.useState)("0px"),[p,f]=(0,n.useState)("100%"),[g,y]=(0,n.useState)("0px"),[v,b]=(0,n.useState)("0px"),[w,S]=(0,n.useState)("100%"),[C,x]=(0,n.useState)(""),[E,$]=(0,n.useState)(""),[_,A]=(0,n.useState)(null),[k,P]=(0,n.useState)(""),[T,I]=(0,n.useState)(null),[D,O]=(0,n.useState)("ag-layout-normal"),N=(0,n.useRef)();N.current||(N.current=new ot.hv8((()=>R.current)));const R=(0,n.useRef)(null),M=(0,n.useRef)(null),F=(0,n.useRef)(null),j=(0,n.useRef)(null),L=(0,n.useRef)(null),Y=(0,n.useRef)(null),q=(0,n.useRef)(null),U=(0,n.useRef)([]),z=(0,n.useRef)([]);Kt(" AG Grid Body ",R),Kt(" AG Pinned Top ",M),Kt(" AG Sticky Top ",F),Kt(" AG Middle ",Y),Kt(" AG Pinned Bottom ",q);const B=(0,n.useCallback)((n=>{if(R.current=n,!n)return U.current=t.destroyBeans(U.current),z.current.forEach((e=>e())),void(z.current=[]);if(!t)return;const s=(e,t)=>{e.appendChild(t),z.current.push((()=>e.removeChild(t)))},o=(e,r,n)=>{s(e,document.createComment(n)),s(e,(e=>{const r=t.createBean(new e);return U.current.push(r),r})(r).getGui())};o(n,ot.ifX," AG Fake Horizontal Scroll ");const l=r?.getOverlayWrapperCompClass();l&&o(n,l," AG Overlay Wrapper "),L.current&&o(L.current,ot.AR_," AG Fake Vertical Scroll ");const d={setRowAnimationCssOnBodyViewport:a,setColumnCount:e=>{R.current&&(0,ot.Aag)(R.current,e)},setRowCount:e=>{R.current&&(0,ot.cBy)(R.current,e)},setTopHeight:i,setBottomHeight:c,setStickyTopHeight:u,setStickyTopTop:m,setStickyTopWidth:f,setTopDisplay:x,setBottomDisplay:$,setColumnMovingCss:(e,t)=>N.current.addOrRemoveCssClass(e,t),updateLayoutClasses:O,setAlwaysVerticalScrollClass:A,setPinnedTopBottomOverflowY:P,setCellSelectableCss:(e,t)=>I(t?e:null),setBodyViewportWidth:e=>{Y.current&&(Y.current.style.width=e)},registerBodyViewportResizeListener:t=>{if(Y.current){const r=(0,ot.QSI)(e,Y.current,t);z.current.push((()=>r()))}},setStickyBottomHeight:y,setStickyBottomBottom:b,setStickyBottomWidth:S,setGridRootRole:e=>n.setAttribute("role",e)},h=t.createBean(new ot.m20);U.current.push(h),h.setComp(d,n,Y.current,M.current,q.current,F.current,j.current)}),[]),W=(0,n.useMemo)((()=>dt("ag-root","ag-unselectable",D)),[D]),V=(0,n.useMemo)((()=>dt("ag-body-viewport",s,D,_,T)),[s,D,_,T]),H=(0,n.useMemo)((()=>dt("ag-body",D)),[D]),K=(0,n.useMemo)((()=>dt("ag-floating-top",T)),[T]),Q=(0,n.useMemo)((()=>dt("ag-sticky-top",T)),[T]),G=(0,n.useMemo)((()=>dt("ag-sticky-bottom","0px"===g?"ag-hidden":null,T)),[T,g]),J=(0,n.useMemo)((()=>dt("ag-floating-bottom",T)),[T]),X=(0,n.useMemo)((()=>({height:o,minHeight:o,display:C,overflowY:k})),[o,C,k]),Z=(0,n.useMemo)((()=>({height:d,top:h,width:p})),[d,h,p]),ee=(0,n.useMemo)((()=>({height:g,bottom:v,width:w})),[g,v,w]),te=(0,n.useMemo)((()=>({height:l,minHeight:l,display:E,overflowY:k})),[l,E,k]),re=e=>n.createElement(er,{name:e,key:`${e}-container`}),ne=({section:e,children:t,className:r,style:s})=>n.createElement("div",{ref:e,className:r,role:"presentation",style:s},t.map(re));return n.createElement("div",{ref:B,className:W},n.createElement(Ht,null),ne({section:M,className:K,style:X,children:["topLeft","topCenter","topRight","topFullWidth"]}),n.createElement("div",{className:H,ref:L,role:"presentation"},ne({section:Y,className:V,children:["left","center","right","fullWidth"]})),ne({section:F,className:Q,style:Z,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ne({section:j,className:G,style:ee,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ne({section:q,className:J,style:te,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))})),rr=(0,n.forwardRef)(((e,t)=>{const{children:r,eFocusableElement:s,onTabKeyDown:a,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:i,isEmpty:l}=e,{context:c}=(0,n.useContext)(it),d=(0,n.useRef)(null),u=(0,n.useRef)(null),h=(0,n.useRef)(),m=e=>{const t=null==e?void 0:parseInt(e,10).toString();[d,u].forEach((e=>{void 0===t?e.current?.removeAttribute("tabindex"):e.current?.setAttribute("tabindex",t)}))};(0,n.useImperativeHandle)(t,(()=>({forceFocusOutOfContainer(e){h.current?.forceFocusOutOfContainer(e)}})));const p=(0,n.useCallback)((()=>{const e=d.current,t=u.current;if(e||t){if(e&&t){const r={setTabIndex:m};h.current=c.createBean(new ot.Udn({comp:r,eTopGuard:e,eBottomGuard:t,eFocusableElement:s,onTabKeyDown:a,forceFocusOutWhenTabGuardsAreEmpty:i,focusInnerElement:e=>o.focusInnerElement(e),isEmpty:l}))}}else h.current=c.destroyBean(h.current)}),[]),f=(0,n.useCallback)((e=>{d.current=e,p()}),[p]),g=(0,n.useCallback)((e=>{u.current=e,p()}),[p]),y=e=>{const t="top"===e?ot.pA9.TAB_GUARD_TOP:ot.pA9.TAB_GUARD_BOTTOM;return n.createElement("div",{className:`${ot.pA9.TAB_GUARD} ${t}`,role:"presentation",ref:"top"===e?f:g})};return n.createElement(n.Fragment,null,y("top"),r,y("bottom"))})),nr=(0,n.memo)(rr),sr=(0,n.memo)((({context:e})=>{const[t,r]=(0,n.useState)(""),[s,a]=(0,n.useState)(""),[o,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(),p=(0,n.useRef)(),f=(0,n.useRef)(null),g=(0,n.useRef)(),[y,v]=(0,n.useState)(null),b=(0,n.useRef)((()=>{})),w=(0,n.useRef)(),S=(0,n.useRef)([]),C=(0,n.useCallback)((()=>{}),[]),x=(0,n.useMemo)((()=>e.isDestroyed()?null:e.getBeans()),[e]);Kt(" AG Grid ",f);const E=(0,n.useCallback)((t=>{if(f.current=t,p.current=t?e.createBean(new ot.s1r):e.destroyBean(p.current),!t||e.isDestroyed())return;const n=p.current;b.current=n.focusInnerElement.bind(n);const s={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:e=>{e||!w.current?.isDisplayed()?g.current?.forceFocusOutOfContainer(e):w.current.forceFocusOutOfContainer(e)},updateLayoutClasses:a,getFocusableContainers:()=>{const e=[],t=f.current?.querySelector(".ag-root");return t&&e.push({getGui:()=>t}),S.current.forEach((t=>{t.isDisplayed()&&e.push(t)})),e},setCursor:i,setUserSelect:c};n.setComp(s,t,t),u(!0)}),[]);(0,n.useEffect)((()=>{const t=p.current,r=f.current;if(!(h&&x&&t&&y&&r))return;const n=[],{watermarkSelector:s,paginationSelector:a,sideBarSelector:o,statusBarSelector:i,gridHeaderDropZonesSelector:l}=t.getOptionalSelectors(),c=[];if(l){const t=e.createBean(new l.component),s=t.getGui();r.insertAdjacentElement("afterbegin",s),c.push(s),n.push(t)}if(o){const t=e.createBean(new o.component),r=t.getGui(),s=y.querySelector(".ag-tab-guard-bottom");s&&(s.insertAdjacentElement("beforebegin",r),c.push(r)),n.push(t),S.current.push(t)}const d=t=>{const s=e.createBean(new t),a=s.getGui();return r.insertAdjacentElement("beforeend",a),c.push(a),n.push(s),s};if(i&&d(i.component),a){const e=d(a.component);w.current=e,S.current.push(e)}return s&&d(s.component),()=>{e.destroyBeans(n),c.forEach((e=>{e.parentElement?.removeChild(e)}))}}),[h,y,x]);const $=(0,n.useMemo)((()=>dt("ag-root-wrapper",t,s)),[t,s]),_=(0,n.useMemo)((()=>dt("ag-root-wrapper-body","ag-focus-managed",s)),[s]),A=(0,n.useMemo)((()=>({userSelect:null!=l?l:"",WebkitUserSelect:null!=l?l:"",cursor:null!=o?o:""})),[l,o]),k=(0,n.useCallback)((e=>{g.current=e,m(null!==e)}),[]),P=(0,n.useCallback)((()=>!p.current?.isFocusable()),[]);return n.createElement("div",{ref:E,className:$,style:A,role:"presentation"},n.createElement("div",{className:_,ref:v,role:"presentation"},d&&y&&x&&n.createElement(it.Provider,{value:x},n.createElement(nr,{ref:k,eFocusableElement:y,onTabKeyDown:C,gridCtrl:p.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:P},n.createElement(tr,null)))))})),ar=class extends ot.XQb{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every((e=>e.getAllCtrls().every((e=>e.areCellsRendered()))))}},or=new Set(Object.keys({gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,setGridApi:void 0,componentWrappingElement:void 0,maxComponentCreationTimeMs:void 0,children:void 0})),ir=e=>{const t=(0,n.useRef)(),r=(0,n.useRef)(null),s=(0,n.useRef)(null),a=(0,n.useRef)([]),o=(0,n.useRef)([]),i=(0,n.useRef)(e),l=(0,n.useRef)(),c=(0,n.useRef)(),d=(0,n.useRef)(!1),[u,h]=(0,n.useState)(void 0),[,m]=(0,n.useState)(0),p=(0,n.useCallback)((n=>{if(r.current=n,!n)return a.current.forEach((e=>e())),void(a.current.length=0);const i=e.modules||[];s.current||(s.current=new qt((()=>m((e=>e+1))),e.componentWrappingElement,e.maxComponentCreationTimeMs),a.current.push((()=>{s.current?.destroy(),s.current=null})));const u=(0,ot.zsR)(e.gridOptions,e,Object.keys(e).filter((e=>!or.has(e)))),p=new dr((()=>{if(d.current){const e=()=>l.current?.shouldQueueUpdates()?void 0:o.current.shift();let t=e();for(;t;)t(),t=e()}}));l.current=p;const f=new ar,g={providedBeanInstances:{frameworkCompWrapper:new lr(s.current,u.reactiveCustomComponents??(0,ot.c1h)("reactiveCustomComponents")??!0),renderStatus:f},modules:i,frameworkOverrides:p,setThemeOnGridDiv:!0},y=new ot.Ug$;u.gridId??(u.gridId=c.current),t.current=y.create(n,u,(r=>{h(r),r.createBean(f),a.current.push((()=>{r.destroy()})),r.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},(()=>{if(r.isDestroyed())return;const n=t.current;n&&e.setGridApi?.(n)}))}),(e=>{e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},(()=>{o.current.forEach((e=>e())),o.current.length=0,d.current=!0}))}),g),a.current.push((()=>{t.current=void 0})),t.current&&(c.current=t.current.getGridId())}),[]),f=(0,n.useMemo)((()=>({height:"100%",...e.containerStyle||{}})),[e.containerStyle]),g=(0,n.useCallback)((e=>{d.current&&!l.current?.shouldQueueUpdates()?e():o.current.push(e)}),[]);return(0,n.useEffect)((()=>{const r=function(e,t){const r={};return Object.keys(t).forEach((n=>{if(or.has(n))return;const s=t[n];e[n]!==s&&(r[n]=s)})),r}(i.current,e);i.current=e,g((()=>{t.current&&(0,ot.Y6t)(r,t.current)}))}),[e]),n.createElement("div",{style:f,className:e.className,ref:p},u&&!u.isDestroyed()?n.createElement(sr,{context:u}):null,s.current?.getPortals()??null)},lr=class extends ot.Cf3{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const r=(e=>{switch(e){case"filter":return Tt;case"floatingFilterComponent":return Ot;case"dateComponent":return kt;case"dragAndDropImageComponent":return Pt;case"loadingOverlayComponent":return Rt;case"noRowsOverlayComponent":return Ft;case"statusPanel":return jt;case"toolPanel":return Lt;case"menuItem":return Mt;case"cellRenderer":return At;case"innerHeaderComponent":return Nt}})(t.name);if(r)return new r(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Yt()}const r=!t.cellRenderer&&"toolPanel"!==t.name;return new Et(e,this.parent,t,r)}},cr=(0,n.forwardRef)(((e,t)=>{const r=(0,n.useContext)(it),{registry:s,context:a,gos:o,rowModel:i}=r,[l,c]=(0,n.useState)((()=>new ut)),[d,u]=(0,n.useState)((()=>new ut)),[h,m]=(0,n.useState)(),[p,f]=(0,n.useState)(),g=(0,n.useRef)(),y=(0,n.useRef)(null),v=(0,n.useRef)(),b=(0,n.useMemo)((()=>(0,ot.Dii)(e.api.getGridId(),h?.rowModelType??"clientSide")),[e]),w=(0,n.useMemo)((()=>l.toString()+" ag-details-row"),[l]),S=(0,n.useMemo)((()=>d.toString()+" ag-details-grid"),[d]);t&&(0,n.useImperativeHandle)(t,(()=>({refresh:()=>g.current?.refresh()??!1}))),e.template&&(0,ot.ujB)(230);const C=(0,n.useCallback)((t=>{if(y.current=t,!t)return g.current=a.destroyBean(g.current),void v.current?.();const n={addOrRemoveCssClass:(e,t)=>c((r=>r.setClass(e,t))),addOrRemoveDetailGridCssClass:(e,t)=>u((r=>r.setClass(e,t))),setDetailGrid:e=>m(e),setRowData:e=>f(e),getGui:()=>y.current},l=s.createDynamicBean("detailCellRendererCtrl",!0);if(l&&(a.createBean(l),l.init(n,e),g.current=l,o.get("detailRowAutoHeight"))){const n=()=>{if(null==y.current)return;const t=y.current.clientHeight;null!=t&&t>0&&setTimeout((()=>{e.node.setRowHeight(t),((0,ot.dbY)(o,i)||(0,ot.TiQ)(o,i))&&i.onRowHeightChanged()}),0)};v.current=(0,ot.QSI)(r,t,n),n()}}),[]),x=(0,n.useCallback)((e=>{g.current?.registerDetailWithMaster(e)}),[]);return n.createElement("div",{className:w,ref:C},h&&n.createElement(ir,{className:S,...h,modules:b,rowData:p,setGridApi:x}))})),dr=class extends ot.pow{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:bt,agGroupRowRenderer:bt,agDetailCellRenderer:cr},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(r=e,ft||setTimeout((()=>ft=!1),0),ft=!0,r()):e();var r},this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===mt}},ur=class extends n.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return n.createElement(ir,{...this.props,setGridApi:this.setGridApi})}},hr=r(73135),mr=r(49544);const pr="-1";var fr;!function(e){e.Small="small",e.Middle="middle"}(fr||(fr={}));const gr=b.I4.span`
  width: 14px;
`,yr=({colId:e,api:t,pinnedLeft:r,pinnedRight:s,invisibleColumns:a,isMain:o,onVisibleChange:i})=>{var l;const c=(0,n.useCallback)((r=>{t.setColumnsPinned([e],r)}),[t,e]),d=a.length>0&&(0,h.FD)(ye.W1.SubMenu,{title:(0,w.t)("Unhide"),icon:(0,h.Y)(F.A.EyeOutlined,{iconSize:"m"}),children:[a.length>1&&(0,h.Y)(ye.W1.Item,{onClick:()=>{t.setColumnsVisible(a,!0)},children:(0,h.Y)("b",{children:(0,w.t)("All %s hidden columns",a.length)})}),a.map((e=>(0,h.Y)(ye.W1.Item,{onClick:()=>{t.setColumnsVisible([e.getColId()],!0)},children:e.getColDef().headerName},e.getColId())))]});return o?(0,h.Y)(me.LO,{placement:"bottomLeft",trigger:["click"],onOpenChange:i,overlay:(0,h.FD)(ye.W1,{style:{width:250},mode:"vertical",children:[(0,h.Y)(ye.W1.Item,{onClick:()=>{(0,hr.A)((()=>new Promise(((r,n)=>{const s=t.getDataAsCsv({columnKeys:t.getAllDisplayedColumns().map((e=>e.getColId())).filter((t=>t!==e)),suppressQuotes:!0,columnSeparator:"\t"});s?r(s):n()}))))},icon:(0,h.Y)(F.A.CopyOutlined,{iconSize:"m"}),children:(0,w.t)("Copy the current data")}),(0,h.Y)(ye.W1.Item,{onClick:()=>{t.exportDataAsCsv({columnKeys:t.getAllDisplayedColumns().map((e=>e.getColId())).filter((t=>t!==e))})},icon:(0,h.Y)(F.A.DownloadOutlined,{iconSize:"m"}),children:(0,w.t)("Download to CSV")}),(0,h.Y)(ye.W1.Divider,{}),(0,h.Y)(ye.W1.Item,{onClick:()=>{t.autoSizeAllColumns()},icon:(0,h.Y)(F.A.ColumnWidthOutlined,{iconSize:"m"}),children:(0,w.t)("Autosize all columns")}),d,(0,h.Y)(ye.W1.Divider,{}),(0,h.Y)(ye.W1.Item,{onClick:()=>{t.setColumnsVisible(a,!0);const e=t.getColumns();if(e){const r=e.filter((e=>e.getColId()!==pr&&e.isPinned()));t.setColumnsPinned(r,null),t.moveColumns(e,0);const n=e.find((e=>e.getColId()!==pr));n&&t.ensureColumnVisible(n,"start")}},icon:(0,h.Y)(gr,{className:"anticon"}),children:(0,w.t)("Reset columns")})]})}):(0,h.Y)(me.LO,{placement:"bottomRight",trigger:["click"],onOpenChange:i,overlay:(0,h.FD)(ye.W1,{style:{width:180},mode:"vertical",children:[(0,h.Y)(ye.W1.Item,{onClick:()=>{(0,hr.A)((()=>new Promise(((r,n)=>{const s=t.getDataAsCsv({columnKeys:[e],suppressQuotes:!0});s?r(s):n()}))))},icon:(0,h.Y)(F.A.CopyOutlined,{iconSize:"m"}),children:(0,w.t)("Copy")}),(r||s)&&(0,h.Y)(ye.W1.Item,{onClick:()=>c(null),icon:(0,h.Y)(F.A.UnlockOutlined,{iconSize:"m"}),children:(0,w.t)("Unpin")}),!r&&(0,h.Y)(ye.W1.Item,{onClick:()=>c("left"),icon:(0,h.Y)(F.A.VerticalRightOutlined,{iconSize:"m"}),children:(0,w.t)("Pin Left")}),!s&&(0,h.Y)(ye.W1.Item,{onClick:()=>c("right"),icon:(0,h.Y)(F.A.VerticalLeftOutlined,{iconSize:"m"}),children:(0,w.t)("Pin Right")}),(0,h.Y)(ye.W1.Divider,{}),(0,h.Y)(ye.W1.Item,{onClick:()=>{t.autoSizeColumns([e])},icon:(0,h.Y)(F.A.ColumnWidthOutlined,{iconSize:"m"}),children:(0,w.t)("Autosize Column")}),(0,h.Y)(ye.W1.Item,{onClick:()=>{t.setColumnsVisible([e],!1)},disabled:(null==(l=t.getColumns())?void 0:l.length)===a.length+1,icon:(0,h.Y)(F.A.EyeInvisibleOutlined,{iconSize:"m"}),children:(0,w.t)("Hide Column")}),d]})})},vr=[null,"asc","desc"],br=b.I4.div`
  display: flex;
  flex: 1;
  &[role='button'] {
    cursor: pointer;
  }
`,wr=b.I4.div`
  position: relative;
  display: inline-flex;
  align-items: center;
`,Sr=b.I4.span`
  position: absolute;
  right: 0;
`,Cr=b.I4.div`
  display: none;
  position: absolute;
  right: 0;
  &.main {
    flex-direction: row;
    justify-content: center;
    width: 100%;
  }
  & .antd5-dropdown-trigger {
    cursor: context-menu;
    padding: ${({theme:e})=>2*e.gridUnit}px;
    background-color: var(--ag-background-color);
    box-shadow: 0 0 2px var(--ag-chip-border-color);
    border-radius: 50%;
    &:hover {
      box-shadow: 0 0 4px ${({theme:e})=>e.colors.grayscale.light1};
    }
  }
`,xr=b.I4.div`
  position: absolute;
  top: 0;
`,Er={agColumnHeader:({enableFilterButton:e,enableSorting:t,displayName:r,setSort:s,column:a,api:o})=>{const i=(0,b.DP)(),l=a.getColId(),c=a.isPinnedLeft(),d=a.isPinnedRight(),u=(0,n.useRef)(0),[m,p]=(0,n.useState)([]),[f,g]=(0,n.useState)(null),[y,v]=(0,n.useState)(),S=(0,n.useCallback)((e=>{u.current=(u.current+1)%vr.length;const t=vr[u.current];s(t,e.shiftKey),g(t)}),[s]),C=(0,n.useCallback)((e=>{var t;e&&p((null==(t=o.getColumns())?void 0:t.filter((e=>!e.isVisible())))||[])}),[o]),x=(0,n.useCallback)((()=>{var e,t;const r=-1!==o.getAllDisplayedColumns().findIndex((e=>e.getSortIndex())),n=a.getSortIndex();u.current=vr.indexOf(null!=(e=a.getSort())?e:null),g(null!=(t=a.getSort())?t:null),v(r?n:null)}),[o,a]);return(0,n.useEffect)((()=>(o.addEventListener("sortChanged",x),()=>{o.isDestroyed()||o.removeEventListener("sortChanged",x)})),[o,x]),(0,h.FD)(h.FK,{children:[l!==pr&&(0,h.FD)(br,{tabIndex:0,className:"ag-header-cell-label",...t&&{role:"button",onClick:S,title:(0,w.t)("To enable multiple column sorting, hold down the ⇧ Shift key while clicking the column header.")},children:[(0,h.Y)("div",{className:"ag-header-cell-text",children:r}),t&&(0,h.FD)(wr,{children:[(0,h.Y)(F.A.Sort,{iconSize:"xxl"}),(0,h.FD)(xr,{children:["asc"===f&&(0,h.Y)(F.A.SortAsc,{iconSize:"xxl",iconColor:i.colors.primary.base}),"desc"===f&&(0,h.Y)(F.A.SortDesc,{iconSize:"xxl",iconColor:i.colors.primary.base})]}),"number"==typeof y&&(0,h.Y)(Sr,{children:y+1})]})]}),e&&l&&o&&(0,h.Y)(Cr,{className:"customHeaderAction"+(l===pr?" main":""),children:l&&(0,h.Y)(yr,{colId:l,api:o,pinnedLeft:c,pinnedRight:d,invisibleColumns:m,isMain:l===pr,onVisibleChange:C})})]})}},$r=({api:e})=>e.refreshCells(),_r=function({data:e,columns:t,sortable:r=!0,columnReorderable:s,height:o,externalFilter:i,showRowNumber:l,enableActions:c,size:d=fr.Middle,striped:u}){const m=(0,b.DP)(),p=(0,n.useCallback)((()=>Boolean(i)),[i]),f=`${e.length}}`.length,g=(0,n.useCallback)((({event:e,column:t,data:r,value:n,api:s})=>{var a;if((null==document.getSelection||null==(a=document.getSelection())||null==a.toString||!a.toString())&&e&&"c"===e.key&&(e.ctrlKey||e.metaKey)){const e=t.getColId()===pr?s.getAllDisplayedColumns().filter((e=>e.getColId()!==pr)):[t],a=t.getColId()===pr?[e.map((e=>e.getColId())).join("\t"),e.map((e=>null==r?void 0:r[e.getColId()])).join("\t")].join("\n"):String(n);(0,hr.A)((()=>Promise.resolve(a)))}}),[]),y=(0,n.useMemo)((()=>[{field:pr,valueGetter:"node.rowIndex+1",cellClass:"locked-col",width:30+6*f,suppressNavigable:!0,resizable:!1,pinned:"left",sortable:!1,...s&&{suppressMovable:!0}},...t.map((({label:e,headerName:n,width:s,render:a,comparator:o},i)=>({field:e,headerName:n,cellRenderer:a,sortable:r,comparator:o,...i===t.length-1&&{flex:1,width:s,minWidth:150}})))].slice(l?0:1)),[f,s,t,l,r]),v=(0,n.useMemo)((()=>({...!s&&{suppressMovable:!0},resizable:!0,sortable:r,filter:Boolean(c)})),[s,c,r]),w=m.gridUnit*(d===fr.Middle?9:7),S=(0,n.useMemo)((()=>({enableCellTextSelection:!0,ensureDomOrder:!0,suppressFieldDotNotation:!0,headerHeight:w,rowSelection:"multiple",rowHeight:w})),[w]);return(0,h.FD)(mr.A,{children:[(0,h.Y)(a.mL,{styles:()=>a.AH`
          #grid-table.ag-theme-quartz {
            --ag-icon-font-family: agGridMaterial;
            --ag-grid-size: ${m.gridUnit}px;
            --ag-font-size: ${m.typography.sizes[d===fr.Middle?"m":"s"]}px;
            --ag-font-family: ${m.typography.families.sansSerif};
            --ag-row-height: ${w}px;
            ${!u&&`--ag-odd-row-background-color: ${m.colors.grayscale.light5};`}
            --ag-border-color: ${m.colors.grayscale.light2};
            --ag-row-border-color: ${m.colors.grayscale.light2};
            --ag-header-background-color: ${m.colors.grayscale.light4};
          }
          #grid-table .ag-cell {
            -webkit-font-smoothing: antialiased;
          }
          .locked-col {
            background: var(--ag-row-border-color);
            padding: 0;
            text-align: center;
            font-size: calc(var(--ag-font-size) * 0.9);
            color: var(--ag-disabled-foreground-color);
          }
          .ag-row-hover .locked-col {
            background: var(--ag-row-hover-color);
          }
          .ag-header-cell {
            overflow: hidden;
          }
          & [role='columnheader']:hover .customHeaderAction {
            display: flex;
          }
        `}),(0,h.Y)("div",{id:"grid-table",className:"ag-theme-quartz",css:a.AH`
          width: 100%;
          height: ${o}px;
        `,children:(0,h.Y)(ur,{rowData:e,columnDefs:y,defaultColDef:v,onSortChanged:$r,isExternalFilterPresent:p,doesExternalFilterPass:i,components:Er,gridOptions:S,onCellKeyDown:g})})]})},Ar=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))$/,kr=b.I4.div`
  height: 100%;
  overflow: hidden;
`,Pr=e=>"string"==typeof e&&Ar.test(e)?parseFloat(e):e,Tr=(e,t)=>{const r=Pr(e),n=Pr(t);return r===n?0:null===r?1:null===n||r<n?-1:1},Ir=({orderedColumnKeys:e,data:t,height:r,filterText:s="",expandedColumns:a=[],allowHTML:o=!0,striped:i})=>{const l=function({columnKeys:e,expandedColumns:t}){const r=(0,n.useMemo)((()=>e.reduce(((e,r)=>({...e,[r]:null==t?void 0:t.some((e=>e.startsWith(`${r}.`)))})),{})),[t,e]);return(0,n.useCallback)((({cellData:e,columnKey:t})=>{if(null===e)return Ge;const n=String(e),s=n.substring(0,1);let a;return a="["===s?"[…]":"{"===s?"{…}":"",r[t]?a:n}),[r])}({columnKeys:e,expandedColumns:a}),c=(0,n.useMemo)((()=>e.map((e=>({key:e,label:e,fieldName:e,headerName:e,comparator:Tr,render:({value:e,colDef:t})=>(({cellData:e,getCellContent:t,columnKey:r,allowHTML:n=!0})=>{var s;const a=null!=(s=null==t?void 0:t({cellData:e,columnKey:r}))?s:String(e);if(null===e)return(0,h.Y)("i",{className:"text-muted",children:Ge});const o=function(e){if("string"!=typeof e||-1===["{","["].indexOf(e.substring(0,1)))return null;try{const t=Xe()({storeAsString:!0}).parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}}(e);return o?(0,h.Y)(st,{modalTitle:(0,w.t)("Cell content"),jsonObject:o,jsonValue:e}):n&&"string"==typeof e?(0,at.nn)(a):a})({cellData:e,columnKey:t.field,allowHTML:o,getCellContent:l})})))),[e,o,l]),d=(0,n.useRef)(s);d.current=s;const u=(0,n.useCallback)((e=>!d.current||!e.data||((e,t)=>{const r=[];Object.keys(t).forEach((e=>{if(t.hasOwnProperty(e)){const n=t[e];"string"==typeof n?r.push(n.toLowerCase()):null!==n&&"function"==typeof n.toString&&r.push(n.toString())}}));const n=e.toLowerCase();return r.some((e=>e.includes(n)))})(d.current,e.data)),[]);return(0,h.Y)(kr,{className:"filterable-table-container",children:(0,h.Y)(_r,{size:fr.Small,height:r,usePagination:!1,columns:c,data:t,externalFilter:u,showRowNumber:!0,striped:i,enableActions:!0,columnReorderable:!0})})};var Dr=r(84666),Or=r(93641);const Nr=({table:e,schema:t,dbId:r,templateParams:n})=>{const a=(0,s.d4)((e=>e.sqlLab.errorMessage)),o=(0,s.wA)(),i={table_name:e,schema:t,database_id:r,template_params:n};return(0,h.FD)(de.A,{buttonSize:"small",onClick:()=>{o((0,d.createCtasDatasource)(i)).then((e=>{const t={datasource:`${e.table_id}__table`,metrics:["count"],groupby:[],viz_type:Or.Y.Table,since:"100 years ago",all_columns:[],row_limit:1e3};o((0,d.addInfoToast)((0,w.t)("Creating a data source and creating a new tab"))),(0,He.Cq)(t)})).catch((()=>{o((0,d.addDangerToast)(a||(0,w.t)("An error occurred")))}))},tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:[(0,h.Y)(Se.W,{icon:"line-chart",placement:"top",label:(0,w.t)("explore")})," ",(0,w.t)("Explore")]})},Rr=({database:e,onClick:t})=>{var r;const n=null!=(r=null==e?void 0:e.allows_subquery)&&r;return(0,h.FD)(de.A,{buttonSize:"small",onClick:t,disabled:!n,tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:[(0,h.Y)(Se.W,{icon:"line-chart",placement:"top",label:(0,w.t)("explore")})," ",(0,w.t)("Create Chart")]})};var Mr=r(45738),Fr=r(78360),jr=r(10286);Mr.A.registerLanguage("sql",Fr.A);const Lr=(e,t,r)=>{let n=(e||"").split("\n");return n.length>=t&&(n=n.slice(0,t),n.push("{...}")),n.map((e=>e.length>r?`${e.slice(0,r)}{...}`:e)).join("\n")};function Yr({shrink:e,sql:t,maxLines:r,maxWidth:n}){return(0,h.Y)(Mr.A,{language:"sql",style:jr.A,children:e?Lr(t,r,n):t})}function qr({rawSql:e,sql:t}){return(0,h.FD)("div",{children:[(0,h.Y)("h4",{children:(0,w.t)("Source SQL")}),(0,h.Y)(Mr.A,{language:"sql",style:jr.A,children:t}),e&&e!==t&&(0,h.FD)("div",{children:[(0,h.Y)("h4",{children:(0,w.t)("Executed SQL")}),(0,h.Y)(Mr.A,{language:"sql",style:jr.A,children:e})]})]})}const Ur=function({sql:e,rawSql:t,maxWidth:r=50,maxLines:n=5,shrink:s=!1}){return(0,h.Y)(xe.A,{modalTitle:(0,w.t)("SQL"),modalBody:(0,h.Y)(qr,{rawSql:t,sql:e}),triggerNode:(0,h.Y)(Yr,{shrink:s,sql:e,maxLines:n,maxWidth:r})})},zr=(0,b.I4)(Ie.Ay)`
  margin-right: ${({theme:e})=>e.gridUnit}px;
`;function Br({query:e}){return(0,h.Y)(zr,{type:S.sA[e.state],children:S.K8[e.state]})}var Wr;!function(e){e.Query="QUERY",e.QueryAndDropdown="QUERY_AND_DROPDOWN",e.Dropdown="DROPDOWN",e.NotLimited="NOT_LIMITED"}(Wr||(Wr={}));const Vr=b.I4.div`
  display: flex;
  flex-direction: column;
  row-gap: ${({theme:e})=>2*e.gridUnit}px;
`,Hr=b.I4.div`
  position: relative;
  min-height: ${({theme:e})=>25*e.gridUnit}px;
  [role='alert'] {
    margin-top: ${({theme:e})=>2*e.gridUnit}px;
  }
  .sql-result-track-job {
    margin-top: ${({theme:e})=>2*e.gridUnit}px;
  }
`,Kr=b.I4.div`
  font-family: ${({theme:e})=>e.typography.families.monospace};
  white-space: pre;
  word-break: break-word;
  overflow-x: auto;
  white-space: pre-wrap;
`,Qr=b.I4.div`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  line-height: 1;
`,Gr=b.I4.div`
  display: flex;
  justify-content: space-between;
`,Jr=b.I4.div`
  display: grid;
  grid-auto-flow: column;
  padding-right: ${({theme:e})=>2*e.gridUnit}px;
`,Xr=a.AH`
  &:hover {
    text-decoration: unset;
  }
  span > :first-of-type {
    margin: 0px;
  }
`,Zr=(0,le.a)(),en=({cache:e=!1,csv:t=!0,database:r={},displayLimit:o,height:i,queryId:l,search:c=!0,showSql:m=!1,showSqlInline:p=!1,visualize:f=!0,defaultQueryLimit:y})=>{var v,S,C,E;const _=(0,s.d4)((({user:e})=>e),s.bN),A=(0,s.d4)((({sqlLab:{queries:e}})=>$()(e[l],["id","errorMessage","cached","results","resultsKey","dbId","tab","sql","sqlEditorId","templateParams","schema","rows","queryLimit","limitingFactor","trackingUrl","state","errors","link","ctas","ctas_method","tempSchema","tempTable","isDataPreview","progress","extra"])),s.bN),k=null!=(v=Zr.get("sqleditor.extension.resultTable"))?v:Ir,I=(0,b.DP)(),[D,O]=(0,n.useState)(""),[N,R]=(0,n.useState)([]),[M,j]=(0,n.useState)(!1),[L,Y]=(0,n.useState)(!1),q=(0,g.W6)(),U=(0,s.wA)(),z=we({queryId:l,sqlEditorId:A.sqlEditorId}),B=(0,n.useCallback)((()=>{A.errorMessage&&A.errorMessage.indexOf("session timed out")>0&&U((0,d.reRunQuery)(A))}),[]);(0,n.useEffect)((()=>{B()}),[B]);const W=(e,t)=>{U((0,d.fetchQueryResults)(e,o,t))},V=(0,qe.Z)(A);(0,n.useEffect)((()=>{var t,r;e&&A.cached&&(null==A||null==(t=A.results)||null==(r=t.data)?void 0:r.length)>0&&(R(A.results.data),U((0,d.clearQueryResults)(A))),A.resultsKey&&A.resultsKey!==(null==V?void 0:V.resultsKey)&&W(A)}),[A,e]);const H=e=>{Y(!!e)},K=e=>{O(e.target.value)},Q=async e=>{const{results:t}=A,r=e.metaKey;if(z(x.PV,{}),null!=t&&t.query_id){const e=await(0,Ke.T3)(t.query_id,"query",{...Ve.V0,datasource:`${t.query_id}__query`,all_columns:t.columns.map((e=>e.column_name))}),n=(0,He.eX)(null,{[$e.vX.formDataKey.name]:e});r?window.open(n,"_blank","noreferrer"):q.push(n)}else(0,u.iB)((0,w.t)("Unable to create chart without a query id."))},G=()=>{if(c||f||t){var n;const{results:a,queryLimit:o,limitingFactor:i,rows:l}=A,d=o||a.query.limit,u=Math.min(l||0,(null==a||null==(n=a.data)?void 0:n.length)||0);let{data:m}=A.results;e&&A.cached&&(m=N);const{columns:p}=A.results,g={columns:A.results.columns,name:(null==A?void 0:A.tab)||"Untitled",dbId:null==A?void 0:A.dbId,sql:null==A?void 0:A.sql,templateParams:null==A?void 0:A.templateParams,schema:null==A?void 0:A.schema},y=(0,Dr.L)("can_export_csv","SQLLab",null==_?void 0:_.roles);return(0,h.FD)(Gr,{children:[(0,h.Y)(We.D,{visible:M,onHide:()=>j(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),modalDescription:(0,w.t)("Save this query as a virtual dataset to continue exploring"),datasource:g}),(0,h.FD)(Jr,{children:[f&&(null==r?void 0:r.allows_virtual_table_explore)&&(0,h.Y)(Rr,{database:r,onClick:Q}),t&&y&&(0,h.FD)(de.A,{css:Xr,buttonSize:"small",href:(s=A.id,`/api/v1/sqllab/export/${s}/`),onClick:()=>{z(x.ft,{}),i===Wr.Dropdown&&d===u&&ce.Ay.warning({title:(0,w.t)("Download is on the way"),content:(0,w.t)("Downloading %(rows)s rows based on the LIMIT configuration. If you want the entire result set, you need to adjust the LIMIT.",{rows:u.toLocaleString()})})},children:[(0,h.Y)(F.A.DownloadOutlined,{iconSize:"m",iconColor:I.colors.primary.dark2})," ",(0,w.t)("Download to CSV")]}),y&&(0,h.Y)(tt.A,{text:(0,T.L)(m,p),wrapped:!1,copyNode:(0,h.FD)(de.A,{css:Xr,buttonSize:"small",children:[(0,h.Y)(F.A.CopyOutlined,{iconSize:"s",iconColor:I.colors.primary.dark2})," ",(0,w.t)("Copy to Clipboard")]}),hideTooltip:!0,onCopyEnd:()=>z(x.AI,{})})]}),c&&(0,h.Y)("input",{type:"text",onChange:K,value:D,className:"form-control input-sm",placeholder:(0,w.t)("Filter results")})]})}var s;return(0,h.Y)("div",{})},J=e=>{var r,n;const{results:s,rows:o,queryLimit:i,limitingFactor:l}=A;let c="";const d=null==s?void 0:s.displayLimitReached,u=i||s.query.limit,m=!(null==_||null==(r=_.roles)||!r.Admin),f=Math.min(o||0,(null==s||null==(n=s.data)?void 0:n.length)||0),g={withAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d by the configuration DISPLAY_MAX_ROW. Please add additional limits/filters or download to csv to see more rows up to the %(limit)d limit.",{rows:f,limit:u}),withoutAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d. Please add additional limits/filters, download to csv, or contact an admin to see more rows up to the %(limit)d limit.",{rows:f,limit:u})},v=u===y&&l===Wr.Dropdown;l===Wr.Query&&t?c=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query",{rows:o}):l!==Wr.Dropdown||v?l===Wr.QueryAndDropdown&&(c=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query and limit dropdown.",{rows:o})):c=(0,w.t)("The number of rows displayed is limited to %(rows)d by the limit dropdown.",{rows:o});const b=(0,Ue.gV)()(o),S=`${(0,w.t)("%(rows)d rows returned",{rows:o})}. ${c}`;if(e)return(0,h.FD)(h.FK,{children:[!d&&v&&(0,h.Y)("div",{ref:H,children:(0,h.Y)(be.A,{type:"warning",message:(0,w.t)("%(rows)d rows returned",{rows:o}),onClose:()=>Y(!1),description:(0,w.t)("The number of rows displayed is limited to %(rows)d by the dropdown.",{rows:o})})}),d&&(0,h.Y)("div",{ref:H,children:(0,h.Y)(be.A,{type:"warning",onClose:()=>Y(!1),message:(0,w.t)("%(rows)d rows returned",{rows:f}),description:m?g.withAdmin:g.withoutAdmin})})]});const C=p||!d&&!v;return(0,h.Y)(h.FK,{children:C&&(0,h.Y)(Qr,{children:(0,h.Y)(P.m_,{id:"sqllab-rowcount-tooltip",title:S,placement:"left",children:(0,h.FD)(Ie.Ay,{css:a.AH`
                  line-height: ${I.typography.sizes.l}px;
                `,children:[c&&(0,h.Y)(F.A.ExclamationCircleOutlined,{css:a.AH`
                      font-size: ${I.typography.sizes.m}px;
                      margin-right: ${I.gridUnit}px;
                    `}),(0,w.tn)("%s row","%s rows",o,b)]})})})})},X=null==A||null==(S=A.results)?void 0:S.displayLimitReached;let Z,ee,te,re=A.dbId;if(null!=r&&r.explore_database_id&&(re=r.explore_database_id),A.trackingUrl&&A.state!==ze.kZ.Success&&A.state!==ze.kZ.Fetching&&(ee=(0,h.Y)(de.A,{className:"sql-result-track-job",buttonSize:"small",href:A.trackingUrl,target:"_blank",children:A.state===ze.kZ.Running?(0,w.t)("Track job"):(0,w.t)("See query details")})),m&&(Z=(0,h.Y)(Ur,{sql:A.sql,...p&&{maxLines:1,maxWidth:60}})),A.state===ze.kZ.Stopped)return(0,h.Y)(be.A,{type:"warning",message:(0,w.t)("Query was stopped")});if(A.state===ze.kZ.Failed){var ne;const e=[...(null==(ne=A.extra)?void 0:ne.errors)||[],...A.errors||[]];return(0,h.FD)(Hr,{children:[e.map(((e,t)=>(0,h.Y)(Be.A,{title:(0,w.t)("Database error"),error:e,subtitle:(0,h.Y)(Kr,{children:e.message}),copyText:e.message||void 0,link:A.link,source:"sqllab"},t))),e.some((e=>(null==e?void 0:e.error_type)===ze.eK.FRONTEND_TIMEOUT_ERROR))?(0,h.Y)(de.A,{className:"sql-result-track-job",buttonSize:"small",onClick:()=>W(A,0),children:(0,w.t)("Retry fetching results")}):ee]})}if(A.state===ze.kZ.Success&&A.ctas){const{tempSchema:e,tempTable:t}=A;let r="Table";return A.ctas_method===d.CtasEnum.View&&(r="View"),(0,h.Y)("div",{children:(0,h.Y)(be.A,{type:"info",message:(0,h.FD)(h.FK,{children:[(0,w.t)(r)," [",(0,h.FD)("strong",{children:[e?`${e}.`:"",t]}),"] ",(0,w.t)("was created"),"  ",(0,h.FD)(Ye,{children:[(0,h.Y)(de.A,{buttonSize:"small",css:(0,a.AH)({marginRight:I.gridUnit},"",""),onClick:()=>((e,t)=>{const r={id:(0,Te.Ak)(11),name:t,autorun:!1,dbId:A.dbId,sql:`SELECT * FROM ${e?`${e}.`:""}${t}`};U((0,d.addQueryEditor)(r))})(e,t),children:(0,w.t)("Query in a new tab")}),(0,h.Y)(Nr,{table:t,schema:e,dbId:re})]})]})})})}if(A.state===ze.kZ.Success&&A.results){const{results:t}=A,r=L?i-70:i-(X?0:32);let n;if(e&&A.cached?n=N:null!=t&&t.data&&({data:n}=t),n&&n.length>0){const e=t.expanded_columns?t.expanded_columns.map((e=>e.column_name)):[],s=(0,ve.Gq)(ve.Hh.SqllabIsRenderHtmlEnabled,!0);return(0,h.FD)(Vr,{children:[G(),m&&p?(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:a.AH`
                  display: flex;
                  justify-content: space-between;
                  gap: ${8}px;
                `,children:[(0,h.Y)(Re.A,{css:[a.AH`
                      height: 28px;
                      width: calc(100% - ${108}px);
                      code {
                        width: 100%;
                        overflow: hidden;
                        white-space: nowrap !important;
                        text-overflow: ellipsis;
                        display: block;
                      }
                    `,"",""],children:Z}),J(!1)]}),J(!0)]}):(0,h.FD)(h.FK,{children:[J(!1),J(!0),Z]}),(0,h.Y)(k,{data:n,queryId:A.id,orderedColumnKeys:t.columns.map((e=>e.column_name)),height:r,filterText:D,expandedColumns:e,allowHTML:s})]})}if(n&&0===n.length)return(0,h.Y)(be.A,{type:"warning",message:(0,w.t)("The query returned no data")})}if(A.cached||A.state===ze.kZ.Success&&!A.results){if(A.isDataPreview)return(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"primary",onClick:()=>U((0,d.reFetchQueryResults)({...A,isDataPreview:!0})),children:(0,w.t)("Fetch data preview")});if(A.resultsKey)return(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"primary",onClick:()=>W(A),children:(0,w.t)("Refetch results")})}A.progress>0&&(te=(0,h.Y)(Fe,{percent:parseInt(A.progress.toFixed(0),10),striped:!0}));const se=null!=(C=null==A||null==(E=A.extra)?void 0:E.progress)?C:null;return(0,h.FD)(Hr,{children:[(0,h.Y)("div",{children:!te&&(0,h.Y)(Qe.A,{position:"normal"})}),(0,h.Y)("div",{children:100===A.progress&&(0,h.Y)(Qe.A,{position:"normal"})}),(0,h.Y)(Br,{query:A}),(0,h.Y)("div",{children:se&&(0,h.Y)(be.A,{type:"success",message:se})}),(0,h.Y)("div",{children:100!==A.progress&&te}),ee&&(0,h.Y)("div",{children:ee})]})},tn=(0,n.memo)(en),rn=b.I4.span`
  color: ${({theme:e})=>e.colors.primary.dark1};
  &: hover {
    color: ${({theme:e})=>e.colors.primary.dark2};
  }
`,nn=({children:e=null,className:t="",onClick:r=()=>{},placement:n="top",style:s={},tooltip:a=null})=>{const o=(0,h.Y)(rn,{onClick:r,style:s,className:`IconTooltip ${t}`,children:e});return a?(0,h.Y)(P.m_,{id:"tooltip",title:a,placement:n,mouseEnterDelay:.3,mouseLeaveDelay:.15,children:o}):o},sn=a.AH`
  position: static;
`,an=(a.AH`
  vertical-align: 0em;
  svg {
    height: 0.9em;
  }
`,(0,b.I4)(nn)`
  padding-right: ${({theme:e})=>2*e.gridUnit}px;
  span {
    color: ${({theme:e})=>e.colors.grayscale.base};
    &: hover {
      color: ${({theme:e})=>e.colors.primary.base};
    }
  }
`),on=({columns:e=["started","duration","rows"],queries:t=[],onUserClicked:r=()=>{},onDbClicked:a=()=>{},displayLimit:o,latestQueryId:i})=>{const l=(0,b.DP)(),c=(0,s.wA)(),u={state:(0,w.t)("State"),started:(0,w.t)("Started"),duration:(0,w.t)("Duration"),progress:(0,w.t)("Progress"),rows:(0,w.t)("Rows"),sql:(0,w.t)("SQL"),results:(0,w.t)("Results"),actions:(0,w.t)("Actions")},m=e=>"sql"===e?e.toUpperCase():e.charAt(0).toUpperCase().concat(e.slice(1)),p=(0,n.useMemo)((()=>e.map((e=>({accessor:e,Header:u[e]||m(e),disableSortBy:!0})))),[e]),f=(0,s.d4)((e=>e.user)),g=(0,n.useMemo)((()=>{const e={success:{config:{icon:(0,h.Y)(F.A.CheckOutlined,{iconColor:l.colors.success.base,iconSize:"m"}),label:(0,w.t)("Success")}},failed:{config:{icon:(0,h.Y)(F.A.CloseOutlined,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Failed")}},stopped:{config:{icon:(0,h.Y)(F.A.CloseOutlined,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Failed")}},running:{config:{icon:(0,h.Y)(F.A.LoadingOutlined,{iconColor:l.colors.primary.base,iconSize:"m"}),label:(0,w.t)("Running")}},fetching:{config:{icon:(0,h.Y)(F.A.LoadingOutlined,{iconColor:l.colors.primary.base,iconSize:"m"}),label:(0,w.t)("Fetching")}},timed_out:{config:{icon:(0,h.Y)(F.A.ClockCircleOutlined,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Offline")}},scheduled:{config:{icon:(0,h.Y)(F.A.LoadingOutlined,{iconColor:l.colors.warning.base,iconSize:"m"}),label:(0,w.t)("Scheduled")}},pending:{config:{icon:(0,h.Y)(F.A.LoadingOutlined,{iconColor:l.colors.warning.base,iconSize:"m"}),label:(0,w.t)("Scheduled")}},error:{config:{icon:(0,h.Y)(F.A.Error,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Unknown Status")}},started:{config:{icon:(0,h.Y)(F.A.LoadingOutlined,{iconColor:l.colors.primary.base,iconSize:"m"}),label:(0,w.t)("Started")}}};return t.map((t=>{const{state:n,sql:s,progress:u,...m}=t,p=m,f=e[n]||e.error;return p.endDttm&&(p.duration=(0,h.Y)(Ie.Ay,{monospace:!0,children:(0,Le.RW)(p.startDttm,p.endDttm)})),p.user=(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"link",onClick:()=>r(p.userId),children:p.user}),p.db=(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"link",onClick:()=>a(p.dbId),children:p.db}),p.started=(0,h.Y)(Ie.Ay,{monospace:!0,children:(0,Le.XV)(p.startDttm).format("L HH:mm:ss")}),p.querylink=(0,h.FD)(de.A,{buttonSize:"small",buttonStyle:"link",onClick:()=>(e=>{const t=`/sqllab?queryId=${e}`;window.open(t)})(p.queryId),children:[(0,h.Y)(F.A.Full,{iconSize:"m",iconColor:l.colors.primary.dark1}),(0,w.t)("Edit")]}),p.sql=(0,h.Y)(Re.A,{css:[sn,"",""],children:(0,h.Y)(Ur,{sql:s,rawSql:p.executedSql,shrink:!0,maxWidth:60})}),p.resultsKey?p.results=(0,h.Y)(xe.A,{className:"ResultsModal",triggerNode:(0,h.Y)(de.A,{buttonSize:"xsmall",buttonStyle:"tertiary",children:(0,w.t)("View")}),modalTitle:(0,w.t)("Data preview"),beforeOpen:()=>((e,t)=>{c((0,d.fetchQueryResults)(e,t))})(t,o),onExit:()=>c((0,d.clearQueryResults)(t)),modalBody:(0,h.Y)(tn,{showSql:!0,queryId:t.id,height:400,displayLimit:o,defaultQueryLimit:1e3}),responsive:!0}):p.results=(0,h.Y)(h.FK,{}),p.progress="success"===n?(0,h.Y)(Fe,{percent:parseInt(u.toFixed(0),10),striped:!0,showInfo:!1}):(0,h.Y)(Fe,{percent:parseInt(u.toFixed(0),10),striped:!0}),p.state=(0,h.Y)(P.m_,{title:f.config.label,children:f.config.icon}),p.actions=(0,h.FD)("div",{children:[(0,h.Y)(an,{onClick:()=>(e=>{c((0,d.queryEditorSetSql)({id:e.sqlEditorId},e.sql,e.id))})(t),tooltip:(0,w.t)("Overwrite text in the editor with a query on this table"),placement:"top",className:"pointer",children:(0,h.Y)(F.A.EditOutlined,{iconSize:"l"})}),(0,h.Y)(an,{onClick:()=>(e=>{c((0,d.cloneQueryToNewTab)(e,!0))})(t),tooltip:(0,w.t)("Run query in a new tab"),placement:"top",className:"pointer",children:(0,h.Y)(F.A.PlusCircleOutlined,{iconSize:"l"})}),p.id!==i&&(0,h.Y)(an,{tooltip:(0,w.t)("Remove query from log"),onClick:()=>c((0,d.removeQuery)(t)),className:"pointer",children:(0,h.Y)(F.A.DeleteOutlined,{iconSize:"l"})})]}),p})).reverse()}),[t,r,a,f,o]);return(0,h.Y)("div",{className:"QueryTable",children:(0,h.Y)(je.A,{columns:p,data:g,className:"table-condensed",pageSize:50})})},ln=e=>({queryId:e.id,id:e.client_id,dbId:e.database.id,db:e.database,executedSql:e.executed_sql,errorMessage:e.error_message,queryLimit:e.limit,ctas:e.select_as_cta,limitingFactor:e.limiting_factor,progress:e.progress,rows:e.rows,schema:e.schema,sql:e.sql,sqlEditorId:e.sql_editor_id,state:e.status,tab:e.tab_name,startDttm:Number(e.start_time),endDttm:Number(e.end_time),tempTable:e.tmp_table_name||"",trackingUrl:e.tracking_url,resultsKey:e.results_key,userId:e.user.id,cached:!1,extra:{progress:null},isDataPreview:!1,user:e.user}),cn=i.F.injectEndpoints({endpoints:e=>({editorQueries:e.query({providesTags:["EditorQueries"],query:({editorId:e,pageIndex:t=0,pageSize:r=25})=>({method:"GET",endpoint:"/api/v1/query/",urlParams:{keys:["none"],columns:["id","client_id","changed_on","database.id","database.database_name","executed_sql","error_message","limit","limiting_factor","progress","rows","select_as_cta","schema","sql","sql_editor_id","status","tab_name","user.first_name","user.id","user.last_name","start_time","end_time","tmp_table_name","tmp_schema_name","tracking_url","results_key"],order_column:"start_time",order_direction:"desc",page:t,page_size:r,filters:[{col:"sql_editor_id",opr:"eq",value:e}]},headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>({...e,result:e.result.map(ln)})}),serializeQueryArgs:({queryArgs:{editorId:e}})=>({editorId:e}),forceRefetch:({currentArg:e,previousArg:t})=>e!==t,merge:(e,t)=>{e.result.push(...t.result)}})})}),{useEditorQueriesQuery:dn}=cn,un=b.I4.div`
  height: 100%;
  .antd5-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,hn=(e,t)=>Object.values(e).filter((({sqlEditorId:e})=>String(e)===String(t))),mn=({queryEditorId:e,displayLimit:t,latestQueryId:r})=>{const[i,l]=(0,Ne.Wx)({threshold:0}),[c,d]=(0,n.useState)(0),u=(0,s.d4)((({sqlLab:{queries:e}})=>e),s.bN),{currentData:m,isLoading:p,isFetching:f}=dn({editorId:`${e}`,pageIndex:c},{skip:!(0,o.G7)(o.TO.SqllabBackendPersistence)}),g=(0,n.useMemo)((()=>m?hn(Oe()(u,m.result.map((({id:e})=>e))),e).concat(m.result).reverse():hn(u,e)),[u,m,e]),y=(0,U.A)((()=>{d(c+1)})),v=(null==m?void 0:m.result.length)||0,b=(null==m?void 0:m.count)||0;return(0,n.useEffect)((()=>{l&&v<b&&y()}),[l,y,v,b]),!g.length&&p?(0,h.Y)(pe.EA,{active:!0}):g.length>0?(0,h.FD)(h.FK,{children:[(0,h.Y)(on,{columns:["state","started","duration","progress","rows","sql","results","actions"],queries:g,displayLimit:t,latestQueryId:r}),m&&v<b&&(0,h.Y)("div",{ref:i,css:a.AH`
            position: relative;
            top: -150px;
          `}),f&&(0,h.Y)(pe.EA,{active:!0})]}):(0,h.Y)(un,{children:(0,h.Y)(I.p,{title:(0,w.t)("Run a query to display query history"),size:"medium",image:"document.svg"})})},pn=b.I4.div`
  height: 100%;
  .antd5-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,fn=({latestQueryId:e,height:t,displayLimit:r,defaultQueryLimit:n})=>{const a=(0,s.d4)((({sqlLab:{databases:e}})=>e),s.bN),i=(0,s.d4)((({sqlLab:{queries:t}})=>t[e||""]),s.bN);return!i||Date.now()-i.startDttm>S.Ml?(0,h.Y)(pn,{children:(0,h.Y)(I.p,{title:(0,w.t)("Run a query to display results"),image:"document.svg"})}):!(0,o.G7)(o.TO.SqllabBackendPersistence)||"success"!==i.state||i.resultsKey||i.results?(0,h.Y)(tn,{search:!0,queryId:i.id,height:t+8,database:a[i.dbId],displayLimit:r,defaultQueryLimit:n,showSql:!0,showSqlInline:!0}):(0,h.Y)(be.A,{type:"warning",message:(0,w.t)("No stored results found, you need to re-run your query")})};var gn=r(16784),yn=r(70713),vn=r(71478);function bn({tooltipText:e,title:t,sql:r,triggerNode:n}){return(0,h.Y)(xe.A,{modalTitle:t,triggerNode:n||(0,h.Y)(nn,{className:"pull-left m-l-2",tooltip:e,children:(0,h.Y)(F.A.EyeOutlined,{iconSize:"s"})}),modalBody:(0,h.Y)("div",{children:(0,h.Y)(Mr.A,{language:"sql",style:jr.A,children:r})})})}Mr.A.registerLanguage("sql",Fr.A);const wn=(0,le.a)(),Sn=["column_name","column_type","keys","comment"],Cn=[{key:"refresh-table",label:(0,w.t)("Refresh table schema"),icon:(0,h.Y)(F.A.SyncOutlined,{iconSize:"s","aria-hidden":!0})},{key:"copy-select-statement",label:(0,w.t)("Copy SELECT statement"),icon:(0,h.Y)(F.A.CopyOutlined,{iconSize:"s","aria-hidden":!0})},{key:"show-create-view-statement",label:(0,w.t)("Show CREATE VIEW statement"),icon:(0,h.Y)(F.A.EyeOutlined,{iconSize:"s","aria-hidden":!0})}],xn=b.I4.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  column-gap: ${({theme:e})=>e.gridUnit}px;
  font-size: ${({theme:e})=>e.typography.sizes.l}px;
  font-weight: ${({theme:e})=>e.typography.weights.bold};
`,En=e=>{if(!e)return null;const{partitionQuery:t}=e;let r;if(t){const e=(0,w.t)("Copy partition query to clipboard");r=(0,h.Y)(tt.A,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,h.Y)(F.A.CopyOutlined,{iconSize:"s"})})}const n=Object.entries(e.latest||[]).map((([e,t])=>`${e}=${t}`)).join("/");return(0,h.Y)(Re.A,{size:"small",children:(0,h.FD)("div",{children:[(0,h.FD)("small",{children:[(0,w.t)("latest partition:")," ",n]})," ",r]})})},$n=({dbId:e,catalog:t,schema:r,tableName:o})=>{var i,l;const c=(0,s.wA)(),[u,m,p]=(0,s.d4)((({sqlLab:{databases:t}})=>{var r,n,s;return[null==(r=t[e])?void 0:r.database_name,null==(n=t[e])?void 0:n.backend,null==(s=t[e])?void 0:s.disable_data_preview]}),s.bN),f=(0,n.useRef)(null),g=(0,n.useRef)(null),[y,v]=(0,n.useState)(),{currentData:b,isLoading:S,isFetching:C,isError:x,error:E}=(0,vn.rq)({dbId:e,catalog:t,schema:null!=r?r:"",table:null!=o?o:""},{skip:!e||!r||!o}),{currentData:$,error:A}=(0,vn.ii)({dbId:e,catalog:t,schema:null!=r?r:"",table:null!=o?o:""},{skip:!e||!r||!o}),k=(0,n.useMemo)((()=>{var e;return(null!=(e=null==b?void 0:b.columns.length)?e:0)>0?null==b?void 0:b.columns.map((({name:e,type:t,longType:r,keys:n,comment:s})=>({column_name:e,column_type:r||t,keys:n,comment:s}))):void 0}),[b]),P=(0,n.useMemo)((()=>null==k?void 0:k.some((({keys:e})=>Boolean(null==e?void 0:e.length)))),[k]),T=(0,n.useMemo)((()=>P?Sn:Sn.filter((e=>"keys"!==e))),[P]),I={dataPreviewQueryId:y,...b,...$},D=null!=(i=wn.get("sqleditor.extension.resultTable"))?i:Ir,O=null!=(l=wn.get("sqleditor.extension.tablePreview"))?l:[],N=(0,n.useCallback)((n=>{if("sample"===n&&!y){const n=(0,Te.Ak)(11);c((0,d.runTablePreviewQuery)({previewQueryId:n,dbId:e,catalog:t,schema:r,name:o,selectStar:I.selectStar},!0)),v(n)}}),[y,e,t,r,o,I.selectStar,c]),R=(0,n.useMemo)((()=>{let e=[...Cn];return I.selectStar||(e=e.filter((({key:e})=>"copy-select-statement"!==e))),I.view||(e=e.filter((({key:e})=>"show-create-view-statement"!==e))),e}),[I.view,I.selectStar]);return S?(0,h.Y)(pe.EA,{active:!0}):x||A?(0,h.Y)(be.A,{type:"warning",message:null==(M=E||A)?void 0:M.error}):k?(0,h.FD)("div",{css:a.AH`
        height: 100%;
        display: flex;
        flex-direction: column;
      `,children:[(0,h.FD)(pe.BD,{separator:">",children:[(0,h.Y)(pe.BD.Item,{children:m}),(0,h.Y)(pe.BD.Item,{children:u}),t&&(0,h.Y)(pe.BD.Item,{children:t}),r&&(0,h.Y)(pe.BD.Item,{children:r}),(0,h.Y)(pe.BD.Item,{children:" "})]}),(0,h.FD)("div",{style:{display:"none"},children:[(0,h.Y)(tt.A,{copyNode:(0,h.Y)("button",{type:"button",ref:f,children:"invisible button"}),text:I.selectStar,shouldShowText:!1}),I.view&&(0,h.Y)(bn,{sql:I.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement"),triggerNode:(0,h.Y)("button",{type:"button",ref:g,children:"invisible button"})})]}),(0,h.FD)(xn,{children:[(0,h.Y)(F.A.InsertRowAboveOutlined,{iconSize:"l"}),o,(0,h.Y)(me.ms,{dropdownRender:()=>(0,h.Y)(ye.W1,{onClick:({key:e})=>{var t,r;"refresh-table"===e&&c(vn.z7.invalidateTags([{type:"TableMetadatas",id:o}])),"copy-select-statement"===e&&(null==(t=f.current)||t.click()),"show-create-view-statement"===e&&(null==(r=g.current)||r.click())},items:R}),trigger:["click"],children:(0,h.Y)(pe.$n,{buttonSize:"xsmall",type:"link",children:(0,h.Y)(F.A.DownSquareOutlined,{iconSize:"m",style:{marginTop:2,marginLeft:4},"aria-label":(0,w.t)("Table actions")})})})]}),C?(0,h.Y)(pe.EA,{active:!0}):(0,h.FD)(h.FK,{children:[I.comment&&(0,h.Y)(gn.A,{source:I.comment}),En(I.partitions),(0,h.Y)("div",{css:a.AH`
              flex: 1 1 auto;
            `,children:(0,h.Y)(yn.Ay,{disableWidth:!0,children:({height:t})=>(0,h.FD)(_.Ay,{fullWidth:!1,onTabClick:N,css:a.AH`
                    height: ${t}px;
                  `,children:[(0,h.Y)(_.Ay.TabPane,{tab:(0,w.t)("Columns (%s)",k.length),children:(0,h.Y)(D,{queryId:"table-columns",height:t-80,data:k,orderedColumnKeys:T})},"columns"),(null==I?void 0:I.selectStar)&&!p&&(0,h.Y)(_.Ay.TabPane,{tab:(0,w.t)("Data preview"),children:y&&(0,h.Y)(tn,{queryId:y,visualize:!1,csv:!1,cache:!0,height:t-80-30,displayLimit:100,defaultQueryLimit:100})},"sample"),(null==I?void 0:I.indexes)&&I.indexes.length>0&&(0,h.Y)(_.Ay.TabPane,{tab:(0,w.t)("Indexes (%s)",I.indexes.length),children:I.indexes.map(((e,t)=>(0,h.Y)("pre",{className:"code",children:JSON.stringify(e,null,"  ")},t)))},"indexes"),(null==I?void 0:I.metadata)&&(0,h.Y)(_.Ay.TabPane,{tab:(0,w.t)("Metadata"),children:(0,h.Y)(D,{queryId:"table-metadata",height:t-80,data:Object.entries(I.metadata).map((([e,t])=>({name:e,value:t}))),orderedColumnKeys:["name","value"]})},"metadata"),O.map((([t,n])=>(0,h.Y)(_.Ay.TabPane,{tab:t,children:(0,h.Y)(n,{dbId:Number(e),schema:null!=r?r:"",tableName:o})},t)))]})})})]})]}):(0,h.Y)(be.A,{type:"warning",message:(0,w.t)("Cannot find the table (%s) metadata.",o),closable:!1});var M},_n=b.I4.div`
  width: 100%;
  height: ${e=>e.height}px;
  .ant-tabs .ant-tabs-content-holder {
    overflow: visible;
  }
  .SouthPaneTabs {
    height: 100%;
    display: flex;
    flex-direction: column;
    .scrollable {
      overflow-y: auto;
    }
  }
  .ant-tabs-tabpane {
    .scrollable {
      overflow-y: auto;
    }
  }
  .tab-content {
    .alert {
      margin-top: ${({theme:e})=>2*e.gridUnit}px;
    }

    button.fetch {
      margin-top: ${({theme:e})=>2*e.gridUnit}px;
    }
  }
`,An=({queryEditorId:e,latestQueryId:t,height:r,displayLimit:o,defaultQueryLimit:i})=>{var l;const c=(0,b.DP)(),u=(0,s.wA)(),{offline:m,tables:p}=(0,s.d4)((({sqlLab:{offline:e,tables:t}})=>({offline:e,tables:t})),s.bN),f=null!=(l=(0,s.d4)((e=>e.sqlLab.activeSouthPaneTab)))?l:"Results",g=(0,n.useMemo)((()=>p.filter((({queryEditorId:t})=>String(e)===t))),[e,p]),y=(0,n.useMemo)((()=>Object.fromEntries(g.map((({id:e,dbId:t,catalog:r,schema:n,name:s})=>[e,[t,r,n,s].join(":")])))),[g]),v=r-130,C=(0,n.createRef)(),x=(0,n.useCallback)(((e,t)=>{if("remove"===t){const t=g.find((({dbId:t,catalog:r,schema:n,name:s})=>[t,r,n,s].join(":")===e));u((0,d.removeTables)([t]))}}),[u,g]);return m?(0,h.Y)(Ie.Ay,{className:"m-r-3",type:S.sA[S.yZ.offline],children:S.W8.offline}):(0,h.Y)(_n,{className:"SouthPane",height:r,ref:C,children:(0,h.FD)(_.Ay,{type:"editable-card",activeKey:y[f]||f,className:"SouthPaneTabs",onChange:e=>{u((0,d.setActiveSouthPaneTab)(e))},id:(0,Te.Ak)(11),fullWidth:!1,animated:!1,onEdit:x,hideAdd:!0,children:[(0,h.Y)(_.Ay.TabPane,{tab:(0,w.t)("Results"),closable:!1,children:(0,h.Y)(fn,{height:v,latestQueryId:t,displayLimit:o,defaultQueryLimit:i})},"Results"),(0,h.Y)(_.Ay.TabPane,{tab:(0,w.t)("Query history"),closable:!1,children:(0,h.Y)(mn,{queryEditorId:e,displayLimit:o,latestQueryId:t})},"History"),g.map((({id:e,dbId:t,catalog:r,schema:n,name:s})=>(0,h.Y)(_.Ay.TabPane,{tab:(0,h.FD)(h.FK,{children:[(0,h.Y)(F.A.InsertRowAboveOutlined,{iconSize:"l",css:a.AH`
                    margin-bottom: ${.5*c.gridUnit}px;
                    margin-right: ${c.gridUnit}px;
                  `}),`${n}.${decodeURIComponent(s)}`]}),children:(0,h.Y)($n,{dbId:t,catalog:r,schema:n,tableName:s})},y[e])))]})})};var kn=r(40563),Pn=r(20249),Tn=r.n(Pn),In=r(45572);const Dn=({dropdownRender:e,tooltip:t,tooltipPlacement:r,children:n,...s})=>{const o=(0,b.DP)(),{type:i}=s,l=a.AH`
    ${(!i||"default"===i)&&`.antd5-dropdown-trigger {\n      position: relative;\n      &:before {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 1px;\n        height: 100%;\n        background-color: ${o.colors.grayscale.light2};\n      }\n      .anticon {\n        vertical-align: middle;\n      }\n    }`}
  `,c=(0,h.Y)(In.A.Button,{dropdownRender:e,...s,css:[l,a.AH`
          .antd5-btn {
            height: 30px;
            box-shadow: none;
            font-size: ${o.typography.sizes.s}px;
            font-weight: ${o.typography.weights.bold};
          }
        `,"",""],children:n});return t?(0,h.Y)(P.m_,{placement:r,id:`${Tn()(t)}-tooltip`,title:t,children:c}):c},On=({setShowSave:e,overlayMenu:t})=>{const r=(0,b.DP)();return t?(0,h.Y)(Dn,{onClick:()=>e(!0),dropdownRender:()=>t,icon:(0,h.Y)(F.A.DownOutlined,{iconSize:"xs",iconColor:r.colors.primary.dark2}),trigger:["click"],children:(0,w.t)("Save")}):(0,h.Y)(de.A,{onClick:()=>e(!0),buttonStyle:"primary",children:(0,w.t)("Save")})};var Nn=r(9066);const Rn=b.I4.span`
  span[role='img']:not([aria-label='down']) {
    display: flex;
    margin: 0;
    color: ${({theme:e})=>e.colors.grayscale.base};
    svg {
      vertical-align: -${({theme:e})=>1.25*e.gridUnit}px;
      margin: 0;
    }
  }
`,Mn=({queryEditorId:e,onSave:t=()=>{},onUpdate:r,saveQueryWarning:s,database:a,columns:o})=>{const i=_e(e,["autorun","name","description","remoteId","dbId","latestQueryId","queryLimit","catalog","schema","selectedText","sql","templateParams"]),l=(0,n.useMemo)((()=>({...i,columns:o})),[i,o]),c=we({queryEditorId:e}),d=l.name||l.description||(0,w.t)("Undefined"),[u,m]=(0,n.useState)(l.description||""),[p,f]=(0,n.useState)(d),[g,y]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!1),S=!!l.remoteId,C=!(null==a||!a.allows_virtual_table_explore),E=void 0!==(null==a?void 0:a.allows_virtual_table_explore),$=(0,h.Y)(ye.W1,{children:(0,h.Y)(ye.W1.Item,{onClick:()=>{c(x.PV,{}),b(!0)},children:(0,w.t)("Save dataset")})}),_=()=>{var e;return{name:p,description:u,dbId:null!=(e=l.dbId)?e:0,sql:l.sql,catalog:l.catalog,schema:l.schema,templateParams:l.templateParams,remoteId:(null==l?void 0:l.remoteId)||void 0}};(0,n.useEffect)((()=>{S||f(d)}),[d]);const A=()=>y(!1),k=()=>{c(x.AP,{}),t(_(),l.id),A()};return(0,h.FD)(Rn,{className:"SaveQuery",children:[E&&(0,h.Y)(On,{setShowSave:y,overlayMenu:C?$:null}),(0,h.Y)(We.D,{visible:v,onHide:()=>b(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),datasource:(0,Nn.l)(l)}),(0,h.Y)(ce.Ay,{className:"save-query-modal",onHandledPrimaryAction:k,onHide:A,primaryButtonName:S?(0,w.t)("Save"):(0,w.t)("Save as"),width:"620px",show:g,title:(0,h.Y)("h4",{children:(0,w.t)("Save query")}),footer:(0,h.FD)(h.FK,{children:[(0,h.Y)(de.A,{onClick:A,cta:!0,children:(0,w.t)("Cancel")}),(0,h.Y)(de.A,{buttonStyle:S?void 0:"primary",onClick:k,className:"m-r-3",cta:!0,children:S?(0,w.t)("Save as new"):(0,w.t)("Save")}),S&&(0,h.Y)(de.A,{buttonStyle:"primary",onClick:()=>{r(_(),l.id),A()},className:"m-r-3",cta:!0,children:(0,w.t)("Update")})]}),children:(0,h.FD)(kn.lV,{layout:"vertical",children:[(0,h.Y)(pe.fI,{children:(0,h.Y)(pe.fv,{xs:24,children:(0,h.Y)(kn.eI,{label:(0,w.t)("Name"),children:(0,h.Y)(ge.pd,{type:"text",value:p,onChange:e=>{f(e.target.value)}})})})}),(0,h.Y)("br",{}),(0,h.Y)(pe.fI,{children:(0,h.Y)(pe.fv,{xs:24,children:(0,h.Y)(kn.eI,{label:(0,w.t)("Description"),children:(0,h.Y)(ge.fs,{rows:4,value:u,onChange:e=>{m(e.target.value)}})})})}),s&&(0,h.FD)(h.FK,{children:[(0,h.Y)("br",{}),(0,h.FD)("div",{children:[(0,h.Y)(pe.fI,{children:(0,h.Y)(pe.fv,{xs:24,children:(0,h.Y)("small",{children:s})})}),(0,h.Y)("br",{})]})]})]})})]})};var Fn=r(74848);function jn(e){return!("object"!=typeof e||null===e||"number"==typeof e.lastModified&&"undefined"!=typeof File&&e instanceof File||"function"==typeof e.getMonth&&"undefined"!=typeof Date&&e instanceof Date||Array.isArray(e))}function Ln(e){if(""===e)return;if(null===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;if(/\.\d*0$/.test(e))return e;const t=Number(e);return"number"!=typeof t||Number.isNaN(t)?e:t}const Yn="__additional_property",qn="additionalProperties",Un="allOf",zn="anyOf",Bn="const",Wn="dependencies",Vn="__errors",Hn="$id",Kn="items",Qn="$name",Gn="oneOf",Jn="properties",Xn="submitButtonOptions",Zn="$ref",es="__rjsf_additionalProperties",ts="__rjsf_rootSchema",rs="ui:widget",ns="ui:options";function ss(e={},t={}){return Object.keys(e).filter((e=>0===e.indexOf("ui:"))).reduce(((t,r)=>{const n=e[r];return r===rs&&jn(n)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),t):r===ns&&jn(n)?{...t,...n}:{...t,[r.substring(3)]:n}}),{...t})}function as(e,t={},r){if(!e.additionalProperties)return!1;const{expandable:n=!0}=ss(t);return!1===n?n:void 0===e.maxProperties||!r||Object.keys(r).length<e.maxProperties}var os=r(11331),is=r.n(os);function ls(e){const t={[Vn]:[],addError(e){this[Vn].push(e)}};if(Array.isArray(e))return e.reduce(((e,t,r)=>({...e,[r]:ls(t)})),t);if(is()(e)){const r=e;return Object.keys(r).reduce(((e,t)=>({...e,[t]:ls(r[t])})),t)}return t}var cs=r(29132),ds=r.n(cs);function us(e,t){return ds()(e,t,((e,t)=>{if("function"==typeof e&&"function"==typeof t)return!0}))}var hs=r(58156),ms=r.n(hs),ps=r(56239);function fs(e,t){const r=t[e];return[Oe()(t,[e]),r]}function gs(e,t={},r=[]){const n=e||"";let s;if(!n.startsWith("#"))throw new Error(`Could not find a definition for ${e}.`);s=decodeURIComponent(n.substring(1));const a=ps.get(t,s);if(void 0===a)throw new Error(`Could not find a definition for ${e}.`);const o=a[Zn];if(o){if(r.includes(o)){if(1===r.length)throw new Error(`Definition for ${e} is a circular reference`);const[t,...s]=r,a=[...s,n,t].join(" -> ");throw new Error(`Definition for ${t} contains a circular reference through ${a}`)}const[s,i]=fs(Zn,a),l=gs(i,t,[...r,n]);return Object.keys(s).length>0?{...s,...l}:l}return a}function ys(e,t={}){return gs(e,t,[])}var vs=r(61448),bs=r.n(vs),ws=r(98023),Ss=r.n(ws),Cs=r(23805),xs=r.n(Cs),Es=r(85015),$s=r.n(Es),_s=r(40860),As=r.n(_s),ks=r(6638),Ps=r.n(ks);function Ts(e,t,r){var n;if(e&&r){const s=ms()(e,r);if(void 0===s)return;for(let e=0;e<t.length;e++){const a=t[e],o=ms()(a,[Jn,r],{});if("object"!==o.type&&"array"!==o.type){if(o.const===s)return e;if(null===(n=o.enum)||void 0===n?void 0:n.includes(s))return e}}}}function Is(e,t,r,n,s){if(void 0===t)return 0;const a=Ts(t,r,s);if(Ss()(a))return a;for(let a=0;a<r.length;a++){const o=r[a];if(s&&bs()(o,[Jn,s])){const r=ms()(t,s),i=ms()(o,[Jn,s],{});if(e.isValid(i,r,n))return a}else if(o[Jn]){const r={anyOf:Object.keys(o[Jn]).map((e=>({required:[e]})))};let s;if(o.anyOf){const{...e}=o;e.allOf?e.allOf=e.allOf.slice():e.allOf=[],e.allOf.push(r),s=e}else s=Object.assign({},o,r);if(delete s.required,e.isValid(s,t,n))return a}else if(e.isValid(o,t,n))return a}return 0}function Ds(e,t,r,n,s){return Is(e,t,r,n,s)}var Os=r(63560),Ns=r.n(Os),Rs=r(69752),Ms=r.n(Rs),Fs=r(55364),js=r.n(Fs),Ls=r(80795),Ys=r.n(Ls),qs=r(63375),Us=r.n(qs),zs=r(33978),Bs=r.n(zs);function Ws(e){let t;const r=ms()(e,"discriminator.propertyName",void 0);return $s()(r)?t=r:void 0!==r&&console.warn(`Expecting discriminator to be a string, got "${typeof r}" instead`),t}function Vs(e){return Array.isArray(e)?"array":"string"==typeof e?"string":null==e?"null":"boolean"==typeof e?"boolean":isNaN(e)?"object"==typeof e?"object":"string":"number"}var Hs=r(80299),Ks=r.n(Hs);function Qs(e){let{type:t}=e;return!t&&e.const?Vs(e.const):!t&&e.enum?"string":t||!e.properties&&!e.additionalProperties?(Array.isArray(t)&&(t=2===t.length&&t.includes("null")?t.find((e=>"null"!==e)):t[0]),t):"object"}function Gs(e,t){const r=Object.assign({},e);return Object.keys(t).reduce(((r,n)=>{const s=e?e[n]:{},a=t[n];return e&&n in e&&jn(a)?r[n]=Gs(s,a):e&&t&&("object"===Qs(e)||"object"===Qs(t))&&"required"===n&&Array.isArray(s)&&Array.isArray(a)?r[n]=Ks()(s,a):r[n]=a,r}),r)}function Js(e,t,r={},n,s){return ta(e,t,r,n,void 0,void 0,s)[0]}function Xs(e){const t=e.reduce(((e,t)=>t.length>1?t.flatMap((t=>Ps()(e.length,(r=>[...e[r]].concat(t))))):(e.forEach((e=>e.push(t[0]))),e)),[[]]);return t}function Zs(e,t,r,n,s,a,o){const i=ea(t,r,s);return i!==t?ta(e,i,r,a,n,s,o):[t]}function ea(e,t,r){if(!jn(e))return e;let n=e;if(Zn in n){const{$ref:e,...s}=n;if(r.includes(e))return n;r.push(e),n={...ys(e,t),...s}}if(Jn in n){const e=[],s=Ms()(n[Jn],((n,s,a)=>{const o=[...r];n[a]=ea(s,t,o),e.push(o)}),{});js()(r,Us()(Ys()(e))),n={...n,[Jn]:s}}return Kn in n&&!Array.isArray(n.items)&&"boolean"!=typeof n.items&&(n={...n,items:ea(n.items,t,r)}),us(e,n)?e:n}function ta(e,t,r,n,s=!1,a=[],o){if(!jn(t))return[{}];const i=function(e,t,r,n,s,a,o){const i=Zs(e,t,r,n,s,a);return i.length>1||i[0]!==t?i:Wn in t?ra(e,t,r,n,s,a).flatMap((t=>ta(e,t,r,a,n,s,o))):Un in t&&Array.isArray(t.allOf)?Xs(t.allOf.map((t=>ta(e,t,r,a,n,s,o)))).map((e=>({...t,allOf:e}))):[t]}(e,t,r,s,a,n,o);return i.flatMap((t=>{var i;let l=t;if("if"in l)return function(e,t,r,n,s,a,o){const{if:i,then:l,else:c,...d}=t,u=e.isValid(i,a||{},r);let h=[d],m=[];if(n)l&&"boolean"!=typeof l&&(m=m.concat(ta(e,l,r,a,n,s,o))),c&&"boolean"!=typeof c&&(m=m.concat(ta(e,c,r,a,n,s,o)));else{const t=u?l:c;t&&"boolean"!=typeof t&&(m=m.concat(ta(e,t,r,a,n,s,o)))}return m.length&&(h=m.map((e=>Gs(d,e)))),h.flatMap((t=>ta(e,t,r,a,n,s,o)))}(e,l,r,s,a,n,o);if(Un in l){if(s){const{allOf:e,...t}=l;return[...e,t]}try{const e=[],t=[];null===(i=l.allOf)||void 0===i||i.forEach((r=>{"object"==typeof r&&r.contains?e.push(r):t.push(r)})),e.length&&(l={...l,allOf:t}),l=o?o(l):Bs()(l,{deep:!1}),e.length&&(l.allOf=e)}catch(e){console.warn("could not merge subschemas in allOf:\n",e);const{allOf:t,...r}=l;return r}}return qn in l&&!1!==l.additionalProperties?function(e,t,r,n,s){const a={...t,properties:{...t.properties}},o=n&&jn(n)?n:{};return Object.keys(o).forEach((t=>{if(t in a.properties)return;let n={};n="boolean"!=typeof a.additionalProperties?Zn in a.additionalProperties?Js(e,{$ref:ms()(a.additionalProperties,[Zn])},r,o,s):"type"in a.additionalProperties?{...a.additionalProperties}:zn in a.additionalProperties||Gn in a.additionalProperties?{type:"object",...a.additionalProperties}:{type:Vs(ms()(o,[t]))}:{type:Vs(ms()(o,[t]))},a.properties[t]=n,Ns()(a.properties,[t,Yn],!0)})),a}(e,l,r,n,o):l}))}function ra(e,t,r,n,s,a,o){const{dependencies:i,...l}=t,c=function(e,t,r,n,s){let a;const{oneOf:o,anyOf:i,...l}=t;if(Array.isArray(o)?a=o:Array.isArray(i)&&(a=i),a){const o=void 0===s&&n?{}:s,i=Ws(t);a=a.map((e=>ea(e,r,[])));const c=Ds(e,o,a,r,i);if(n)return a.map((e=>Gs(l,e)));t=Gs(l,a[c])}return[t]}(e,l,r,n,a);return c.flatMap((t=>na(e,i,t,r,n,s,a,o)))}function na(e,t,r,n,s,a,o,i){let l=[r];for(const c in t){if(!s&&void 0===ms()(o,[c]))continue;if(r.properties&&!(c in r.properties))continue;const[d,u]=fs(c,t);return Array.isArray(u)?l[0]=sa(r,u):jn(u)&&(l=aa(e,r,n,c,u,s,a,o,i)),l.flatMap((t=>na(e,d,t,n,s,a,o,i)))}return l}function sa(e,t){if(!t)return e;const r=Array.isArray(e.required)?Array.from(new Set([...e.required,...t])):t;return{...e,required:r}}function aa(e,t,r,n,s,a,o,i,l){return ta(e,s,r,i,a,o,l).flatMap((s=>{const{oneOf:c,...d}=s;return t=Gs(t,d),void 0===c?t:Xs(c.map((t=>"boolean"!=typeof t&&Zn in t?Zs(e,t,r,a,o,i):[t]))).flatMap((s=>function(e,t,r,n,s,a,o,i,l){const c=s.filter((t=>{if("boolean"==typeof t||!t||!t.properties)return!1;const{[n]:s}=t.properties;if(s){const t={type:"object",properties:{[n]:s}};return e.isValid(t,i,r)||a}return!1}));return a||1===c.length?c.flatMap((s=>{const c=s,[d]=fs(n,c.properties),u={...c,properties:d};return ta(e,u,r,i,a,o,l).map((e=>Gs(t,e)))})):(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[t])}(e,t,r,n,s,a,o,i,l)))}))}const oa={type:"object",$id:"_$junk_option_schema_id$_",properties:{__not_really_there__:{type:"number"}}};function ia(e,t,r,n,s){let a=0;return r&&(xs()(r.properties)?a+=As()(r.properties,((r,a,o)=>{const i=ms()(n,o);if("boolean"==typeof a)return r;if(bs()(a,Zn)){const n=Js(e,a,t,i,s);return r+ia(e,t,n,i||{},s)}if((bs()(a,Gn)||bs()(a,zn))&&i){const n=bs()(a,Gn)?Gn:zn,o=Ws(a);return r+la(e,t,i,ms()(a,n),-1,o,s)}if("object"===a.type)return xs()(i)&&(r+=1),r+ia(e,t,a,i,s);if(a.type===Vs(i)){let e=r+1;return a.default?e+=i===a.default?1:-1:a.const&&(e+=i===a.const?1:-1),e}return r}),0):$s()(r.type)&&r.type===Vs(n)&&(a+=1)),a}function la(e,t,r,n,s=-1,a,o){const i=n.map((e=>ea(e,t,[]))),l=Ts(r,n,a);if(Ss()(l))return l;const c=i.reduce(((n,s,o)=>(1===Ds(e,r,[oa,s],t,a)&&n.push(o),n)),[]);if(1===c.length)return c[0];c.length||Ps()(i.length,(e=>c.push(e)));const d=new Set,{bestIndex:u}=c.reduce(((n,s)=>{const{bestScore:a}=n,l=i[s],c=ia(e,t,l,r,o);return d.add(c),c>a?{bestIndex:s,bestScore:c}:n}),{bestIndex:s,bestScore:0});return 1===d.size&&s>=0?s:u}function ca(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every((e=>jn(e)))}var da=r(69843),ua=r.n(da);function ha(e,t,r=!1,n=!1,s=!1){if(Array.isArray(t)){const a=Array.isArray(e)?e:[],o=s?t:a,i=(s?a:t).map(((e,i)=>void 0!==o[i]?ha(a[i],t[i],r,n,s):e));return(r||s)&&i.length<o.length&&i.push(...o.slice(i.length)),i}if(jn(t)){const a=Object.assign({},e);return Object.keys(t).reduce(((a,o)=>{const i=ms()(t,o),l=jn(e)&&o in e,c=o in t;return a[o]=ha(e?ms()(e,o):{},i,r,n,s&&(l||!c)),a}),a)}return n&&(!ua()(e)&&ua()(t)||"number"==typeof t&&isNaN(t))||s&&!ua()(t)?e:t}function ma(e,t,r=!1){return Object.keys(t).reduce(((n,s)=>{const a=e?e[s]:{},o=t[s];if(e&&s in e&&jn(o))n[s]=ma(a,o,r);else if(r&&Array.isArray(a)&&Array.isArray(o)){let e=o;"preventDuplicates"===r&&(e=o.reduce(((e,t)=>(a.includes(t)||e.push(t),e)),[])),n[s]=a.concat(e)}else n[s]=o;return n}),Object.assign({},e))}function pa(e){return Array.isArray(e.enum)&&1===e.enum.length||Bn in e}function fa(e,t,r={},n){const s=Js(e,t,r,void 0,n),a=s.oneOf||s.anyOf;return!!Array.isArray(s.enum)||!!Array.isArray(a)&&a.every((e=>"boolean"!=typeof e&&pa(e)))}function ga(e,t,r,n){return!(!t.uniqueItems||!t.items||"boolean"==typeof t.items)&&fa(e,t.items,r,n)}function ya(e){const t=e[Bn],r=Qs(e);return jn(t)&&$s()(null==t?void 0:t.$data)&&"object"!==r&&"array"!==r}function va(e,t){const r=e;if(e.enum){let n;if(t){const{enumNames:e}=ss(t);n=e}return!n&&r.enumNames&&(n=r.enumNames),e.enum.map(((e,t)=>({label:(null==n?void 0:n[t])||String(e),value:e})))}let n,s;return e.anyOf?(n=e.anyOf,s=null==t?void 0:t.anyOf):e.oneOf&&(n=e.oneOf,s=null==t?void 0:t.oneOf),n&&n.map(((e,t)=>{const{title:r}=ss(null==s?void 0:s[t]),n=e,a=function(e){if("enum"in e&&Array.isArray(e.enum)&&1===e.enum.length)return e.enum[0];if(Bn in e)return e.const;throw new Error("schema cannot be inferred as a constant")}(n);return{schema:n,label:r||n.title||String(a),value:a}}))}const ba=["string","number","integer","boolean","null"];var wa;function Sa(e,t=wa.Ignore,r=-1){if(r>=0){if(Array.isArray(e.items)&&r<e.items.length){const t=e.items[r];if("boolean"!=typeof t)return t}}else if(e.items&&!Array.isArray(e.items)&&"boolean"!=typeof e.items)return e.items;return t!==wa.Ignore&&jn(e.additionalItems)?e.additionalItems:{}}function Ca(e,t,r,n,s,a=[],o={},i=!1){const{emptyObjectFields:l="populateAllDefaults"}=o;if(n||i)e[t]=r;else if("skipDefaults"!==l){const n=void 0===s?a.includes(t):s;jn(r)?"skipEmptyDefaults"===l?L()(r)||(e[t]=r):L()(r)&&!a.includes(t)||!n&&"populateRequiredDefaults"===l||(e[t]=r):void 0!==r&&("populateAllDefaults"===l||"skipEmptyDefaults"===l||n&&a.includes(t))&&(e[t]=r)}}function xa(e,t,r={}){const{parentDefaults:n,rawFormData:s,rootSchema:a={},includeUndefinedValues:o=!1,_recurseList:i=[],experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:c,required:d,shouldMergeDefaultsIntoFormData:u=!1}=r,h=jn(s)?s:{},m=jn(t)?t:{};let p=n,f=null,g=l,y=i;if(m[Bn]&&"never"!==(null==l?void 0:l.constAsDefaults)&&!ya(m))p=m[Bn];else if(jn(p)&&jn(m.default))p=ma(p,m.default);else if("default"in m)p=m.default;else if(Zn in m){const e=m[Zn];i.includes(e)||(y=i.concat(e),f=ys(e,a))}else if(Wn in m){const t={...Ea(e,m,r,p),...h};f=ra(e,m,a,!1,[],t,c)[0]}else if(ca(m))p=m.items.map(((t,r)=>xa(e,t,{rootSchema:a,includeUndefinedValues:o,_recurseList:i,experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:c,parentDefaults:Array.isArray(n)?n[r]:void 0,rawFormData:h,required:d,shouldMergeDefaultsIntoFormData:u})));else if(Gn in m){const{oneOf:t,...r}=m;if(0===t.length)return;const n=Ws(m),{type:o="null"}=r;!Array.isArray(o)&&ba.includes(o)&&"skipOneOf"===(null==g?void 0:g.constAsDefaults)&&(g={...g,constAsDefaults:"never"}),f=t[la(e,a,s,t,0,n,c)],f=Gs(r,f)}else if(zn in m){const{anyOf:t,...r}=m;if(0===t.length)return;const n=Ws(m);f=t[la(e,a,s,t,0,n,c)],f=Gs(r,f)}if(f)return xa(e,f,{rootSchema:a,includeUndefinedValues:o,_recurseList:y,experimental_defaultFormStateBehavior:g,experimental_customMergeAllOf:c,parentDefaults:p,rawFormData:h,required:d,shouldMergeDefaultsIntoFormData:u});void 0===p&&(p=m.default);const v=Ea(e,m,r,p);let b=null!=v?v:p;if(u){const{arrayMinItems:t={}}=l||{},{mergeExtraDefaults:r}=t,n=function(e,t,r,n,s){const a=!pa(t)&&fa(e,t,r);let o=n;if(a){const e=va(t);o=(null==e?void 0:e.some((e=>us(e.value,n))))?n:void 0}return t[Bn]&&"always"===(null==s?void 0:s.constAsDefaults)&&(o=t.const),o}(e,m,a,s,l);jn(s)||(b=ha(b,n,r,!0))}return b}function Ea(e,t,r={},n){switch(Qs(t)){case"object":return function(e,t,{rawFormData:r,rootSchema:n={},includeUndefinedValues:s=!1,_recurseList:a=[],experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:i,required:l,shouldMergeDefaultsIntoFormData:c}={},d){{const u=jn(r)?r:{},h=t,m="populateDefaults"===(null==o?void 0:o.allOf)&&Un in h?Js(e,h,n,u,i):h,p=m[Bn],f=Object.keys(m.properties||{}).reduce(((t,r)=>{var h;const f=ms()(m,[Jn,r]),g=jn(p)&&void 0!==p[r],y=(jn(f)&&Bn in f||g)&&"never"!==(null==o?void 0:o.constAsDefaults)&&!ya(f);return Ca(t,r,xa(e,f,{rootSchema:n,_recurseList:a,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:i,includeUndefinedValues:!0===s,parentDefaults:ms()(d,[r]),rawFormData:ms()(u,[r]),required:null===(h=m.required)||void 0===h?void 0:h.includes(r),shouldMergeDefaultsIntoFormData:c}),s,l,m.required,o,y),t}),{});if(m.additionalProperties){const t=jn(m.additionalProperties)?m.additionalProperties:{},r=new Set;jn(d)&&Object.keys(d).filter((e=>!m.properties||!m.properties[e])).forEach((e=>r.add(e)));const h=[];Object.keys(u).filter((e=>!m.properties||!m.properties[e])).forEach((e=>{r.add(e),h.push(e)})),r.forEach((r=>{var p;const g=xa(e,t,{rootSchema:n,_recurseList:a,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:i,includeUndefinedValues:!0===s,parentDefaults:ms()(d,[r]),rawFormData:ms()(u,[r]),required:null===(p=m.required)||void 0===p?void 0:p.includes(r),shouldMergeDefaultsIntoFormData:c});Ca(f,r,g,s,l,h)}))}return f}}(e,t,r,n);case"array":return function(e,t,{rawFormData:r,rootSchema:n={},_recurseList:s=[],experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,required:i,shouldMergeDefaultsIntoFormData:l}={},c){var d,u;const h=t,m=null!==(d=null==a?void 0:a.arrayMinItems)&&void 0!==d?d:{},{populate:p,mergeExtraDefaults:f}=m,g="never"===p,y="requiredOnly"===p,v="all"===p||!g&&!y,b=null!==(u=null==m?void 0:m.computeSkipPopulate)&&void 0!==u?u:()=>!1,w="skipEmptyDefaults"===(null==a?void 0:a.emptyObjectFields)?void 0:[];if(Array.isArray(c)&&(c=c.map(((t,r)=>{const c=Sa(h,wa.Fallback,r);return xa(e,c,{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,parentDefaults:t,required:i,shouldMergeDefaultsIntoFormData:l})}))),Array.isArray(r)){const t=Sa(h);if(g)c=r;else{const d=r.map(((r,d)=>xa(e,t,{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,rawFormData:r,parentDefaults:ms()(c,[d]),required:i,shouldMergeDefaultsIntoFormData:l})));c=ha(c,d,(y&&i||v)&&f)}}if(!1===(jn(h)&&Bn in h&&"never"!==(null==a?void 0:a.constAsDefaults))){if(g)return null!=c?c:w;if(y&&!i)return c||void 0}const S=Array.isArray(c)?c.length:0;if(!h.minItems||ga(e,h,n,o)||b(e,h,n)||h.minItems<=S)return c||w;const C=c||[],x=Sa(h,wa.Invert),E=x.default,$=new Array(h.minItems-S).fill(xa(e,x,{parentDefaults:E,rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,required:i,shouldMergeDefaultsIntoFormData:l}));return C.concat($)}(e,t,r,n)}}function $a(e,t,r,n,s=!1,a,o){if(!jn(t))throw new Error("Invalid schema: "+t);const i=xa(e,Js(e,t,n,r,o),{rootSchema:n,includeUndefinedValues:s,experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,rawFormData:r,shouldMergeDefaultsIntoFormData:!0});if(jn(r)||Array.isArray(r)){const{mergeDefaultsIntoFormData:e}=a||{};return ha(i,r,!0,"useDefaultIfFormDataUndefined"===e,!0)}return i}function _a(e={}){return"widget"in ss(e)&&"hidden"!==ss(e).widget}function Aa(e,t,r={},n,s){if("files"===r[rs])return!0;if(t.items){const r=Js(e,t.items,n,void 0,s);return"string"===r.type&&"data-url"===r.format}return!1}!function(e){e[e.Ignore=0]="Ignore",e[e.Invert=1]="Invert",e[e.Fallback=2]="Fallback"}(wa||(wa={}));const ka=Symbol("no Value");function Pa(e,t,r,n,s={},a){let o;if(bs()(r,Jn)){const i={};if(bs()(n,Jn)){const e=ms()(n,Jn,{});Object.keys(e).forEach((e=>{bs()(s,e)&&(i[e]=void 0)}))}const l=Object.keys(ms()(r,Jn,{})),c={};l.forEach((o=>{const l=ms()(s,o);let d=ms()(n,[Jn,o],{}),u=ms()(r,[Jn,o],{});bs()(d,Zn)&&(d=Js(e,d,t,l,a)),bs()(u,Zn)&&(u=Js(e,u,t,l,a));const h=ms()(d,"type"),m=ms()(u,"type");if(!h||h===m)if(bs()(i,o)&&delete i[o],"object"===m||"array"===m&&Array.isArray(l)){const r=Pa(e,t,u,d,l,a);void 0===r&&"array"!==m||(c[o]=r)}else{const e=ms()(u,"default",ka),t=ms()(d,"default",ka);e!==ka&&e!==l&&(t===l?i[o]=e:!0===ms()(u,"readOnly")&&(i[o]=void 0));const r=ms()(u,"const",ka),n=ms()(d,"const",ka);r!==ka&&r!==l&&(i[o]=n===l?r:void 0)}})),o={..."string"==typeof s||Array.isArray(s)?void 0:s,...i,...c}}else if("array"===ms()(n,"type")&&"array"===ms()(r,"type")&&Array.isArray(s)){let i=ms()(n,"items"),l=ms()(r,"items");if("object"!=typeof i||"object"!=typeof l||Array.isArray(i)||Array.isArray(l))"boolean"==typeof i&&"boolean"==typeof l&&i===l&&(o=s);else{bs()(i,Zn)&&(i=Js(e,i,t,s,a)),bs()(l,Zn)&&(l=Js(e,l,t,s,a));const n=ms()(i,"type"),c=ms()(l,"type");if(!n||n===c){const n=ms()(r,"maxItems",-1);o="object"===c?s.reduce(((r,s)=>{const o=Pa(e,t,l,i,s,a);return void 0!==o&&(n<0||r.length<n)&&r.push(o),r}),[]):n>0&&s.length>n?s.slice(0,n):s}}}return o}function Ta(e,t,r,n,s,a,o,i=[],l){if(Zn in t||Wn in t||Un in t){const c=Js(e,t,a,o,l);if(-1===i.findIndex((e=>us(e,c))))return Ta(e,c,r,n,s,a,o,i.concat(c),l)}if(Kn in t&&!ms()(t,[Kn,Zn]))return Ta(e,ms()(t,Kn),r,n,s,a,o,i,l);const c={$id:s||r};if("object"===Qs(t)&&Jn in t)for(const s in t.properties){const d=ms()(t,[Jn,s]),u=c[Hn]+n+s;c[s]=Ta(e,jn(d)?d:{},r,n,u,a,ms()(o,[s]),i,l)}return c}function Ia(e,t,r,n,s,a="root",o="_",i){return Ta(e,t,a,o,r,n,s,void 0,i)}function Da(e,t,r,n,s,a=[],o){if(Zn in t||Wn in t||Un in t){const i=Js(e,t,n,s,o);if(-1===a.findIndex((e=>us(e,i))))return Da(e,i,r,n,s,a.concat(i),o)}let i={[Qn]:r.replace(/^\./,"")};if(Gn in t||zn in t){const l=Gn in t?t.oneOf:t.anyOf,c=Ws(t),d=l[la(e,n,s,l,0,c,o)];i={...i,...Da(e,d,r,n,s,a,o)}}if(qn in t&&!1!==t[qn]&&Ns()(i,es,!0),Kn in t&&Array.isArray(s)){const{items:l,additionalItems:c}=t;Array.isArray(l)?s.forEach(((t,s)=>{l[s]?i[s]=Da(e,l[s],`${r}.${s}`,n,t,a,o):c?i[s]=Da(e,c,`${r}.${s}`,n,t,a,o):console.warn(`Unable to generate path schema for "${r}.${s}". No schema defined for it`)})):s.forEach(((t,s)=>{i[s]=Da(e,l,`${r}.${s}`,n,t,a,o)}))}else if(Jn in t)for(const l in t.properties){const c=ms()(t,[Jn,l]);i[l]=Da(e,c,`${r}.${l}`,n,ms()(s,[l]),a,o)}return i}function Oa(e,t,r="",n,s,a){return Da(e,t,r,n,s,void 0,a)}class Na{constructor(e,t,r,n){this.rootSchema=t,this.validator=e,this.experimental_defaultFormStateBehavior=r,this.experimental_customMergeAllOf=n}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,t,r={},n){return!(!e||!t||this.validator===e&&us(this.rootSchema,t)&&us(this.experimental_defaultFormStateBehavior,r)&&this.experimental_customMergeAllOf===n)}getDefaultFormState(e,t,r=!1){return $a(this.validator,e,t,this.rootSchema,r,this.experimental_defaultFormStateBehavior,this.experimental_customMergeAllOf)}getDisplayLabel(e,t,r){return function(e,t,r={},n,s,a){const o=ss(r,s),{label:i=!0}=o;let l=!!i;const c=Qs(t);return"array"===c&&(l=ga(e,t,n,a)||Aa(e,t,r,n,a)||_a(r)),"object"===c&&(l=!1),"boolean"!==c||r[rs]||(l=!1),r["ui:field"]&&(l=!1),l}(this.validator,e,t,this.rootSchema,r,this.experimental_customMergeAllOf)}getClosestMatchingOption(e,t,r,n){return la(this.validator,this.rootSchema,e,t,r,n,this.experimental_customMergeAllOf)}getFirstMatchingOption(e,t,r){return Ds(this.validator,e,t,this.rootSchema,r)}getMatchingOption(e,t,r){return Is(this.validator,e,t,this.rootSchema,r)}isFilesArray(e,t){return Aa(this.validator,e,t,this.rootSchema,this.experimental_customMergeAllOf)}isMultiSelect(e){return ga(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}isSelect(e){return fa(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}mergeValidationData(e,t){return function(e,t,r){if(!r)return t;const{errors:n,errorSchema:s}=t;let a=e.toErrorList(r),o=r;return L()(s)||(o=ma(s,r,!0),a=[...n].concat(a)),{errorSchema:o,errors:a}}(this.validator,e,t)}retrieveSchema(e,t){return Js(this.validator,e,this.rootSchema,t,this.experimental_customMergeAllOf)}sanitizeDataForNewSchema(e,t,r){return Pa(this.validator,this.rootSchema,e,t,r,this.experimental_customMergeAllOf)}toIdSchema(e,t,r,n="root",s="_"){return Ia(this.validator,e,t,this.rootSchema,r,n,s,this.experimental_customMergeAllOf)}toPathSchema(e,t,r){return Oa(this.validator,e,t,this.rootSchema,r,this.experimental_customMergeAllOf)}}function Ra(e,t){let r=String(e);for(;r.length<t;)r="0"+r;return r}function Ma(e,t){if(e<=0&&t<=0)e=(new Date).getFullYear()+e,t=(new Date).getFullYear()+t;else if(e<0||t<0)throw new Error(`Both start (${e}) and stop (${t}) must both be <= 0 or > 0, got one of each`);if(e>t)return Ma(t,e).reverse();const r=[];for(let n=e;n<=t;n++)r.push({value:n,label:Ra(n,2)});return r}function Fa(e,t){return function(e,t){let r=e;if(Array.isArray(t)){const e=r.split(/(%\d)/);t.forEach(((t,r)=>{const n=e.findIndex((e=>e===`%${r+1}`));n>=0&&(e[n]=t)})),r=e.join("")}return r}(e,t)}function ja(e,t=[],r){if(Array.isArray(e))return e.map((e=>ja(e,t))).filter((e=>e!==r));const n=""===e||null===e?-1:Number(e),s=t[n];return s?s.value:r}function La(e,t){return Array.isArray(t)?t.some((t=>us(t,e))):us(t,e)}var Ya=r(88055),qa=r.n(Ya),Ua=r(95632),za=r.n(Ua);class Ba{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let t=Array.isArray(e)&&e.length>0||"string"==typeof e?ms()(this.errorSchema,e):this.errorSchema;return!t&&e&&(t={},za()(this.errorSchema,e,t,Object)),t}resetAllErrors(e){return this.errorSchema=e?qa()(e):{},this}addErrors(e,t){const r=this.getOrCreateErrorBlock(t);let n=ms()(r,Vn);return Array.isArray(n)||(n=[],r[Vn]=n),Array.isArray(e)?Ns()(r,Vn,[...new Set([...n,...e])]):Ns()(r,Vn,[...new Set([...n,e])]),this}setErrors(e,t){const r=this.getOrCreateErrorBlock(t),n=Array.isArray(e)?[...new Set([...e])]:[e];return Ns()(r,Vn,n),this}clearErrors(e){const t=this.getOrCreateErrorBlock(e);return Ns()(t,Vn,[]),this}}function Wa(e,t,r=[1900,(new Date).getFullYear()+2],n="YMD"){const{day:s,month:a,year:o,hour:i,minute:l,second:c}=e,d={type:"day",range:[1,31],value:s},u={type:"month",range:[1,12],value:a},h={type:"year",range:r,value:o},m=[];switch(n){case"MDY":m.push(u,d,h);break;case"DMY":m.push(d,u,h);break;default:m.push(h,u,d)}return t&&m.push({type:"hour",range:[0,23],value:i},{type:"minute",range:[0,59],value:l},{type:"second",range:[0,59],value:c}),m}function Va(e){const t={};return e.multipleOf&&(t.step=e.multipleOf),(e.minimum||0===e.minimum)&&(t.min=e.minimum),(e.maximum||0===e.maximum)&&(t.max=e.maximum),t}function Ha(e,t,r={},n=!0){const s={type:t||"text",...Va(e)};return r.inputType?s.type=r.inputType:t||("number"===e.type?(s.type="number",n&&void 0===s.step&&(s.step="any")):"integer"===e.type&&(s.type="number",void 0===s.step&&(s.step=1))),r.autocomplete&&(s.autoComplete=r.autocomplete),r.accept&&(s.accept=r.accept),s}const Ka={props:{disabled:!1},submitText:"Submit",norender:!1};function Qa(e,t,r={}){const{templates:n}=t;return"ButtonTemplates"===e?n[e]:r[e]||n[e]}var Ga=r(44363);const Ja={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function Xa(e,t,r={}){const s=Qs(e);if("function"==typeof t||t&&Ga.isForwardRef((0,n.createElement)(t))||Ga.isMemo(t))return function(e){let t=ms()(e,"MergedWidget");if(!t){const r=e.defaultProps&&e.defaultProps.options||{};t=({options:t,...n})=>(0,Fn.jsx)(e,{options:{...r,...t},...n}),Ns()(e,"MergedWidget",t)}return t}(t);if("string"!=typeof t)throw new Error("Unsupported widget definition: "+typeof t);if(t in r)return Xa(e,r[t],r);if("string"==typeof s){if(!(s in Ja))throw new Error(`No widget for type '${s}'`);if(t in Ja[s])return Xa(e,r[Ja[s][t]],r)}throw new Error(`No widget '${t}' for type '${s}'`)}function Za(e,t){return`${$s()(e)?e:e[Hn]}__${t}`}function eo(e){return Za(e,"description")}function to(e){return Za(e,"error")}function ro(e){return Za(e,"examples")}function no(e){return Za(e,"help")}function so(e){return Za(e,"title")}function ao(e,t=!1){const r=t?` ${ro(e)}`:"";return`${to(e)} ${eo(e)} ${no(e)}${r}`}function oo(e,t){return`${e}-${t}`}function io(e,t,r){return t?r:e}function lo(e,t=!0){if(!e)return{year:-1,month:-1,day:-1,hour:t?-1:0,minute:t?-1:0,second:t?-1:0};const r=new Date(e);if(Number.isNaN(r.getTime()))throw new Error("Unable to parse date "+e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:t?r.getUTCHours():0,minute:t?r.getUTCMinutes():0,second:t?r.getUTCSeconds():0}}function co(e){if(e.const)return!0;if(e.enum&&1===e.enum.length&&!0===e.enum[0])return!0;if(e.anyOf&&1===e.anyOf.length)return co(e.anyOf[0]);if(e.oneOf&&1===e.oneOf.length)return co(e.oneOf[0]);if(e.allOf){const t=e=>co(e);return e.allOf.some(t)}return!1}function uo(e,t=!0){const{year:r,month:n,day:s,hour:a=0,minute:o=0,second:i=0}=e,l=Date.UTC(r,n-1,s,a,o,i),c=new Date(l).toJSON();return t?c:c.slice(0,10)}function ho(e,t=[]){if(!e)return[];let r=[];return Vn in e&&(r=r.concat(e[Vn].map((e=>{const r=`.${t.join(".")}`;return{property:r,message:e,stack:`${r} ${e}`}})))),Object.keys(e).reduce(((r,n)=>{if(n!==Vn){const s=e[n];is()(s)&&(r=r.concat(ho(s,[...t,n])))}return r}),r)}var mo=r(42072),po=r.n(mo);function fo(e){return Object.keys(e).reduce(((t,r)=>{if("addError"===r)return t;{const n=e[r];return is()(n)?{...t,[r]:fo(n)}:{...t,[r]:n}}}),{})}function go(e){if(!e)return"";const t=new Date(e);return`${Ra(t.getFullYear(),4)}-${Ra(t.getMonth()+1,2)}-${Ra(t.getDate(),2)}T${Ra(t.getHours(),2)}:${Ra(t.getMinutes(),2)}:${Ra(t.getSeconds(),2)}.${Ra(t.getMilliseconds(),3)}`}function yo(e,t){if(!t)return e;const{errors:r,errorSchema:n}=e;let s=ho(t),a=t;return L()(n)||(a=ma(n,t,!0),s=[...r].concat(s)),{errorSchema:a,errors:s}}function vo(e){return Array.isArray(e)?function(e){for(let t=0;t<e.length;t++)e[t]=vo(e[t]);return e}([...e]):xs()(e)?function(e){for(const t in e){const r=e,n=r[t];t===Zn&&"string"==typeof n&&n.startsWith("#")?r[t]=ts+n:r[t]=vo(n)}return e}({...e}):e}var bo,wo=r(95950),So=r.n(wo),Co=r(71086),xo=r.n(Co),Eo=r(66245),$o=r.n(Eo);!function(e){e.ArrayItemTitle="Item",e.MissingItems="Missing items definition",e.YesLabel="Yes",e.NoLabel="No",e.CloseLabel="Close",e.ErrorsLabel="Errors",e.NewStringDefault="New Value",e.AddButton="Add",e.AddItemButton="Add Item",e.CopyButton="Copy",e.MoveDownButton="Move down",e.MoveUpButton="Move up",e.RemoveButton="Remove",e.NowLabel="Now",e.ClearLabel="Clear",e.AriaDateLabel="Select a date",e.PreviewLabel="Preview",e.DecrementAriaLabel="Decrease value by 1",e.IncrementAriaLabel="Increase value by 1",e.UnknownFieldType="Unknown field type %1",e.OptionPrefix="Option %1",e.TitleOptionPrefix="%1 option %2",e.KeyLabel="%1 Key",e.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',e.UnsupportedField="Unsupported field schema.",e.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",e.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",e.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",e.FilesInfo="**%1** (%2, %3 bytes)"}(bo||(bo={}));var _o=r(39754),Ao=r.n(_o);function ko(){return((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))()}function Po(e){return Array.isArray(e)?e.map((e=>({key:ko(),item:e}))):[]}function To(e){return Array.isArray(e)?e.map((e=>e.item)):[]}class Io extends n.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:e,registry:t}=this.props,{schemaUtils:r}=t;let n=e.items;return ca(e)&&function(e){return!0===e.additionalItems&&console.warn("additionalItems=true is currently not supported"),jn(e.additionalItems)}(e)&&(n=e.additionalItems),r.getDefaultFormState(n)},this.onAddClick=e=>{this._handleAddClick(e)},this.onAddIndexClick=e=>t=>{this._handleAddClick(t,e)},this.onCopyIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:s}=this.state;let a;if(n){a={};for(const t in n){const r=parseInt(t);r<=e?Ns()(a,[r],n[t]):r>e&&Ns()(a,[r+1],n[t])}}const o={key:ko(),item:qa()(s[e].item)},i=[...s];void 0!==e?i.splice(e+1,0,o):i.push(o),this.setState({keyedFormData:i,updatedKeyedFormData:!0},(()=>r(To(i),a)))},this.onDropIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:s}=this.state;let a;if(n){a={};for(const t in n){const r=parseInt(t);r<e?Ns()(a,[r],n[t]):r>e&&Ns()(a,[r-1],n[t])}}const o=s.filter(((t,r)=>r!==e));this.setState({keyedFormData:o,updatedKeyedFormData:!0},(()=>r(To(o),a)))},this.onReorderClick=(e,t)=>r=>{r&&(r.preventDefault(),r.currentTarget.blur());const{onChange:n,errorSchema:s}=this.props;let a;if(s){a={};for(const r in s){const n=parseInt(r);n==e?Ns()(a,[t],s[e]):n==t?Ns()(a,[e],s[t]):Ns()(a,[r],s[n])}}const{keyedFormData:o}=this.state,i=function(){const r=o.slice();return r.splice(e,1),r.splice(t,0,o[e]),r}();this.setState({keyedFormData:i},(()=>n(To(i),a)))},this.onChangeForIndex=e=>(t,r,n)=>{const{formData:s,onChange:a,errorSchema:o}=this.props,i=(Array.isArray(s)?s:[]).map(((r,n)=>e===n?void 0===t?null:t:r));a(i,o&&o&&{...o,[e]:r},n)},this.onSelectChange=e=>{const{onChange:t,idSchema:r}=this.props;t(e,void 0,r&&r.$id)};const{formData:t=[]}=e,r=Po(t);this.state={keyedFormData:r,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,t){if(t.updatedKeyedFormData)return{updatedKeyedFormData:!1};const r=Array.isArray(e.formData)?e.formData:[],n=t.keyedFormData||[];return{keyedFormData:r.length===n.length?n.map(((e,t)=>({key:e.key,item:r[t]}))):Po(r)}}get itemTitle(){const{schema:e,registry:t}=this.props,{translateString:r}=t;return ms()(e,[Kn,"title"],ms()(e,[Kn,"description"],r(bo.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}canAddItem(e){const{schema:t,uiSchema:r,registry:n}=this.props;let{addable:s}=ss(r,n.globalUiOptions);return!1!==s&&(s=void 0===t.maxItems||e.length<t.maxItems),s}_handleAddClick(e,t){e&&e.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:s}=this.state;let a;if(n){a={};for(const e in n){const r=parseInt(e);void 0===t||r<t?Ns()(a,[r],n[e]):r>=t&&Ns()(a,[r+1],n[e])}}const o={key:ko(),item:this._getNewFormDataRow()},i=[...s];void 0!==t?i.splice(t,0,o):i.push(o),this.setState({keyedFormData:i,updatedKeyedFormData:!0},(()=>r(To(i),a)))}render(){const{schema:e,uiSchema:t,idSchema:r,registry:n}=this.props,{schemaUtils:s,translateString:a}=n;if(!(Kn in e)){const s=Qa("UnsupportedFieldTemplate",n,ss(t));return(0,Fn.jsx)(s,{schema:e,idSchema:r,reason:a(bo.MissingItems),registry:n})}return s.isMultiSelect(e)?this.renderMultiSelect():_a(t)?this.renderCustomWidget():ca(e)?this.renderFixedArray():s.isFilesArray(e,t)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:t={},errorSchema:r,idSchema:n,name:s,title:a,disabled:o=!1,readonly:i=!1,autofocus:l=!1,required:c=!1,registry:d,onBlur:u,onFocus:h,idPrefix:m,idSeparator:p="_",rawErrors:f}=this.props,{keyedFormData:g}=this.state,y=e.title||a||s,{schemaUtils:v,formContext:b}=d,w=ss(t),S=xs()(e.items)?e.items:{},C=v.retrieveSchema(S),x=To(this.state.keyedFormData),E=this.canAddItem(x),$={canAdd:E,items:g.map(((e,a)=>{const{key:o,item:i}=e,c=i,d=v.retrieveSchema(S,c),b=r?r[a]:void 0,w=n.$id+p+a,C=v.toIdSchema(d,w,c,m,p);return this.renderArrayFieldItem({key:o,index:a,name:s&&`${s}-${a}`,title:y?`${y}-${a+1}`:void 0,canAdd:E,canMoveUp:a>0,canMoveDown:a<x.length-1,itemSchema:d,itemIdSchema:C,itemErrorSchema:b,itemData:c,itemUiSchema:t.items,autofocus:l&&0===a,onBlur:u,onFocus:h,rawErrors:f,totalItems:g.length})})),className:`field field-array field-array-of-${C.type}`,disabled:o,idSchema:n,uiSchema:t,onAddClick:this.onAddClick,readonly:i,required:c,schema:e,title:y,formContext:b,formData:x,rawErrors:f,registry:d},_=Qa("ArrayFieldTemplate",d,w);return(0,Fn.jsx)(_,{...$})}renderCustomWidget(){var e;const{schema:t,idSchema:r,uiSchema:n,disabled:s=!1,readonly:a=!1,autofocus:o=!1,required:i=!1,hideError:l,placeholder:c,onBlur:d,onFocus:u,formData:h=[],registry:m,rawErrors:p,name:f}=this.props,{widgets:g,formContext:y,globalUiOptions:v,schemaUtils:b}=m,{widget:w,title:S,...C}=ss(n,v),x=Xa(t,w,g),E=null!==(e=null!=S?S:t.title)&&void 0!==e?e:f,$=b.getDisplayLabel(t,n,v);return(0,Fn.jsx)(x,{id:r.$id,name:f,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:u,options:C,schema:t,uiSchema:n,registry:m,value:h,disabled:s,readonly:a,hideError:l,required:i,label:E,hideLabel:!$,placeholder:c,formContext:y,autofocus:o,rawErrors:p})}renderMultiSelect(){var e;const{schema:t,idSchema:r,uiSchema:n,formData:s=[],disabled:a=!1,readonly:o=!1,autofocus:i=!1,required:l=!1,placeholder:c,onBlur:d,onFocus:u,registry:h,rawErrors:m,name:p}=this.props,{widgets:f,schemaUtils:g,formContext:y,globalUiOptions:v}=h,b=va(g.retrieveSchema(t.items,s),n),{widget:w="select",title:S,...C}=ss(n,v),x=Xa(t,w,f),E=null!==(e=null!=S?S:t.title)&&void 0!==e?e:p,$=g.getDisplayLabel(t,n,v);return(0,Fn.jsx)(x,{id:r.$id,name:p,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:u,options:{...C,enumOptions:b},schema:t,uiSchema:n,registry:h,value:s,disabled:a,readonly:o,required:l,label:E,hideLabel:!$,placeholder:c,formContext:y,autofocus:i,rawErrors:m})}renderFiles(){var e;const{schema:t,uiSchema:r,idSchema:n,name:s,disabled:a=!1,readonly:o=!1,autofocus:i=!1,required:l=!1,onBlur:c,onFocus:d,registry:u,formData:h=[],rawErrors:m}=this.props,{widgets:p,formContext:f,globalUiOptions:g,schemaUtils:y}=u,{widget:v="files",title:b,...w}=ss(r,g),S=Xa(t,v,p),C=null!==(e=null!=b?b:t.title)&&void 0!==e?e:s,x=y.getDisplayLabel(t,r,g);return(0,Fn.jsx)(S,{options:w,id:n.$id,name:s,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:d,schema:t,uiSchema:r,value:h,disabled:a,readonly:o,required:l,registry:u,formContext:f,autofocus:i,rawErrors:m,label:C,hideLabel:!x})}renderFixedArray(){const{schema:e,uiSchema:t={},formData:r=[],errorSchema:n,idPrefix:s,idSeparator:a="_",idSchema:o,name:i,title:l,disabled:c=!1,readonly:d=!1,autofocus:u=!1,required:h=!1,registry:m,onBlur:p,onFocus:f,rawErrors:g}=this.props,{keyedFormData:y}=this.state;let{formData:v=[]}=this.props;const b=e.title||l||i,w=ss(t),{schemaUtils:S,formContext:C}=m,x=(xs()(e.items)?e.items:[]).map(((e,t)=>S.retrieveSchema(e,r[t]))),E=xs()(e.additionalItems)?S.retrieveSchema(e.additionalItems,r):null;(!v||v.length<x.length)&&(v=v||[],v=v.concat(new Array(x.length-v.length)));const $=this.canAddItem(v)&&!!E,_={canAdd:$,className:"field field-array field-array-fixed-items",disabled:c,idSchema:o,formData:r,items:y.map(((r,l)=>{const{key:c,item:d}=r,h=d,m=l>=x.length,w=(m&&xs()(e.additionalItems)?S.retrieveSchema(e.additionalItems,h):x[l])||{},C=o.$id+a+l,E=S.toIdSchema(w,C,h,s,a),_=m?t.additionalItems||{}:Array.isArray(t.items)?t.items[l]:t.items||{},A=n?n[l]:void 0;return this.renderArrayFieldItem({key:c,index:l,name:i&&`${i}-${l}`,title:b?`${b}-${l+1}`:void 0,canAdd:$,canRemove:m,canMoveUp:l>=x.length+1,canMoveDown:m&&l<v.length-1,itemSchema:w,itemData:h,itemUiSchema:_,itemIdSchema:E,itemErrorSchema:A,autofocus:u&&0===l,onBlur:p,onFocus:f,rawErrors:g,totalItems:y.length})})),onAddClick:this.onAddClick,readonly:d,required:h,registry:m,schema:e,uiSchema:t,title:b,formContext:C,errorSchema:n,rawErrors:g},A=Qa("ArrayFieldTemplate",m,w);return(0,Fn.jsx)(A,{..._})}renderArrayFieldItem(e){const{key:t,index:r,name:n,canAdd:s,canRemove:a=!0,canMoveUp:o,canMoveDown:i,itemSchema:l,itemData:c,itemUiSchema:d,itemIdSchema:u,itemErrorSchema:h,autofocus:m,onBlur:p,onFocus:f,rawErrors:g,totalItems:y,title:v}=e,{disabled:b,hideError:w,idPrefix:S,idSeparator:C,readonly:x,uiSchema:E,registry:$,formContext:_}=this.props,{fields:{ArraySchemaField:A,SchemaField:k},globalUiOptions:P}=$,T=A||k,{orderable:I=!0,removable:D=!0,copyable:O=!1}=ss(E,P),N={moveUp:I&&o,moveDown:I&&i,copy:O&&s,remove:D&&a,toolbar:!1};return N.toolbar=Object.keys(N).some((e=>N[e])),{children:(0,Fn.jsx)(T,{name:n,title:v,index:r,schema:l,uiSchema:d,formData:c,formContext:_,errorSchema:h,idPrefix:S,idSeparator:C,idSchema:u,required:this.isItemRequired(l),onChange:this.onChangeForIndex(r),onBlur:p,onFocus:f,registry:$,disabled:b,readonly:x,hideError:w,autofocus:m,rawErrors:g}),className:"array-item",disabled:b,canAdd:s,hasCopy:N.copy,hasToolbar:N.toolbar,hasMoveUp:N.moveUp,hasMoveDown:N.moveDown,hasRemove:N.remove,index:r,totalItems:y,key:t,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:x,registry:$,schema:l,uiSchema:d}}}const Do=Io,Oo=function(e){var t,r,n;const{schema:s,name:a,uiSchema:o,idSchema:i,formData:l,registry:c,required:d,disabled:u,readonly:h,hideError:m,autofocus:p,title:f,onChange:g,onFocus:y,onBlur:v,rawErrors:b}=e,{title:w}=s,{widgets:S,formContext:C,translateString:x,globalUiOptions:E}=c,{widget:$="checkbox",title:_,label:A=!0,...k}=ss(o,E),P=Xa(s,$,S),T=x(bo.YesLabel),I=x(bo.NoLabel);let D;const O=null!==(r=null!==(t=null!=_?_:w)&&void 0!==t?t:f)&&void 0!==r?r:a;if(Array.isArray(s.oneOf))D=va({oneOf:s.oneOf.map((e=>{if(xs()(e))return{...e,title:e.title||(!0===e.const?T:I)}})).filter((e=>e))},o);else{const e=s,t=null!==(n=s.enum)&&void 0!==n?n:[!0,!1];D=!e.enumNames&&2===t.length&&t.every((e=>"boolean"==typeof e))?[{value:t[0],label:t[0]?T:I},{value:t[1],label:t[1]?T:I}]:va({enum:t,enumNames:e.enumNames},o)}return(0,Fn.jsx)(P,{options:{...k,enumOptions:D},schema:s,uiSchema:o,id:i.$id,name:a,onChange:g,onFocus:y,onBlur:v,label:O,hideLabel:!A,value:l,required:d,disabled:u,readonly:h,hideError:m,registry:c,formContext:C,autofocus:p,rawErrors:b})};class No extends n.Component{constructor(e){super(e),this.onOptionChange=e=>{const{selectedOption:t,retrievedOptions:r}=this.state,{formData:n,onChange:s,registry:a}=this.props,{schemaUtils:o}=a,i=void 0!==e?parseInt(e,10):-1;if(i===t)return;const l=i>=0?r[i]:void 0,c=t>=0?r[t]:void 0;let d=o.sanitizeDataForNewSchema(l,c,n);l&&(d=o.getDefaultFormState(l,d,"excludeObjectChildren")),this.setState({selectedOption:i},(()=>{s(d,void 0,this.getFieldId())}))};const{formData:t,options:r,registry:{schemaUtils:n}}=this.props,s=r.map((e=>n.retrieveSchema(e,t)));this.state={retrievedOptions:s,selectedOption:this.getMatchingOption(0,t,s)}}componentDidUpdate(e,t){const{formData:r,options:n,idSchema:s}=this.props,{selectedOption:a}=this.state;let o=this.state;if(!us(e.options,n)){const{registry:{schemaUtils:e}}=this.props;o={selectedOption:a,retrievedOptions:n.map((t=>e.retrieveSchema(t,r)))}}if(!us(r,e.formData)&&s.$id===e.idSchema.$id){const{retrievedOptions:e}=o,n=this.getMatchingOption(a,r,e);t&&n!==a&&(o={selectedOption:n,retrievedOptions:e})}o!==this.state&&this.setState(o)}getMatchingOption(e,t,r){const{schema:n,registry:{schemaUtils:s}}=this.props,a=Ws(n);return s.getClosestMatchingOption(t,r,e,a)}getFieldId(){const{idSchema:e,schema:t}=this.props;return`${e.$id}${t.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:t=!1,errorSchema:r={},formContext:n,onBlur:s,onFocus:a,registry:o,schema:i,uiSchema:l}=this.props,{widgets:c,fields:d,translateString:u,globalUiOptions:h,schemaUtils:m}=o,{SchemaField:p}=d,{selectedOption:f,retrievedOptions:g}=this.state,{widget:y="select",placeholder:v,autofocus:b,autocomplete:w,title:S=i.title,...C}=ss(l,h),x=Xa({type:"number"},y,c),E=ms()(r,Vn,[]),$=Oe()(r,[Vn]),_=m.getDisplayLabel(i,l,h),A=f>=0&&g[f]||null;let k;if(A){const{required:e}=i;k=e?Gs({required:e},A):A}let P=[];Gn in i&&l&&Gn in l?Array.isArray(l[Gn])?P=l[Gn]:console.warn(`uiSchema.oneOf is not an array for "${S||e}"`):zn in i&&l&&zn in l&&(Array.isArray(l[zn])?P=l[zn]:console.warn(`uiSchema.anyOf is not an array for "${S||e}"`));let T=l;f>=0&&P.length>f&&(T=P[f]);const I=S?bo.TitleOptionPrefix:bo.OptionPrefix,D=S?[S]:[],O=g.map(((e,t)=>{const{title:r=e.title}=ss(P[t]);return{label:r||u(I,D.concat(String(t+1))),value:t}}));return(0,Fn.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,Fn.jsx)("div",{className:"form-group",children:(0,Fn.jsx)(x,{id:this.getFieldId(),name:`${e}${i.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:s,onFocus:a,disabled:t||L()(O),multiple:!1,rawErrors:E,errorSchema:$,value:f>=0?f:void 0,options:{enumOptions:O,...C},registry:o,formContext:n,placeholder:v,autocomplete:w,autofocus:b,label:null!=S?S:e,hideLabel:!_})}),k&&(0,Fn.jsx)(p,{...this.props,schema:k,uiSchema:T})]})}}const Ro=No,Mo=/\.([0-9]*0)*$/,Fo=/[0.]0*$/,jo=function(e){const{registry:t,onChange:r,formData:s,value:a}=e,[o,i]=(0,n.useState)(a),{StringField:l}=t.fields;let c=s;const d=(0,n.useCallback)(((e,t,n)=>{i(e),"."===`${e}`.charAt(0)&&(e=`0${e}`);const s="string"==typeof e&&e.match(Mo)?Ln(e.replace(Fo,"")):Ln(e);r(s,t,n)}),[r]);if("string"==typeof o&&"number"==typeof c){const e=new RegExp(`^(${String(c).replace(".","\\.")})?\\.?0*$`);o.match(e)&&(c=o)}return(0,Fn.jsx)(l,{...e,formData:c,onChange:d})};function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lo.apply(this,arguments)}const Yo=["children","options"],qo="0",Uo="1",zo="2",Bo="3",Wo="4",Vo="5",Ho="6",Ko="7",Qo="8",Go="9",Jo="10",Xo="11",Zo="12",ei="13",ti="14",ri="15",ni="16",si="17",ai="18",oi="19",ii="20",li="21",ci="22",di="23",ui="24",hi="25",mi="27",pi="28",fi="29",gi="30",yi="31",vi="32",bi="33";var wi,Si;(Si=wi||(wi={}))[Si.MAX=0]="MAX",Si[Si.HIGH=1]="HIGH",Si[Si.MED=2]="MED",Si[Si.LOW=3]="LOW",Si[Si.MIN=4]="MIN";const Ci=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{class:"className",for:"htmlFor"}),xi={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},Ei=["style","script"],$i=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,_i=/mailto:/i,Ai=/\n{2,}$/,ki=/^(\s*>[\s\S]*?)(?=\n\n|$)/,Pi=/^ *> ?/gm,Ti=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,Ii=/^ {2,}\n/,Di=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,Oi=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,Ni=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,Ri=/^(`+)((?:\\`|[^`])+)\1/,Mi=/^(?:\n *)*\n/,Fi=/\r\n?/g,ji=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,Li=/^\[\^([^\]]+)]/,Yi=/\f/g,qi=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,Ui=/^\s*?\[(x|\s)\]/,zi=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Bi=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Wi=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,Vi=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,Hi=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,Ki=/^<!--[\s\S]*?(?:-->)/,Qi=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,Gi=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,Ji=/^\{.*\}$/,Xi=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Zi=/^<([^ >]+@[^ >]+)>/,el=/^<([^ >]+:\/[^ >]+)>/,tl=/-([a-z])?/gi,rl=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,nl=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,sl=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,al=/^\[([^\]]*)\] ?\[([^\]]*)\]/,ol=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,il=/\t/g,ll=/(^ *\||\| *$)/g,cl=/^ *:-+: *$/,dl=/^ *:-+ *$/,ul=/^ *-+: *$/,hl="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",ml=new RegExp(`^([*_])\\1${hl}\\1\\1(?!\\1)`),pl=new RegExp(`^([*_])${hl}\\1(?!\\1)`),fl=new RegExp(`^(==)${hl}\\1`),gl=new RegExp(`^(~~)${hl}\\1`),yl=/^\\([^0-9A-Za-z\s])/,vl=/\\([^0-9A-Za-z\s])/g,bl=/^([\s\S](?:(?!  |[0-9]\.)[^*_~\-\n<`\\\[!])*)/,wl=/^\n+/,Sl=/^([ \t]*)/,Cl=/\\([^\\])/g,xl=/(?:^|\n)( *)$/,El="(?:\\d+\\.)",$l="(?:[*+-])";function _l(e){return"( *)("+(1===e?El:$l)+") +"}const Al=_l(1),kl=_l(2);function Pl(e){return new RegExp("^"+(1===e?Al:kl))}const Tl=Pl(1),Il=Pl(2);function Dl(e){return new RegExp("^"+(1===e?Al:kl)+"[^\\n]*(?:\\n(?!\\1"+(1===e?El:$l)+" )[^\\n]*)*(\\n|$)","gm")}const Ol=Dl(1),Nl=Dl(2);function Rl(e){const t=1===e?El:$l;return new RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const Ml=Rl(1),Fl=Rl(2);function jl(e,t){const r=1===t,n=r?Ml:Fl,s=r?Ol:Nl,a=r?Tl:Il;return{match:Ql((function(e,t){const r=xl.exec(t.prevCapture);return r&&(t.list||!t.inline&&!t.simple)?n.exec(e=r[1]+e):null})),order:1,parse(e,t,n){const o=r?+e[2]:void 0,i=e[0].replace(Ai,"\n").match(s);let l=!1;return{items:i.map((function(e,r){const s=a.exec(e)[0].length,o=new RegExp("^ {1,"+s+"}","gm"),c=e.replace(o,"").replace(a,""),d=r===i.length-1,u=-1!==c.indexOf("\n\n")||d&&l;l=u;const h=n.inline,m=n.list;let p;n.list=!0,u?(n.inline=!1,p=zl(c)+"\n\n"):(n.inline=!0,p=zl(c));const f=t(p,n);return n.inline=h,n.list=m,f})),ordered:r,start:o}},render:(t,r,n)=>e(t.ordered?"ol":"ul",{key:n.key,start:"20"===t.type?t.start:void 0},t.items.map((function(t,s){return e("li",{key:s},r(t,n))})))}}const Ll=new RegExp("^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),Yl=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,ql=[ki,Oi,Ni,zi,Wi,Bi,rl,Ml,Fl],Ul=[...ql,/^[^\n]+(?:  \n|\n{2,})/,Vi,Ki,Gi];function zl(e){let t=e.length;for(;t>0&&e[t-1]<=" ";)t--;return e.slice(0,t)}function Bl(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Wl(e){return ul.test(e)?"right":cl.test(e)?"center":dl.test(e)?"left":null}function Vl(e,t,r,n){const s=r.inTable;r.inTable=!0;let a=[[]],o="";function i(){if(!o)return;const e=a[a.length-1];e.push.apply(e,t(o,r)),o=""}return e.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach(((e,t,r)=>{"|"===e.trim()&&(i(),n)?0!==t&&t!==r.length-1&&a.push([]):o+=e})),i(),r.inTable=s,a}function Hl(e,t,r){r.inline=!0;const n=e[2]?e[2].replace(ll,"").split("|").map(Wl):[],s=e[3]?function(e,t,r){return e.trim().split("\n").map((function(e){return Vl(e,t,r,!0)}))}(e[3],t,r):[],a=Vl(e[1],t,r,!!s.length);return r.inline=!1,s.length?{align:n,cells:s,header:a,type:"25"}:{children:a,type:"21"}}function Kl(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function Ql(e){return e.inline=1,e}function Gl(e){return Ql((function(t,r){return r.inline?e.exec(t):null}))}function Jl(e){return Ql((function(t,r){return r.inline||r.simple?e.exec(t):null}))}function Xl(e){return function(t,r){return r.inline||r.simple?null:e.exec(t)}}function Zl(e){return Ql((function(t){return e.exec(t)}))}function ec(e,t){if(t.inline||t.simple)return null;let r="";e.split("\n").every((e=>(e+="\n",!ql.some((t=>t.test(e)))&&(r+=e,!!e.trim()))));const n=zl(r);return""==n?null:[r,,n]}function tc(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch(e){return null}return e}function rc(e){return e.replace(Cl,"$1")}function nc(e,t,r){const n=r.inline||!1,s=r.simple||!1;r.inline=!0,r.simple=!0;const a=e(t,r);return r.inline=n,r.simple=s,a}function sc(e,t,r){const n=r.inline||!1,s=r.simple||!1;r.inline=!1,r.simple=!0;const a=e(t,r);return r.inline=n,r.simple=s,a}function ac(e,t,r){const n=r.inline||!1;r.inline=!1;const s=e(t,r);return r.inline=n,s}const oc=(e,t,r)=>({children:nc(t,e[2],r)});function ic(){return{}}function lc(){return null}function cc(...e){return e.filter(Boolean).join(" ")}function dc(e,t,r){let n=e;const s=t.split(".");for(;s.length&&(n=n[s[0]],void 0!==n);)s.shift();return n||r}function uc(e="",t={}){function r(e,r,...n){const s=dc(t.overrides,`${e}.props`,{});return t.createElement(function(e,t){const r=dc(t,e);return r?"function"==typeof r||"object"==typeof r&&"render"in r?r:dc(t,`${e}.component`,e):e}(e,t.overrides),Lo({},r,s,{className:cc(null==r?void 0:r.className,s.className)||void 0}),...n)}function s(e){e=e.replace(qi,"");let n=!1;t.forceInline?n=!0:t.forceBlock||(n=!1===ol.test(e));const s=d(c(n?e:`${zl(e).replace(wl,"")}\n\n`,{inline:n}));for(;"string"==typeof s[s.length-1]&&!s[s.length-1].trim();)s.pop();if(null===t.wrapper)return s;const a=t.wrapper||(n?"span":"div");let o;if(s.length>1||t.forceWrapper)o=s;else{if(1===s.length)return o=s[0],"string"==typeof o?r("span",{key:"outer"},o):o;o=null}return t.createElement(a,{key:"outer"},o)}function a(e,r){const n=r.match($i);return n?n.reduce((function(r,n){const a=n.indexOf("=");if(-1!==a){const o=function(e){return-1!==e.indexOf("-")&&null===e.match(Qi)&&(e=e.replace(tl,(function(e,t){return t.toUpperCase()}))),e}(n.slice(0,a)).trim(),i=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(n.slice(a+1).trim()),l=Ci[o]||o;if("ref"===l)return r;const c=r[l]=function(e,t,r,n){return"style"===t?r.split(/;\s?/).reduce((function(e,t){const r=t.slice(0,t.indexOf(":"));return e[r.trim().replace(/(-[a-z])/g,(e=>e[1].toUpperCase()))]=t.slice(r.length+1).trim(),e}),{}):"href"===t||"src"===t?n(r,e,t):(r.match(Ji)&&(r=r.slice(1,r.length-1)),"true"===r||"false"!==r&&r)}(e,o,i,t.sanitizer);"string"==typeof c&&(Vi.test(c)||Gi.test(c))&&(r[l]=s(c.trim()))}else"style"!==n&&(r[Ci[n]||n]=!0);return r}),{}):null}t.overrides=t.overrides||{},t.sanitizer=t.sanitizer||tc,t.slugify=t.slugify||Bl,t.namedCodesToUnicode=t.namedCodesToUnicode?Lo({},xi,t.namedCodesToUnicode):xi,t.createElement=t.createElement||n.createElement;const o=[],i={},l={[qo]:{match:Xl(ki),order:1,parse(e,t,r){const[,n,s]=e[0].replace(Pi,"").match(Ti);return{alert:n,children:t(s,r)}},render(e,n,s){const a={key:s.key};return e.alert&&(a.className="markdown-alert-"+t.slugify(e.alert.toLowerCase(),Bl),e.children.unshift({attrs:{},children:[{type:mi,text:e.alert}],noInnerParse:!0,type:Xo,tag:"header"})),r("blockquote",a,n(e.children,s))}},[Uo]:{match:Zl(Ii),order:1,parse:ic,render:(e,t,n)=>r("br",{key:n.key})},[zo]:{match:Xl(Di),order:1,parse:ic,render:(e,t,n)=>r("hr",{key:n.key})},[Bo]:{match:Xl(Ni),order:0,parse:e=>({lang:void 0,text:zl(e[0].replace(/^ {4}/gm,"")).replace(vl,"$1")}),render:(e,t,n)=>r("pre",{key:n.key},r("code",Lo({},e.attrs,{className:e.lang?`lang-${e.lang}`:""}),e.text))},[Wo]:{match:Xl(Oi),order:0,parse:e=>({attrs:a("code",e[3]||""),lang:e[2]||void 0,text:e[4].replace(vl,"$1"),type:"3"})},[Vo]:{match:Jl(Ri),order:3,parse:e=>({text:e[2].replace(vl,"$1")}),render:(e,t,n)=>r("code",{key:n.key},e.text)},[Ho]:{match:Xl(ji),order:0,parse:e=>(o.push({footnote:e[2],identifier:e[1]}),{}),render:lc},[Ko]:{match:Gl(Li),order:1,parse:e=>({target:`#${t.slugify(e[1],Bl)}`,text:e[1]}),render:(e,n,s)=>r("a",{key:s.key,href:t.sanitizer(e.target,"a","href")},r("sup",{key:s.key},e.text))},[Qo]:{match:Gl(Ui),order:1,parse:e=>({completed:"x"===e[1].toLowerCase()}),render:(e,t,n)=>r("input",{checked:e.completed,key:n.key,readOnly:!0,type:"checkbox"})},[Go]:{match:Xl(t.enforceAtxHeadings?Bi:zi),order:1,parse:(e,r,n)=>({children:nc(r,e[2],n),id:t.slugify(e[2],Bl),level:e[1].length}),render:(e,t,n)=>r(`h${e.level}`,{id:e.id,key:n.key},t(e.children,n))},[Jo]:{match:Xl(Wi),order:0,parse:(e,t,r)=>({children:nc(t,e[1],r),level:"="===e[2]?1:2,type:"9"})},[Xo]:{match:Zl(Vi),order:1,parse(e,t,r){const[,n]=e[3].match(Sl),s=new RegExp(`^${n}`,"gm"),o=e[3].replace(s,""),i=(l=o,Ul.some((e=>e.test(l)))?ac:nc);var l;const c=e[1].toLowerCase(),d=-1!==Ei.indexOf(c),u=(d?c:e[1]).trim(),h={attrs:a(u,e[2]),noInnerParse:d,tag:u};return r.inAnchor=r.inAnchor||"a"===c,d?h.text=e[3]:h.children=i(t,o,r),r.inAnchor=!1,h},render:(e,t,n)=>r(e.tag,Lo({key:n.key},e.attrs),e.text||(e.children?t(e.children,n):""))},[ei]:{match:Zl(Gi),order:1,parse(e){const t=e[1].trim();return{attrs:a(t,e[2]||""),tag:t}},render:(e,t,n)=>r(e.tag,Lo({},e.attrs,{key:n.key}))},[Zo]:{match:Zl(Ki),order:1,parse:()=>({}),render:lc},[ti]:{match:Jl(Yl),order:1,parse:e=>({alt:e[1],target:rc(e[2]),title:e[3]}),render:(e,n,s)=>r("img",{key:s.key,alt:e.alt||void 0,title:e.title||void 0,src:t.sanitizer(e.target,"img","src")})},[ri]:{match:Gl(Ll),order:3,parse:(e,t,r)=>({children:sc(t,e[1],r),target:rc(e[2]),title:e[3]}),render:(e,n,s)=>r("a",{key:s.key,href:t.sanitizer(e.target,"a","href"),title:e.title},n(e.children,s))},[ni]:{match:Gl(el),order:0,parse:e=>({children:[{text:e[1],type:mi}],target:e[1],type:ri})},[si]:{match:Ql(((e,r)=>r.inAnchor||t.disableAutoLink?null:Gl(Xi)(e,r))),order:0,parse:e=>({children:[{text:e[1],type:mi}],target:e[1],title:void 0,type:ri})},[ai]:{match:Gl(Zi),order:0,parse(e){let t=e[1],r=e[1];return _i.test(r)||(r="mailto:"+r),{children:[{text:t.replace("mailto:",""),type:mi}],target:r,type:ri}}},[ii]:jl(r,1),[bi]:jl(r,2),[oi]:{match:Xl(Mi),order:3,parse:ic,render:()=>"\n"},[li]:{match:Ql(ec),order:3,parse:oc,render:(e,t,n)=>r("p",{key:n.key},t(e.children,n))},[ci]:{match:Gl(nl),order:0,parse:e=>(i[e[1]]={target:e[2],title:e[4]},{}),render:lc},[di]:{match:Jl(sl),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,n,s)=>i[e.ref]?r("img",{key:s.key,alt:e.alt,src:t.sanitizer(i[e.ref].target,"img","src"),title:i[e.ref].title}):null},[ui]:{match:Gl(al),order:0,parse:(e,t,r)=>({children:t(e[1],r),fallbackChildren:e[0],ref:e[2]}),render:(e,n,s)=>i[e.ref]?r("a",{key:s.key,href:t.sanitizer(i[e.ref].target,"a","href"),title:i[e.ref].title},n(e.children,s)):r("span",{key:s.key},e.fallbackChildren)},[hi]:{match:Xl(rl),order:1,parse:Hl,render(e,t,n){const s=e;return r("table",{key:n.key},r("thead",null,r("tr",null,s.header.map((function(e,a){return r("th",{key:a,style:Kl(s,a)},t(e,n))})))),r("tbody",null,s.cells.map((function(e,a){return r("tr",{key:a},e.map((function(e,a){return r("td",{key:a,style:Kl(s,a)},t(e,n))})))}))))}},[mi]:{match:Zl(bl),order:4,parse:e=>({text:e[0].replace(Hi,((e,r)=>t.namedCodesToUnicode[r]?t.namedCodesToUnicode[r]:e))}),render:e=>e.text},[pi]:{match:Jl(ml),order:2,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,n)=>r("strong",{key:n.key},t(e.children,n))},[fi]:{match:Jl(pl),order:3,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,n)=>r("em",{key:n.key},t(e.children,n))},[gi]:{match:Jl(yl),order:1,parse:e=>({text:e[1],type:mi})},[yi]:{match:Jl(fl),order:3,parse:oc,render:(e,t,n)=>r("mark",{key:n.key},t(e.children,n))},[vi]:{match:Jl(gl),order:3,parse:oc,render:(e,t,n)=>r("del",{key:n.key},t(e.children,n))}};!0===t.disableParsingRawHTML&&(delete l[Xo],delete l[13]);const c=function(e){let t=Object.keys(e);function r(n,s){let a,o,i=[],l="",c="";for(s.prevCapture=s.prevCapture||"";n;){let d=0;for(;d<t.length;){if(l=t[d],a=e[l],s.inline&&!a.match.inline){d++;continue}const u=a.match(n,s);if(u){c=u[0],s.prevCapture+=c,n=n.substring(c.length),o=a.parse(u,r,s),null==o.type&&(o.type=l),i.push(o);break}d++}}return s.prevCapture="",i}return t.sort((function(t,r){let n=e[t].order,s=e[r].order;return n!==s?n-s:t<r?-1:1})),function(e,t){return r(function(e){return e.replace(Fi,"\n").replace(Yi,"").replace(il,"    ")}(e),t)}}(l),d=(u=function(e,t){return function(r,n,s){const a=e[r.type].render;return t?t((()=>a(r,n,s)),r,n,s):a(r,n,s)}}(l,t.renderRule),function e(t,r={}){if(Array.isArray(t)){const n=r.key,s=[];let a=!1;for(let n=0;n<t.length;n++){r.key=n;const o=e(t[n],r),i="string"==typeof o;i&&a?s[s.length-1]+=o:null!==o&&s.push(o),a=i}return r.key=n,s}return u(t,e,r)});var u;const h=s(e);return o.length?r("div",null,h,r("footer",{key:"footer"},o.map((function(e){return r("div",{id:t.slugify(e.identifier,Bl),key:e.identifier},e.identifier,d(c(e.footnote,{inline:!0})))})))):h}const hc=e=>{let{children:t="",options:r}=e,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(s[r]=e[r]);return s}(e,Yo);return n.cloneElement(uc(t,r),s)};var mc=r(73357),pc=r.n(mc);class fc extends n.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,t=!1)=>(r,n,s)=>{const{formData:a,onChange:o,errorSchema:i}=this.props;void 0===r&&t&&(r=""),o({...a,[e]:r},i&&i&&{...i,[e]:n},s)},this.onDropPropertyClick=e=>t=>{t.preventDefault();const{onChange:r,formData:n}=this.props,s={...n};pc()(s,e),r(s)},this.getAvailableKey=(e,t)=>{const{uiSchema:r,registry:n}=this.props,{duplicateKeySuffixSeparator:s="-"}=ss(r,n.globalUiOptions);let a=0,o=e;for(;bs()(t,o);)o=`${e}${s}${++a}`;return o},this.onKeyChange=e=>(t,r)=>{if(e===t)return;const{formData:n,onChange:s,errorSchema:a}=this.props;t=this.getAvailableKey(t,n);const o={...n},i={[e]:t},l=Object.keys(o).map((e=>{const t=i[e]||e;return{[t]:o[e]}})),c=Object.assign({},...l);this.setState({wasPropertyKeyModified:!0}),s(c,a&&a&&{...a,[t]:r})},this.handleAddClick=e=>()=>{var t;if(!e.additionalProperties)return;const{formData:r,onChange:n,registry:s}=this.props,a={...r};let o,i,l;if(xs()(e.additionalProperties)){o=e.additionalProperties.type,i=e.additionalProperties.const,l=e.additionalProperties.default;let t=e.additionalProperties;if(Zn in t){const{schemaUtils:e}=s;t=e.retrieveSchema({$ref:t[Zn]},r),o=t.type,i=t.const,l=t.default}o||!(zn in t)&&!(Gn in t)||(o="object")}const c=this.getAvailableKey("newKey",a),d=null!==(t=null!=i?i:l)&&void 0!==t?t:this.getDefaultValue(o);Ns()(a,c,d),n(a)}}isRequired(e){const{schema:t}=this.props;return Array.isArray(t.required)&&-1!==t.required.indexOf(e)}getDefaultValue(e){const{registry:{translateString:t}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return t(bo.NewStringDefault)}}render(){var e,t,r,n;const{schema:s,uiSchema:a={},formData:o,errorSchema:i,idSchema:l,name:c,required:d=!1,disabled:u,readonly:h,hideError:m,idPrefix:p,idSeparator:f,onBlur:g,onFocus:y,registry:v,title:b}=this.props,{fields:w,formContext:S,schemaUtils:C,translateString:x,globalUiOptions:E}=v,{SchemaField:$}=w,_=C.retrieveSchema(s,o),A=ss(a,E),{properties:k={}}=_,P=null!==(r=null!==(t=null!==(e=A.title)&&void 0!==e?e:_.title)&&void 0!==t?t:b)&&void 0!==r?r:c,T=null!==(n=A.description)&&void 0!==n?n:_.description;let I;try{I=function(e,t){if(!Array.isArray(t))return e;const r=e=>e.reduce(((e,t)=>(e[t]=!0,e)),{}),n=r(e),s=t.filter((e=>"*"===e||n[e])),a=r(s),o=e.filter((e=>!a[e])),i=s.indexOf("*");if(-1===i){if(o.length)throw new Error("uiSchema order list does not contain "+((l=o).length>1?`properties '${l.join("', '")}'`:`property '${l[0]}'`));return s}var l;if(i!==s.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const c=[...s];return c.splice(i,1,...o),c}(Object.keys(k),A.order)}catch(e){return(0,Fn.jsxs)("div",{children:[(0,Fn.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,Fn.jsx)(hc,{options:{disableParsingRawHTML:!0},children:x(bo.InvalidObjectField,[c||"root",e.message])})}),(0,Fn.jsx)("pre",{children:JSON.stringify(_)})]})}const D=Qa("ObjectFieldTemplate",v,A),O={title:!1===A.label?"":P,description:!1===A.label?void 0:T,properties:I.map((e=>{const t=bs()(_,[Jn,e,Yn]),r=t?a.additionalProperties:a[e],n="hidden"===ss(r).widget,s=ms()(l,[e],{});return{content:(0,Fn.jsx)($,{name:e,required:this.isRequired(e),schema:ms()(_,[Jn,e],{}),uiSchema:r,errorSchema:ms()(i,e),idSchema:s,idPrefix:p,idSeparator:f,formData:ms()(o,e),formContext:S,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(e),onChange:this.onPropertyChange(e,t),onBlur:g,onFocus:y,registry:v,disabled:u,readonly:h,hideError:m,onDropPropertyClick:this.onDropPropertyClick},e),name:e,readonly:h,disabled:u,required:d,hidden:n}})),readonly:h,disabled:u,required:d,idSchema:l,uiSchema:a,errorSchema:i,schema:_,formData:o,formContext:S,registry:v};return(0,Fn.jsx)(D,{...O,onAddClick:this.handleAddClick})}}const gc=fc,yc={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function vc(e){var t,r,s;const{schema:a,idSchema:o,uiSchema:i,formData:l,errorSchema:c,idPrefix:d,idSeparator:u,name:h,onChange:m,onKeyChange:p,onDropPropertyClick:f,required:g,registry:y,wasPropertyKeyModified:v=!1}=e,{formContext:b,schemaUtils:w,globalUiOptions:S}=y,C=ss(i,S),x=Qa("FieldTemplate",y,C),E=Qa("DescriptionFieldTemplate",y,C),$=Qa("FieldHelpTemplate",y,C),_=Qa("FieldErrorTemplate",y,C),A=w.retrieveSchema(a,l),k=o[Hn],P=ma(w.toIdSchema(A,k,l,d,u),o),T=(0,n.useCallback)(((e,t,r)=>m(e,t,r||k)),[k,m]),I=function(e,t,r,n){const s=t.field,{fields:a,translateString:o}=n;if("function"==typeof s)return s;if("string"==typeof s&&s in a)return a[s];const i=Qs(e),l=Array.isArray(i)?i[0]:i||"",c=e.$id;let d=yc[l];return c&&c in a&&(d=c),d||!e.anyOf&&!e.oneOf?d in a?a[d]:()=>{const s=Qa("UnsupportedFieldTemplate",n,t);return(0,Fn.jsx)(s,{schema:e,idSchema:r,reason:o(bo.UnknownFieldType,[String(e.type)]),registry:n})}:()=>null}(A,C,P,y),D=Boolean(null!==(t=C.disabled)&&void 0!==t?t:e.disabled),O=Boolean(null!==(r=C.readonly)&&void 0!==r?r:e.readonly||e.schema.readOnly||A.readOnly),N=C.hideError,R=void 0===N?e.hideError:Boolean(N),M=Boolean(null!==(s=C.autofocus)&&void 0!==s?s:e.autofocus);if(0===Object.keys(A).length)return null;const F=w.getDisplayLabel(A,i,S),{__errors:j,...L}=c||{},Y=Oe()(i,["ui:classNames","classNames","ui:style"]);ns in Y&&(Y[ns]=Oe()(Y[ns],["classNames","style"]));const q=(0,Fn.jsx)(I,{...e,onChange:T,idSchema:P,schema:A,uiSchema:Y,disabled:D,readonly:O,hideError:R,autofocus:M,errorSchema:L,formContext:b,rawErrors:j}),U=P[Hn];let z;z=v||Yn in A?h:C.title||e.schema.title||A.title||e.title||h;const B=C.description||e.schema.description||A.description||"",W=C.enableMarkdownInDescription?(0,Fn.jsx)(hc,{options:{disableParsingRawHTML:!0},children:B}):B,V=C.help,H="hidden"===C.widget,K=["form-group","field",`field-${Qs(A)}`];!R&&j&&j.length>0&&K.push("field-error has-error has-danger"),(null==i?void 0:i.classNames)&&K.push(i.classNames),C.classNames&&K.push(C.classNames);const Q=(0,Fn.jsx)($,{help:V,idSchema:P,schema:A,uiSchema:i,hasErrors:!R&&j&&j.length>0,registry:y}),G=R||(A.anyOf||A.oneOf)&&!w.isSelect(A)?void 0:(0,Fn.jsx)(_,{errors:j,errorSchema:c,idSchema:P,schema:A,uiSchema:i,registry:y}),J={description:(0,Fn.jsx)(E,{id:eo(U),description:W,schema:A,uiSchema:i,registry:y}),rawDescription:B,help:Q,rawHelp:"string"==typeof V?V:void 0,errors:G,rawErrors:R?void 0:j,id:U,label:z,hidden:H,onChange:m,onKeyChange:p,onDropPropertyClick:f,required:g,disabled:D,readonly:O,hideError:R,displayLabel:F,classNames:K.join(" ").trim(),style:C.style,formContext:b,formData:l,schema:A,uiSchema:i,registry:y},X=y.fields.AnyOfField,Z=y.fields.OneOfField,ee=(null==i?void 0:i["ui:field"])&&!0===(null==i?void 0:i["ui:fieldReplacesAnyOrOneOf"]);return(0,Fn.jsx)(x,{...J,children:(0,Fn.jsxs)(Fn.Fragment,{children:[q,A.anyOf&&!ee&&!w.isSelect(A)&&(0,Fn.jsx)(X,{name:h,disabled:D,readonly:O,hideError:R,errorSchema:c,formData:l,formContext:b,idPrefix:d,idSchema:P,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:A.anyOf.map((e=>w.retrieveSchema(xs()(e)?e:{},l))),registry:y,required:g,schema:A,uiSchema:i}),A.oneOf&&!ee&&!w.isSelect(A)&&(0,Fn.jsx)(Z,{name:h,disabled:D,readonly:O,hideError:R,errorSchema:c,formData:l,formContext:b,idPrefix:d,idSchema:P,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:A.oneOf.map((e=>w.retrieveSchema(xs()(e)?e:{},l))),registry:y,required:g,schema:A,uiSchema:i})]})})}class bc extends n.Component{shouldComponentUpdate(e){return!us(this.props,e)}render(){return(0,Fn.jsx)(vc,{...this.props})}}const wc=bc,Sc=function(e){var t;const{schema:r,name:n,uiSchema:s,idSchema:a,formData:o,required:i,disabled:l=!1,readonly:c=!1,autofocus:d=!1,onChange:u,onBlur:h,onFocus:m,registry:p,rawErrors:f,hideError:g}=e,{title:y,format:v}=r,{widgets:b,formContext:w,schemaUtils:S,globalUiOptions:C}=p,x=S.isSelect(r)?va(r,s):void 0;let E=x?"select":"text";v&&function(e,t,r={}){try{return Xa(e,t,r),!0}catch(e){const t=e;if(t.message&&(t.message.startsWith("No widget")||t.message.startsWith("Unsupported widget")))return!1;throw e}}(r,v,b)&&(E=v);const{widget:$=E,placeholder:_="",title:A,...k}=ss(s),P=S.getDisplayLabel(r,s,C),T=null!==(t=null!=A?A:y)&&void 0!==t?t:n,I=Xa(r,$,b);return(0,Fn.jsx)(I,{options:{...k,enumOptions:x},schema:r,uiSchema:s,id:a.$id,name:n,label:T,hideLabel:!P,hideError:g,value:o,onChange:u,onBlur:h,onFocus:m,required:i,disabled:l,readonly:c,formContext:w,autofocus:d,registry:p,placeholder:_,rawErrors:f})},Cc=function(e){const{formData:t,onChange:r}=e;return(0,n.useEffect)((()=>{void 0===t&&r(null)}),[t,r]),null};function xc(e){const{idSchema:t,description:r,registry:n,schema:s,uiSchema:a}=e,o=ss(a,n.globalUiOptions),{label:i=!0}=o;if(!r||!i)return null;const l=Qa("DescriptionFieldTemplate",n,o);return(0,Fn.jsx)(l,{id:eo(t),description:r,schema:s,uiSchema:a,registry:n})}function Ec(e){const{children:t,className:r,disabled:n,hasToolbar:s,hasMoveDown:a,hasMoveUp:o,hasRemove:i,hasCopy:l,index:c,onCopyIndexClick:d,onDropIndexClick:u,onReorderClick:h,readonly:m,registry:p,uiSchema:f}=e,{CopyButton:g,MoveDownButton:y,MoveUpButton:v,RemoveButton:b}=p.templates.ButtonTemplates,w={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,Fn.jsxs)("div",{className:r,children:[(0,Fn.jsx)("div",{className:s?"col-xs-9":"col-xs-12",children:t}),s&&(0,Fn.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,Fn.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(o||a)&&(0,Fn.jsx)(v,{style:w,disabled:n||m||!o,onClick:h(c,c-1),uiSchema:f,registry:p}),(o||a)&&(0,Fn.jsx)(y,{style:w,disabled:n||m||!a,onClick:h(c,c+1),uiSchema:f,registry:p}),l&&(0,Fn.jsx)(g,{style:w,disabled:n||m,onClick:d(c),uiSchema:f,registry:p}),i&&(0,Fn.jsx)(b,{style:w,disabled:n||m,onClick:u(c),uiSchema:f,registry:p})]})})]})}function $c(e){const{canAdd:t,className:r,disabled:n,idSchema:s,uiSchema:a,items:o,onAddClick:i,readonly:l,registry:c,required:d,schema:u,title:h}=e,m=ss(a),p=Qa("ArrayFieldDescriptionTemplate",c,m),f=Qa("ArrayFieldItemTemplate",c,m),g=Qa("ArrayFieldTitleTemplate",c,m),{ButtonTemplates:{AddButton:y}}=c.templates;return(0,Fn.jsxs)("fieldset",{className:r,id:s.$id,children:[(0,Fn.jsx)(g,{idSchema:s,title:m.title||h,required:d,schema:u,uiSchema:a,registry:c}),(0,Fn.jsx)(p,{idSchema:s,description:m.description||u.description,schema:u,uiSchema:a,registry:c}),(0,Fn.jsx)("div",{className:"row array-item-list",children:o&&o.map((({key:e,...t})=>(0,Fn.jsx)(f,{...t},e)))}),t&&(0,Fn.jsx)(y,{className:"array-item-add",onClick:i,disabled:n||l,uiSchema:a,registry:c})]})}function _c(e){const{idSchema:t,title:r,schema:n,uiSchema:s,required:a,registry:o}=e,i=ss(s,o.globalUiOptions),{label:l=!0}=i;if(!r||!l)return null;const c=Qa("TitleFieldTemplate",o,i);return(0,Fn.jsx)(c,{id:so(t),title:r,required:a,schema:n,uiSchema:s,registry:o})}function Ac(e){const{id:t,name:r,value:s,readonly:a,disabled:o,autofocus:i,onBlur:l,onFocus:c,onChange:d,onChangeOverride:u,options:h,schema:m,uiSchema:p,formContext:f,registry:g,rawErrors:y,type:v,hideLabel:b,hideError:w,...S}=e;if(!t)throw console.log("No id for",e),new Error(`no id for props ${JSON.stringify(e)}`);const C={...S,...Ha(m,v,h)};let x;x="number"===C.type||"integer"===C.type?s||0===s?s:"":null==s?"":s;const E=(0,n.useCallback)((({target:{value:e}})=>d(""===e?h.emptyValue:e)),[d,h]),$=(0,n.useCallback)((({target:e})=>l(t,e&&e.value)),[l,t]),_=(0,n.useCallback)((({target:e})=>c(t,e&&e.value)),[c,t]);return(0,Fn.jsxs)(Fn.Fragment,{children:[(0,Fn.jsx)("input",{id:t,name:t,className:"form-control",readOnly:a,disabled:o,autoFocus:i,value:x,...C,list:m.examples?ro(t):void 0,onChange:u||E,onBlur:$,onFocus:_,"aria-describedby":ao(t,!!m.examples)}),Array.isArray(m.examples)&&(0,Fn.jsx)("datalist",{id:ro(t),children:m.examples.concat(m.default&&!m.examples.includes(m.default)?[m.default]:[]).map((e=>(0,Fn.jsx)("option",{value:e},e)))},`datalist_${t}`)]})}function kc({uiSchema:e}){const{submitText:t,norender:r,props:n={}}=function(e={}){const t=ss(e);if(t&&t[Xn]){const e=t[Xn];return{...Ka,...e}}return Ka}(e);return r?null:(0,Fn.jsx)("div",{children:(0,Fn.jsx)("button",{type:"submit",...n,className:`btn btn-info ${n.className||""}`,children:t})})}function Pc(e){const{iconType:t="default",icon:r,className:n,uiSchema:s,registry:a,...o}=e;return(0,Fn.jsx)("button",{type:"button",className:`btn btn-${t} ${n}`,...o,children:(0,Fn.jsx)("i",{className:`glyphicon glyphicon-${r}`})})}function Tc(e){const{registry:{translateString:t}}=e;return(0,Fn.jsx)(Pc,{title:t(bo.CopyButton),className:"array-item-copy",...e,icon:"copy"})}function Ic(e){const{registry:{translateString:t}}=e;return(0,Fn.jsx)(Pc,{title:t(bo.MoveDownButton),className:"array-item-move-down",...e,icon:"arrow-down"})}function Dc(e){const{registry:{translateString:t}}=e;return(0,Fn.jsx)(Pc,{title:t(bo.MoveUpButton),className:"array-item-move-up",...e,icon:"arrow-up"})}function Oc(e){const{registry:{translateString:t}}=e;return(0,Fn.jsx)(Pc,{title:t(bo.RemoveButton),className:"array-item-remove",...e,iconType:"danger",icon:"remove"})}function Nc({className:e,onClick:t,disabled:r,registry:n}){const{translateString:s}=n;return(0,Fn.jsx)("div",{className:"row",children:(0,Fn.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${e}`,children:(0,Fn.jsx)(Pc,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:s(bo.AddButton),onClick:t,disabled:r,registry:n})})})}function Rc(e){const{id:t,description:r}=e;return r?"string"==typeof r?(0,Fn.jsx)("p",{id:t,className:"field-description",children:r}):(0,Fn.jsx)("div",{id:t,className:"field-description",children:r}):null}function Mc({errors:e,registry:t}){const{translateString:r}=t;return(0,Fn.jsxs)("div",{className:"panel panel-danger errors",children:[(0,Fn.jsx)("div",{className:"panel-heading",children:(0,Fn.jsx)("h3",{className:"panel-title",children:r(bo.ErrorsLabel)})}),(0,Fn.jsx)("ul",{className:"list-group",children:e.map(((e,t)=>(0,Fn.jsx)("li",{className:"list-group-item text-danger",children:e.stack},t)))})]})}function Fc(e){const{label:t,required:r,id:n}=e;return t?(0,Fn.jsxs)("label",{className:"control-label",htmlFor:n,children:[t,r&&(0,Fn.jsx)("span",{className:"required",children:"*"})]}):null}const jc=function(e){const{id:t,label:r,children:n,errors:s,help:a,description:o,hidden:i,required:l,displayLabel:c,registry:d,uiSchema:u}=e,h=Qa("WrapIfAdditionalTemplate",d,ss(u));return i?(0,Fn.jsx)("div",{className:"hidden",children:n}):(0,Fn.jsxs)(h,{...e,children:[c&&(0,Fn.jsx)(Fc,{label:r,required:l,id:t}),c&&o?o:null,n,s,a]})};function Lc(e){const{errors:t=[],idSchema:r}=e;if(0===t.length)return null;const n=to(r);return(0,Fn.jsx)("div",{children:(0,Fn.jsx)("ul",{id:n,className:"error-detail bs-callout bs-callout-info",children:t.filter((e=>!!e)).map(((e,t)=>(0,Fn.jsx)("li",{className:"text-danger",children:e},t)))})})}function Yc(e){const{idSchema:t,help:r}=e;if(!r)return null;const n=no(t);return"string"==typeof r?(0,Fn.jsx)("p",{id:n,className:"help-block",children:r}):(0,Fn.jsx)("div",{id:n,className:"help-block",children:r})}function qc(e){const{description:t,disabled:r,formData:n,idSchema:s,onAddClick:a,properties:o,readonly:i,registry:l,required:c,schema:d,title:u,uiSchema:h}=e,m=ss(h),p=Qa("TitleFieldTemplate",l,m),f=Qa("DescriptionFieldTemplate",l,m),{ButtonTemplates:{AddButton:g}}=l.templates;return(0,Fn.jsxs)("fieldset",{id:s.$id,children:[u&&(0,Fn.jsx)(p,{id:so(s),title:u,required:c,schema:d,uiSchema:h,registry:l}),t&&(0,Fn.jsx)(f,{id:eo(s),description:t,schema:d,uiSchema:h,registry:l}),o.map((e=>e.content)),as(d,h,n)&&(0,Fn.jsx)(g,{className:"object-property-expand",onClick:a(d),disabled:r||i,uiSchema:h,registry:l})]})}function Uc(e){const{id:t,title:r,required:n}=e;return(0,Fn.jsxs)("legend",{id:t,children:[r,n&&(0,Fn.jsx)("span",{className:"required",children:"*"})]})}const zc=function(e){const{schema:t,idSchema:r,reason:n,registry:s}=e,{translateString:a}=s;let o=bo.UnsupportedField;const i=[];return r&&r.$id&&(o=bo.UnsupportedFieldWithId,i.push(r.$id)),n&&(o=o===bo.UnsupportedField?bo.UnsupportedFieldWithReason:bo.UnsupportedFieldWithIdAndReason,i.push(n)),(0,Fn.jsxs)("div",{className:"unsupported-field",children:[(0,Fn.jsx)("p",{children:(0,Fn.jsx)(hc,{options:{disableParsingRawHTML:!0},children:a(o,i)})}),t&&(0,Fn.jsx)("pre",{children:JSON.stringify(t,null,2)})]})};function Bc(e){const{id:t,classNames:r,style:n,disabled:s,label:a,onKeyChange:o,onDropPropertyClick:i,readonly:l,required:c,schema:d,children:u,uiSchema:h,registry:m}=e,{templates:p,translateString:f}=m,{RemoveButton:g}=p.ButtonTemplates,y=f(bo.KeyLabel,[a]);return Yn in d?(0,Fn.jsx)("div",{className:r,style:n,children:(0,Fn.jsxs)("div",{className:"row",children:[(0,Fn.jsx)("div",{className:"col-xs-5 form-additional",children:(0,Fn.jsxs)("div",{className:"form-group",children:[(0,Fn.jsx)(Fc,{label:y,required:c,id:`${t}-key`}),(0,Fn.jsx)("input",{className:"form-control",type:"text",id:`${t}-key`,onBlur:({target:e})=>o(e&&e.value),defaultValue:a})]})}),(0,Fn.jsx)("div",{className:"form-additional form-group col-xs-5",children:u}),(0,Fn.jsx)("div",{className:"col-xs-2",children:(0,Fn.jsx)(g,{className:"array-item-remove btn-block",style:{border:"0"},disabled:s||l,onClick:i(a),uiSchema:h,registry:m})})]})}):(0,Fn.jsx)("div",{className:r,style:n,children:u})}function Wc({type:e,range:t,value:r,select:n,rootId:s,name:a,disabled:o,readonly:i,autofocus:l,registry:c,onBlur:d,onFocus:u}){const h=s+"_"+e,{SelectWidget:m}=c.widgets;return(0,Fn.jsx)(m,{schema:{type:"integer"},id:h,name:a,className:"form-control",options:{enumOptions:Ma(t[0],t[1])},placeholder:e,value:r,disabled:o,readonly:i,autofocus:l,onChange:t=>n(e,t),onBlur:d,onFocus:u,registry:c,label:"","aria-describedby":ao(s)})}const Vc=function({time:e=!1,disabled:t=!1,readonly:r=!1,autofocus:s=!1,options:a,id:o,name:i,registry:l,onBlur:c,onFocus:d,onChange:u,value:h}){const{translateString:m}=l,[p,f]=(0,n.useState)(h),[g,y]=(0,n.useReducer)(((e,t)=>({...e,...t})),lo(h,e));(0,n.useEffect)((()=>{const t=uo(g,e);!function(e){return Object.values(e).every((e=>-1!==e))}(g)||t===h?p!==h&&(f(h),y(lo(h,e))):u(t)}),[e,h,u,g,p]);const v=(0,n.useCallback)(((e,t)=>{y({[e]:t})}),[]),b=(0,n.useCallback)((n=>{if(n.preventDefault(),t||r)return;const s=lo((new Date).toJSON(),e);u(uo(s,e))}),[t,r,e]),w=(0,n.useCallback)((e=>{e.preventDefault(),t||r||u(void 0)}),[t,r,u]);return(0,Fn.jsxs)("ul",{className:"list-inline",children:[Wa(g,e,a.yearsRange,a.format).map(((e,n)=>(0,Fn.jsx)("li",{className:"list-inline-item",children:(0,Fn.jsx)(Wc,{rootId:o,name:i,select:v,...e,disabled:t,readonly:r,registry:l,onBlur:c,onFocus:d,autofocus:s&&0===n})},n))),("undefined"===a.hideNowButton||!a.hideNowButton)&&(0,Fn.jsx)("li",{className:"list-inline-item",children:(0,Fn.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:b,children:m(bo.NowLabel)})}),("undefined"===a.hideClearButton||!a.hideClearButton)&&(0,Fn.jsx)("li",{className:"list-inline-item",children:(0,Fn.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:w,children:m(bo.ClearLabel)})})]})},Hc=function({time:e=!0,...t}){const{AltDateWidget:r}=t.registry.widgets;return(0,Fn.jsx)(r,{time:e,...t})},Kc=function({schema:e,uiSchema:t,options:r,id:s,value:a,disabled:o,readonly:i,label:l,hideLabel:c,autofocus:d=!1,onBlur:u,onFocus:h,onChange:m,registry:p}){var f;const g=Qa("DescriptionFieldTemplate",p,r),y=co(e),v=(0,n.useCallback)((e=>m(e.target.checked)),[m]),b=(0,n.useCallback)((e=>u(s,e.target.checked)),[u,s]),w=(0,n.useCallback)((e=>h(s,e.target.checked)),[h,s]),S=null!==(f=r.description)&&void 0!==f?f:e.description;return(0,Fn.jsxs)("div",{className:"checkbox "+(o||i?"disabled":""),children:[!c&&!!S&&(0,Fn.jsx)(g,{id:eo(s),description:S,schema:e,uiSchema:t,registry:p}),(0,Fn.jsxs)("label",{children:[(0,Fn.jsx)("input",{type:"checkbox",id:s,name:s,checked:void 0!==a&&a,required:y,disabled:o||i,autoFocus:d,onChange:v,onBlur:b,onFocus:w,"aria-describedby":ao(s)}),io((0,Fn.jsx)("span",{children:l}),c)]})]})},Qc=function({id:e,disabled:t,options:{inline:r=!1,enumOptions:s,enumDisabled:a,emptyValue:o},value:i,autofocus:l=!1,readonly:c,onChange:d,onBlur:u,onFocus:h}){const m=Array.isArray(i)?i:[i],p=(0,n.useCallback)((({target:t})=>u(e,ja(t&&t.value,s,o))),[u,e]),f=(0,n.useCallback)((({target:t})=>h(e,ja(t&&t.value,s,o))),[h,e]);return(0,Fn.jsx)("div",{className:"checkboxes",id:e,children:Array.isArray(s)&&s.map(((n,o)=>{const i=La(n.value,m),u=Array.isArray(a)&&-1!==a.indexOf(n.value),h=t||u||c?"disabled":"",g=(0,Fn.jsxs)("span",{children:[(0,Fn.jsx)("input",{type:"checkbox",id:oo(e,o),name:e,checked:i,value:String(o),disabled:t||u||c,autoFocus:l&&0===o,onChange:e=>{e.target.checked?d(function(e,t,r=[]){const n=ja(e,r);if(!ua()(n)){const e=r.findIndex((e=>n===e.value)),s=r.map((({value:e})=>e));return t.slice(0,e).concat(n,t.slice(e)).sort(((e,t)=>Number(s.indexOf(e)>s.indexOf(t))))}return t}(o,m,s)):d(function(e,t,r=[]){const n=ja(e,r);return Array.isArray(t)?t.filter((e=>!us(e,n))):us(n,t)?void 0:t}(o,m,s))},onBlur:p,onFocus:f,"aria-describedby":ao(e)}),(0,Fn.jsx)("span",{children:n.label})]});return r?(0,Fn.jsx)("label",{className:`checkbox-inline ${h}`,children:g},o):(0,Fn.jsx)("div",{className:`checkbox ${h}`,children:(0,Fn.jsx)("label",{children:g})},o)}))})};function Gc(e){const{disabled:t,readonly:r,options:n,registry:s}=e,a=Qa("BaseInputTemplate",s,n);return(0,Fn.jsx)(a,{type:"color",...e,disabled:t||r})}function Jc(e){const{onChange:t,options:r,registry:s}=e,a=Qa("BaseInputTemplate",s,r),o=(0,n.useCallback)((e=>t(e||void 0)),[t]);return(0,Fn.jsx)(a,{type:"date",...e,onChange:o})}function Xc(e){const{onChange:t,value:r,options:n,registry:s}=e,a=Qa("BaseInputTemplate",s,n);return(0,Fn.jsx)(a,{type:"datetime-local",...e,value:go(r),onChange:e=>{return t((r=e)?new Date(r).toJSON():void 0);var r}})}function Zc(e){const{options:t,registry:r}=e,n=Qa("BaseInputTemplate",r,t);return(0,Fn.jsx)(n,{type:"email",...e})}function ed(e,t){return null===e?null:e.replace(";base64",`;name=${encodeURIComponent(t)};base64`)}function td(e){const{name:t,size:r,type:n}=e;return new Promise(((s,a)=>{const o=new window.FileReader;o.onerror=a,o.onload=e=>{var a;"string"==typeof(null===(a=e.target)||void 0===a?void 0:a.result)?s({dataURL:ed(e.target.result,t),name:t,size:r,type:n}):s({dataURL:null,name:t,size:r,type:n})},o.readAsDataURL(e)}))}function rd({fileInfo:e,registry:t}){const{translateString:r}=t,{dataURL:n,type:s,name:a}=e;return n?["image/jpeg","image/png"].includes(s)?(0,Fn.jsx)("img",{src:n,style:{maxWidth:"100%"},className:"file-preview"}):(0,Fn.jsxs)(Fn.Fragment,{children:[" ",(0,Fn.jsx)("a",{download:`preview-${a}`,href:n,className:"file-download",children:r(bo.PreviewLabel)})]}):null}function nd({filesInfo:e,registry:t,preview:r,onRemove:n,options:s}){if(0===e.length)return null;const{translateString:a}=t,{RemoveButton:o}=Qa("ButtonTemplates",t,s);return(0,Fn.jsx)("ul",{className:"file-info",children:e.map(((e,s)=>{const{name:i,size:l,type:c}=e;return(0,Fn.jsxs)("li",{children:[(0,Fn.jsx)(hc,{children:a(bo.FilesInfo,[i,c,String(l)])}),r&&(0,Fn.jsx)(rd,{fileInfo:e,registry:t}),(0,Fn.jsx)(o,{onClick:()=>n(s),registry:t})]},s)}))})}const sd=function(e){const{disabled:t,readonly:r,required:s,multiple:a,onChange:o,value:i,options:l,registry:c}=e,d=Qa("BaseInputTemplate",c,l),u=(0,n.useCallback)((e=>{var t;e.target.files&&(t=e.target.files,Promise.all(Array.from(t).map(td))).then((e=>{const t=e.map((e=>e.dataURL));o(a?i.concat(t):t[0])}))}),[a,i,o]),h=(0,n.useMemo)((()=>(Array.isArray(i)?i:[i]).reduce(((e,t)=>{if(!t)return e;try{const{blob:r,name:n}=function(e){var t;if(-1===e.indexOf("data:"))throw new Error("File is invalid: URI must be a dataURI");const r=e.slice(5).split(";base64,");if(2!==r.length)throw new Error("File is invalid: dataURI must be base64");const[n,s]=r,[a,...o]=n.split(";"),i=a||"",l=decodeURI((null===(t=o.map((e=>e.split("="))).find((([e])=>"name"===e)))||void 0===t?void 0:t[1])||"unknown");try{const e=atob(s),t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return{blob:new window.Blob([new Uint8Array(t)],{type:i}),name:l}}catch(e){throw new Error("File is invalid: "+e.message)}}(t);return[...e,{dataURL:t,name:n,size:r.size,type:r.type}]}catch(t){return e}}),[])),[i]),m=(0,n.useCallback)((e=>{if(a){const t=i.filter(((t,r)=>r!==e));o(t)}else o(void 0)}),[a,i,o]);return(0,Fn.jsxs)("div",{children:[(0,Fn.jsx)(d,{...e,disabled:t||r,type:"file",required:!i&&s,onChangeOverride:u,value:"",accept:l.accept?String(l.accept):void 0}),(0,Fn.jsx)(nd,{filesInfo:h,onRemove:m,registry:c,preview:l.filePreview,options:l})]})},ad=function({id:e,value:t}){return(0,Fn.jsx)("input",{type:"hidden",id:e,name:e,value:void 0===t?"":t})};function od(e){const{options:t,registry:r}=e,n=Qa("BaseInputTemplate",r,t);return(0,Fn.jsx)(n,{type:"password",...e})}const id=function({options:e,value:t,required:r,disabled:s,readonly:a,autofocus:o=!1,onBlur:i,onFocus:l,onChange:c,id:d}){const{enumOptions:u,enumDisabled:h,inline:m,emptyValue:p}=e,f=(0,n.useCallback)((({target:e})=>i(d,ja(e&&e.value,u,p))),[i,d]),g=(0,n.useCallback)((({target:e})=>l(d,ja(e&&e.value,u,p))),[l,d]);return(0,Fn.jsx)("div",{className:"field-radio-group",id:d,children:Array.isArray(u)&&u.map(((e,n)=>{const i=La(e.value,t),l=Array.isArray(h)&&-1!==h.indexOf(e.value),u=s||l||a?"disabled":"",p=(0,Fn.jsxs)("span",{children:[(0,Fn.jsx)("input",{type:"radio",id:oo(d,n),checked:i,name:d,required:r,value:String(n),disabled:s||l||a,autoFocus:o&&0===n,onChange:()=>c(e.value),onBlur:f,onFocus:g,"aria-describedby":ao(d)}),(0,Fn.jsx)("span",{children:e.label})]});return m?(0,Fn.jsx)("label",{className:`radio-inline ${u}`,children:p},n):(0,Fn.jsx)("div",{className:`radio ${u}`,children:(0,Fn.jsx)("label",{children:p})},n)}))})};function ld(e){const{value:t,registry:{templates:{BaseInputTemplate:r}}}=e;return(0,Fn.jsxs)("div",{className:"field-range-wrapper",children:[(0,Fn.jsx)(r,{type:"range",...e}),(0,Fn.jsx)("span",{className:"range-view",children:t})]})}function cd(e,t){return t?Array.from(e.target.options).slice().filter((e=>e.selected)).map((e=>e.value)):e.target.value}const dd=function({schema:e,id:t,options:r,value:s,required:a,disabled:o,readonly:i,multiple:l=!1,autofocus:c=!1,onChange:d,onBlur:u,onFocus:h,placeholder:m}){const{enumOptions:p,enumDisabled:f,emptyValue:g}=r,y=l?[]:"",v=(0,n.useCallback)((e=>{const r=cd(e,l);return h(t,ja(r,p,g))}),[h,t,e,l,p,g]),b=(0,n.useCallback)((e=>{const r=cd(e,l);return u(t,ja(r,p,g))}),[u,t,e,l,p,g]),w=(0,n.useCallback)((e=>{const t=cd(e,l);return d(ja(t,p,g))}),[d,e,l,p,g]),S=function(e,t=[],r=!1){const n=t.map(((t,r)=>La(t.value,e)?String(r):void 0)).filter((e=>void 0!==e));return r?n:n[0]}(s,p,l),C=!l&&void 0===e.default;return(0,Fn.jsxs)("select",{id:t,name:t,multiple:l,className:"form-control",value:void 0===S?y:S,required:a,disabled:o||i,autoFocus:c,onBlur:b,onFocus:v,onChange:w,"aria-describedby":ao(t),children:[C&&(0,Fn.jsx)("option",{value:"",children:m}),Array.isArray(p)&&p.map((({value:e,label:t},r)=>{const n=f&&-1!==f.indexOf(e);return(0,Fn.jsx)("option",{value:String(r),disabled:n,children:t},r)}))]})};function ud({id:e,options:t={},placeholder:r,value:s,required:a,disabled:o,readonly:i,autofocus:l=!1,onChange:c,onBlur:d,onFocus:u}){const h=(0,n.useCallback)((({target:{value:e}})=>c(""===e?t.emptyValue:e)),[c,t.emptyValue]),m=(0,n.useCallback)((({target:t})=>d(e,t&&t.value)),[d,e]),p=(0,n.useCallback)((({target:t})=>u(e,t&&t.value)),[e,u]);return(0,Fn.jsx)("textarea",{id:e,name:e,className:"form-control",value:s||"",placeholder:r,required:a,disabled:o,readOnly:i,autoFocus:l,rows:t.rows,onBlur:m,onFocus:p,onChange:h,"aria-describedby":ao(e)})}ud.defaultProps={autofocus:!1,options:{}};const hd=ud;function md(e){const{options:t,registry:r}=e,n=Qa("BaseInputTemplate",r,t);return(0,Fn.jsx)(n,{...e})}function pd(e){const{onChange:t,options:r,registry:s}=e,a=Qa("BaseInputTemplate",s,r),o=(0,n.useCallback)((e=>t(e?`${e}:00`:void 0)),[t]);return(0,Fn.jsx)(a,{type:"time",...e,onChange:o})}function fd(e){const{options:t,registry:r}=e,n=Qa("BaseInputTemplate",r,t);return(0,Fn.jsx)(n,{type:"url",...e})}function gd(e){const{options:t,registry:r}=e,n=Qa("BaseInputTemplate",r,t);return(0,Fn.jsx)(n,{type:"number",...e})}class yd extends n.Component{constructor(e){if(super(e),this.getUsedFormData=(e,t)=>{if(0===t.length&&"object"!=typeof e)return e;const r=$()(e,t);return Array.isArray(e)?Object.keys(r).map((e=>r[e])):r},this.getFieldNames=(e,t)=>{const r=(e,n=[],s=[[]])=>(Object.keys(e).forEach((a=>{if("object"==typeof e[a]){const t=s.map((e=>[...e,a]));e[a][es]&&""!==e[a][Qn]?n.push(e[a][Qn]):r(e[a],n,t)}else a===Qn&&""!==e[a]&&s.forEach((e=>{const r=ms()(t,e);("object"!=typeof r||L()(r)||Array.isArray(r)&&r.every((e=>"object"!=typeof e)))&&n.push(e)}))})),n);return r(e)},this.omitExtraData=e=>{const{schema:t,schemaUtils:r}=this.state,n=r.retrieveSchema(t,e),s=r.toPathSchema(n,"",e),a=this.getFieldNames(s,e);return this.getUsedFormData(e,a)},this.onChange=(e,t,r)=>{const{extraErrors:n,omitExtraData:s,liveOmit:a,noValidate:o,liveValidate:i,onChange:l}=this.props,{schemaUtils:c,schema:d}=this.state;let u=this.state.retrievedSchema;if(jn(e)||Array.isArray(e)){const t=this.getStateFromProps(this.props,e);e=t.formData,u=t.retrievedSchema}const h=!o&&i;let m={formData:e,schema:d},p=e;if(!0===s&&!0===a&&(p=this.omitExtraData(e),m={formData:p}),h){const e=this.validate(p,d,c,u);let r=e.errors,s=e.errorSchema;const a=r,o=s;if(n){const t=yo(e,n);s=t.errorSchema,r=t.errors}t&&(s=ma(s,this.filterErrorsBasedOnSchema(t,u,p),"preventDuplicates")),m={formData:p,errors:r,errorSchema:s,schemaValidationErrors:a,schemaValidationErrorSchema:o}}else if(!o&&t){const e=n?ma(t,n,"preventDuplicates"):t;m={formData:p,errorSchema:e,errors:ho(e)}}this.setState(m,(()=>l&&l({...this.state,...m},r)))},this.reset=()=>{const{onChange:e}=this.props,t={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(t,(()=>e&&e({...this.state,...t})))},this.onBlur=(e,t)=>{const{onBlur:r}=this.props;r&&r(e,t)},this.onFocus=(e,t)=>{const{onFocus:r}=this.props;r&&r(e,t)},this.onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:t,extraErrors:r,noValidate:n,onSubmit:s}=this.props;let{formData:a}=this.state;if(!0===t&&(a=this.omitExtraData(a)),n||this.validateFormWithFormData(a)){const t=r||{},n=r?ho(r):[];this.setState({formData:a,errors:n,errorSchema:t,schemaValidationErrors:[],schemaValidationErrorSchema:{}},(()=>{s&&s({...this.state,formData:a,status:"submitted"},e)}))}},this.submit=()=>{if(this.formElement.current){const e=new CustomEvent("submit",{cancelable:!0});e.preventDefault(),this.formElement.current.dispatchEvent(e),this.formElement.current.requestSubmit()}},this.validateFormWithFormData=e=>{const{extraErrors:t,extraErrorsBlockSubmit:r,focusOnFirstError:n,onError:s}=this.props,{errors:a}=this.state,o=this.validate(e);let i=o.errors,l=o.errorSchema;const c=i,d=l,u=i.length>0||t&&r;if(u){if(t){const e=yo(o,t);l=e.errorSchema,i=e.errors}n&&("function"==typeof n?n(i[0]):this.focusOnError(i[0])),this.setState({errors:i,errorSchema:l,schemaValidationErrors:c,schemaValidationErrorSchema:d},(()=>{s?s(i):console.error("Form validation failed",i)}))}else a.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!u},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!us(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,n.createRef)()}getSnapshotBeforeUpdate(e,t){if(!us(this.props,e)){const r=function(e,t){const r=is()(e),n=is()(t);return e===t||!r&&!n?[]:r&&!n?So()(e):!r&&n?So()(t):[...So()(xo()(e,((e,r)=>!us(e,ms()(t,r))))),...$o()(So()(t),So()(e))]}(this.props.formData,e.formData),n=!us(e.schema,this.props.schema),s=r.length>0||!us(e.formData,this.props.formData),a=this.getStateFromProps(this.props,this.props.formData,n||s?void 0:this.state.retrievedSchema,n,r);return{nextState:a,shouldUpdate:!us(a,t)}}return{shouldUpdate:!1}}componentDidUpdate(e,t,r){if(r.shouldUpdate){const{nextState:e}=r;us(e.formData,this.props.formData)||us(e.formData,t.formData)||!this.props.onChange||this.props.onChange(e),this.setState(e)}}getStateFromProps(e,t,r,n=!1,s=[]){var a;const o=this.state||{},i="schema"in e?e.schema:this.props.schema,l=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},c=void 0!==t,d="liveValidate"in e?e.liveValidate:this.props.liveValidate,u=c&&!e.noValidate&&d,h=i,m="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior,p="experimental_customMergeAllOf"in e?e.experimental_customMergeAllOf:this.props.experimental_customMergeAllOf;let f=o.schemaUtils;f&&!f.doesSchemaUtilsDiffer(e.validator,h,m,p)||(f=function(e,t,r={},n){return new Na(e,t,r,n)}(e.validator,h,m,p));const g=f.getDefaultFormState(i,t),y=this.updateRetrievedSchema(null!=r?r:f.retrieveSchema(i,g));let v,b,w=o.schemaValidationErrors,S=o.schemaValidationErrorSchema;if(u){const e=this.validate(g,i,f,y);v=e.errors,b=void 0===r?e.errorSchema:ma(null===(a=this.state)||void 0===a?void 0:a.errorSchema,e.errorSchema,"preventDuplicates"),w=v,S=b}else{const t=e.noValidate||n?{errors:[],errorSchema:{}}:e.liveValidate?{errors:o.errors||[],errorSchema:o.errorSchema||{}}:{errors:o.schemaValidationErrors||[],errorSchema:o.schemaValidationErrorSchema||{}};if(v=t.errors,b=t.errorSchema,s.length>0){const e=s.reduce(((e,t)=>(e[t]=void 0,e)),{});b=S=ma(t.errorSchema,e,"preventDuplicates")}}if(e.extraErrors){const t=yo({errorSchema:b,errors:v},e.extraErrors);b=t.errorSchema,v=t.errors}const C=f.toIdSchema(y,l["ui:rootFieldId"],g,e.idPrefix,e.idSeparator);return{schemaUtils:f,schema:i,uiSchema:l,idSchema:C,formData:g,edit:c,errors:v,errorSchema:b,schemaValidationErrors:w,schemaValidationErrorSchema:S,retrievedSchema:y}}shouldComponentUpdate(e,t){return function(e,t,r){const{props:n,state:s}=e;return!us(n,t)||!us(s,r)}(this,e,t)}validate(e,t=this.props.schema,r,n){const s=r||this.state.schemaUtils,{customValidate:a,transformErrors:o,uiSchema:i}=this.props,l=null!=n?n:s.retrieveSchema(t,e);return s.getValidator().validateFormData(e,l,a,o,i)}renderErrors(e){const{errors:t,errorSchema:r,schema:n,uiSchema:s}=this.state,{formContext:a}=this.props,o=Qa("ErrorListTemplate",e,ss(s));return t&&t.length?(0,Fn.jsx)(o,{errors:t,errorSchema:r||{},schema:n,uiSchema:s,formContext:a,registry:e}):null}filterErrorsBasedOnSchema(e,t,r){const{retrievedSchema:n,schemaUtils:s}=this.state,a=null!=t?t:n,o=s.toPathSchema(a,"",r),i=this.getFieldNames(o,r),l=$()(e,i);"object"!==(null==t?void 0:t.type)&&"array"!==(null==t?void 0:t.type)&&(l.__errors=e.__errors);const c=e=>(Ao()(e,((t,r)=>{ua()(t)?delete e[r]:"object"!=typeof t||Array.isArray(t.__errors)||c(t)})),e);return c(l)}updateRetrievedSchema(e){var t;return us(e,null===(t=this.state)||void 0===t?void 0:t.retrievedSchema)?this.state.retrievedSchema:e}getRegistry(){var e;const{translateString:t,uiSchema:r={}}=this.props,{schemaUtils:n}=this.state,{fields:s,templates:a,widgets:o,formContext:i,translateString:l}={fields:{AnyOfField:Ro,ArrayField:Do,BooleanField:Oo,NumberField:jo,ObjectField:gc,OneOfField:Ro,SchemaField:wc,StringField:Sc,NullField:Cc},templates:{ArrayFieldDescriptionTemplate:xc,ArrayFieldItemTemplate:Ec,ArrayFieldTemplate:$c,ArrayFieldTitleTemplate:_c,ButtonTemplates:{SubmitButton:kc,AddButton:Nc,CopyButton:Tc,MoveDownButton:Ic,MoveUpButton:Dc,RemoveButton:Oc},BaseInputTemplate:Ac,DescriptionFieldTemplate:Rc,ErrorListTemplate:Mc,FieldTemplate:jc,FieldErrorTemplate:Lc,FieldHelpTemplate:Yc,ObjectFieldTemplate:qc,TitleFieldTemplate:Uc,UnsupportedFieldTemplate:zc,WrapIfAdditionalTemplate:Bc},widgets:{AltDateWidget:Vc,AltDateTimeWidget:Hc,CheckboxWidget:Kc,CheckboxesWidget:Qc,ColorWidget:Gc,DateWidget:Jc,DateTimeWidget:Xc,EmailWidget:Zc,FileWidget:sd,HiddenWidget:ad,PasswordWidget:od,RadioWidget:id,RangeWidget:ld,SelectWidget:dd,TextWidget:md,TextareaWidget:hd,TimeWidget:pd,UpDownWidget:gd,URLWidget:fd},rootSchema:{},formContext:{},translateString:Fa};return{fields:{...s,...this.props.fields},templates:{...a,...this.props.templates,ButtonTemplates:{...a.ButtonTemplates,...null===(e=this.props.templates)||void 0===e?void 0:e.ButtonTemplates}},widgets:{...o,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||i,schemaUtils:n,translateString:t||l,globalUiOptions:r["ui:globalOptions"]}}focusOnError(e){const{idPrefix:t="root",idSeparator:r="_"}=this.props,{property:n}=e,s=po()(n);""===s[0]?s[0]=t:s.unshift(t);const a=s.join(r);let o=this.formElement.current.elements[a];o||(o=this.formElement.current.querySelector(`input[id^="${a}"`)),o&&o.length&&(o=o[0]),o&&o.focus()}validateForm(){const{omitExtraData:e}=this.props;let{formData:t}=this.state;return!0===e&&(t=this.omitExtraData(t)),this.validateFormWithFormData(t)}render(){const{children:e,id:t,idPrefix:r,idSeparator:n,className:s="",tagName:a,name:o,method:i,target:l,action:c,autoComplete:d,enctype:u,acceptcharset:h,acceptCharset:m,noHtml5Validate:p=!1,disabled:f,readonly:g,formContext:y,showErrorList:v="top",_internalFormWrapper:b}=this.props,{schema:w,uiSchema:S,formData:C,errorSchema:x,idSchema:E}=this.state,$=this.getRegistry(),{SchemaField:_}=$.fields,{SubmitButton:A}=$.templates.ButtonTemplates,k=b?a:void 0,P=b||a||"form";let{[Xn]:T={}}=ss(S);f&&(T={...T,props:{...T.props,disabled:!0}});const I={[ns]:{[Xn]:T}};return(0,Fn.jsxs)(P,{className:s||"rjsf",id:t,name:o,method:i,target:l,action:c,autoComplete:d,encType:u,acceptCharset:m||h,noValidate:p,onSubmit:this.onSubmit,as:k,ref:this.formElement,children:["top"===v&&this.renderErrors($),(0,Fn.jsx)(_,{name:"",schema:w,uiSchema:S,errorSchema:x,idSchema:E,idPrefix:r,idSeparator:n,formContext:y,formData:C,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:$,disabled:f,readonly:g}),e||(0,Fn.jsx)(A,{uiSchema:I,registry:$}),"bottom"===v&&this.renderErrors($)]})}}const vd=yd;var bd=r(63282),wd=r.n(bd),Sd=r(68182),Cd=r.n(Sd);const xd={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},Ed=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,$d=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function _d(e,t,r,n,s,a,o){const{validationError:i}=t;let l=function(e=[],t){return e.map((e=>{var r;const{instancePath:n,keyword:s,params:a,schemaPath:o,parentSchema:i,...l}=e;let{message:c=""}=l,d=n.replace(/\//g,"."),u=`${d} ${c}`.trim();const h=[...(null===(r=a.deps)||void 0===r?void 0:r.split(", "))||[],a.missingProperty,a.property].filter((e=>e));if(h.length>0)h.forEach((e=>{const r=d?`${d}.${e}`:e;let n=ss(ms()(t,`${r.replace(/^\./,"")}`)).title;if(void 0===n){const r=o.replace(/\/properties\//g,"/").split("/").slice(1,-1).concat([e]);n=ss(ms()(t,r)).title}if(n)c=c.replace(`'${e}'`,`'${n}'`);else{const t=ms()(i,[Jn,e,"title"]);t&&(c=c.replace(`'${e}'`,`'${t}'`))}})),u=c;else{const e=ss(ms()(t,`${d.replace(/^\./,"")}`)).title;if(e)u=`'${e}' ${c}`.trim();else{const e=null==i?void 0:i.title;e&&(u=`'${e}' ${c}`.trim())}}return"missingProperty"in a&&(d=d?`${d}.${a.missingProperty}`:a.missingProperty),{name:s,property:d,message:c,params:a,stack:u,schemaPath:o}}))}(t.errors,o);i&&(l=[...l,{stack:i.message}]),"function"==typeof a&&(l=a(l,o));let c=function(e){const t=new Ba;return e.length&&e.forEach((e=>{const{property:r,message:n}=e,s="."===r?[]:po()(r);s.length>0&&""===s[0]&&s.splice(0,1),n&&t.addErrors(n,s)})),t.ErrorSchema}(l);if(i&&(c={...c,$schema:{__errors:[i.message]}}),"function"!=typeof s)return{errors:l,errorSchema:c};const d=$a(e,n,r,n,!0);return yo({errors:l,errorSchema:c},fo(s(d,ls(d),o)))}class Ad{constructor(e,t){const{additionalMetaSchemas:r,customFormats:n,ajvOptionsOverrides:s,ajvFormatOptions:a,AjvClass:o}=e;this.ajv=function(e,t,r={},n,s=wd()){const a=new s({...xd,...r});return n?Cd()(a,n):!1!==n&&Cd()(a),a.addFormat("data-url",$d),a.addFormat("color",Ed),a.addKeyword(Yn),a.addKeyword(es),Array.isArray(e)&&a.addMetaSchema(e),xs()(t)&&Object.keys(t).forEach((e=>{a.addFormat(e,t[e])})),a}(r,n,s,a,o),this.localizer=t}reset(){this.ajv.removeSchema()}toErrorList(e,t=[]){return ho(e,t)}rawValidation(e,t){var r,n;let s,a,o;e[Hn]&&(a=this.ajv.getSchema(e[Hn]));try{void 0===a&&(a=this.ajv.compile(e)),a(t)}catch(e){s=e}return a&&("function"==typeof this.localizer&&((null!==(r=a.errors)&&void 0!==r?r:[]).forEach((e=>{var t;["missingProperty","property"].forEach((t=>{var r;(null===(r=e.params)||void 0===r?void 0:r[t])&&(e.params[t]=`'${e.params[t]}'`)})),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map((e=>`'${e}'`)).join(", "))})),this.localizer(a.errors),(null!==(n=a.errors)&&void 0!==n?n:[]).forEach((e=>{var t;["missingProperty","property"].forEach((t=>{var r;(null===(r=e.params)||void 0===r?void 0:r[t])&&(e.params[t]=e.params[t].slice(1,-1))})),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map((e=>e.slice(1,-1))).join(", "))}))),o=a.errors||void 0,a.errors=null),{errors:o,validationError:s}}validateFormData(e,t,r,n,s){return _d(this,this.rawValidation(t,e),e,t,r,n,s)}handleSchemaUpdate(e){var t,r;const n=null!==(t=e[Hn])&&void 0!==t?t:ts;void 0===this.ajv.getSchema(n)?this.ajv.addSchema(e,n):us(e,null===(r=this.ajv.getSchema(n))||void 0===r?void 0:r.schema)||(this.ajv.removeSchema(n),this.ajv.addSchema(e,n))}isValid(e,t,r){var n;try{this.handleSchemaUpdate(r);const s=vo(e),a=null!==(n=s[Hn])&&void 0!==n?n:function(e){const t=new Set;return JSON.stringify(e,((e,r)=>(t.add(e),r))),function(e){let t=0;for(let r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t.toString(16)}(JSON.stringify(e,Array.from(t).sort()))}(s);let o;return o=this.ajv.getSchema(a),void 0===o&&(o=this.ajv.addSchema(s,a).getSchema(a)||this.ajv.compile(s)),o(t)}catch(e){return console.warn("Error encountered compiling schema:",e),!1}}}const kd=function(e={}){return new Ad(e,void 0)}();var Pd,Td,Id,Dd,Od=r(41816),Nd=r(74353);function Rd(e,t){e.assign("day",t.date()),e.assign("month",t.month()+1),e.assign("year",t.year())}function Md(e,t){e.assign("hour",t.hour()),e.assign("minute",t.minute()),e.assign("second",t.second()),e.assign("millisecond",t.millisecond()),e.get("hour")<12?e.assign("meridiem",Pd.AM):e.assign("meridiem",Pd.PM)}function Fd(e,t){e.imply("day",t.date()),e.imply("month",t.month()+1),e.imply("year",t.year())}function jd(e,t){e.imply("hour",t.hour()),e.imply("minute",t.minute()),e.imply("second",t.second()),e.imply("millisecond",t.millisecond())}(Dd=Pd||(Pd={}))[Dd.AM=0]="AM",Dd[Dd.PM=1]="PM",function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(Td||(Td={})),function(e){e[e.JANUARY=1]="JANUARY",e[e.FEBRUARY=2]="FEBRUARY",e[e.MARCH=3]="MARCH",e[e.APRIL=4]="APRIL",e[e.MAY=5]="MAY",e[e.JUNE=6]="JUNE",e[e.JULY=7]="JULY",e[e.AUGUST=8]="AUGUST",e[e.SEPTEMBER=9]="SEPTEMBER",e[e.OCTOBER=10]="OCTOBER",e[e.NOVEMBER=11]="NOVEMBER",e[e.DECEMBER=12]="DECEMBER"}(Id||(Id={}));const Ld={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:120,timezoneOffsetNonDst:60,dstStart:e=>qd(e,Id.MARCH,Td.SUNDAY,2),dstEnd:e=>qd(e,Id.OCTOBER,Td.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-300,timezoneOffsetNonDst:-360,dstStart:e=>Yd(e,Id.MARCH,Td.SUNDAY,2,2),dstEnd:e=>Yd(e,Id.NOVEMBER,Td.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-240,timezoneOffsetNonDst:-300,dstStart:e=>Yd(e,Id.MARCH,Td.SUNDAY,2,2),dstEnd:e=>Yd(e,Id.NOVEMBER,Td.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-360,timezoneOffsetNonDst:-420,dstStart:e=>Yd(e,Id.MARCH,Td.SUNDAY,2,2),dstEnd:e=>Yd(e,Id.NOVEMBER,Td.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-420,timezoneOffsetNonDst:-480,dstStart:e=>Yd(e,Id.MARCH,Td.SUNDAY,2,2),dstEnd:e=>Yd(e,Id.NOVEMBER,Td.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Yd(e,t,r,n,s=0){let a=0,o=0;for(;o<n;)a++,new Date(e,t-1,a).getDay()===r&&o++;return new Date(e,t-1,a,s)}function qd(e,t,r,n=0){const s=0===r?7:r,a=new Date(e,t-1+1,1,12),o=0===a.getDay()?7:a.getDay();let i;return i=o===s?7:o<s?7+o-s:o-s,a.setDate(a.getDate()-i),new Date(e,t-1,a.getDate(),n)}function Ud(e,t,r={}){if(null==e)return null;if("number"==typeof e)return e;const n=r[e]??Ld[e];return null==n?null:"number"==typeof n?n:null==t?null:Nd(t).isAfter(n.dstStart(t.getFullYear()))&&!Nd(t).isAfter(n.dstEnd(t.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}Nd.extend(Od);class zd{constructor(e){(e=e??new Date)instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=Ud(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+6e4*this.getSystemTimezoneAdjustmentMinute(this.instant))}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);const r=-e.getTimezoneOffset();return r-(t??this.timezoneOffset??r)}}class Bd{constructor(e,t){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},t)for(const e in t)this.knownValues[e]=t[e];const r=Nd(e.instant);this.imply("day",r.date()),this.imply("month",r.month()+1),this.imply("year",r.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues||(this.impliedValues[e]=t),this}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){const e=new Bd(this.reference);e.knownValues={},e.impliedValues={};for(const t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(const t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!(this.isCertain("weekday")||this.isCertain("day")||this.isCertain("month")||this.isCertain("year"))}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||null!=this.get("hour")&&e.getHours()!=this.get("hour")||null!=this.get("minute")&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {\n            tags: ${JSON.stringify(Array.from(this._tags).sort())}, \n            knownValues: ${JSON.stringify(this.knownValues)}, \n            impliedValues: ${JSON.stringify(this.impliedValues)}}, \n            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Nd(this.date())}date(){const e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+6e4*t)}addTag(e){return this._tags.add(e),this}addTags(e){for(const t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let r=Nd(e.instant);for(const e in t)r=r.add(t[e],e);const n=new Bd(e);return n.addTag("result/relativeDate"),t.hour||t.minute||t.second?(n.addTag("result/relativeDateAndTime"),Md(n,r),Rd(n,r),null!==e.timezoneOffset&&n.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(jd(n,r),null!==e.timezoneOffset&&n.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(n.assign("day",r.date()),n.assign("month",r.month()+1),n.assign("year",r.year())):t.week?(n.assign("day",r.date()),n.assign("month",r.month()+1),n.assign("year",r.year()),n.imply("weekday",r.day())):(n.imply("day",r.date()),t.month?(n.assign("month",r.month()+1),n.assign("year",r.year())):(n.imply("month",r.month()+1),t.year?n.assign("year",r.year()):n.imply("year",r.year())))),n}}class Wd{constructor(e,t,r,n,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=r,this.start=n||new Bd(e),this.end=s}clone(){const e=new Wd(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}addTag(e){return this.start.addTag(e),this.end&&this.end.addTag(e),this}addTags(e){return this.start.addTags(e),this.end&&this.end.addTags(e),this}tags(){const e=new Set(this.start.tags());if(this.end)for(const t of this.end.tags())e.add(t);return e}toString(){const e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function Vd(e,t,r="\\s{0,5},?\\s{0,5}"){const n=t.replace(/\((?!\?)/g,"(?:");return`${e}${n}(?:${r}${n}){0,10}`}function Hd(e){const t=function(e){let t;return t=e instanceof Array?[...e]:e instanceof Map?Array.from(e.keys()):Object.keys(e),t}(e).sort(((e,t)=>t.length-e.length)).join("|").replace(/\./g,"\\.");return`(?:${t})`}function Kd(e){return e<100&&(e+=e>50?1900:2e3),e}function Qd(e,t,r){const n=Nd(e);let s=n;s=s.month(r-1),s=s.date(t),s=s.year(n.year());const a=s.add(1,"y"),o=s.add(-1,"y");return Math.abs(a.diff(n))<Math.abs(s.diff(n))?s=a:Math.abs(o.diff(n))<Math.abs(s.diff(n))&&(s=o),s.year()}const Gd={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Jd={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Xd={...Jd,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Zd={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},eu={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},tu={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},ru={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...tu},nu=`(?:${Hd(Zd)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`,su=`(?:${Hd(eu)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function au(e){let t=e.toLowerCase();return void 0!==eu[t]?eu[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const ou="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function iu(e){return/BE/i.test(e)?(e=e.replace(/BE/i,""),parseInt(e)-543):/BCE?/i.test(e)?(e=e.replace(/BCE?/i,""),-parseInt(e)):/(AD|CE)/i.test(e)?(e=e.replace(/(AD|CE)/i,""),parseInt(e)):Kd(parseInt(e))}const lu=`(${nu})\\s{0,3}(${Hd(ru)})`,cu=new RegExp(lu,"i"),du=`(${nu})\\s{0,3}(${Hd(tu)})`,uu="\\s{0,5},?(?:\\s*and)?\\s{0,5}",hu=Vd("(?:(?:about|around)\\s{0,3})?",lu,uu),mu=Vd("(?:(?:about|around)\\s{0,3})?",du,uu);function pu(e){const t={};let r=e,n=cu.exec(r);for(;n;)fu(t,n),r=r.substring(n[0].length).trim(),n=cu.exec(r);return 0==Object.keys(t).length?null:t}function fu(e,t){if(t[0].match(/^[a-zA-Z]+$/))return;const r=function(e){const t=e.toLowerCase();return void 0!==Zd[t]?Zd[t]:"a"===t||"an"===t||"the"==t?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}(t[1]);e[ru[t[2].toLowerCase()]]=r}class gu{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)||(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags)),this.cachedPattern}extract(e,t){const r=t[1]??"";t.index=t.index+r.length,t[0]=t[0].substring(r.length);for(let e=2;e<t.length;e++)t[e-1]=t[e];return this.innerExtract(e,t)}}const yu=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${hu})(?=\\W|$)`,"i"),vu=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${hu})(?=\\W|$)`,"i"),bu=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${mu})(?=\\W|$)`,"i");class wu extends gu{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?bu:e.option.forwardDate?yu:vu}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;const r=pu(t[1]);return r?Bd.createRelativeFromReference(e.reference,r):null}}const Su=new RegExp(`(?:on\\s{0,3})?(${su})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${su}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${Hd(Xd)})(?:(?:-|/|,?\\s{0,3})(${ou}(?!\\w)))?(?=\\W|$)`,"i");class Cu extends gu{innerPattern(){return Su}innerExtract(e,t){const r=e.createParsingResult(t.index,t[0]),n=Xd[t[3].toLowerCase()],s=au(t[1]);if(s>31)return t.index=t.index+t[1].length,null;if(r.start.assign("month",n),r.start.assign("day",s),t[4]){const e=iu(t[4]);r.start.assign("year",e)}else{const t=Qd(e.refDate,s,n);r.start.imply("year",t)}if(t[2]){const e=au(t[2]);r.end=r.start.clone(),r.end.assign("day",e)}return r}}const xu=new RegExp(`(${Hd(Xd)})(?:-|/|\\s*,?\\s*)(${su})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${su})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${ou}))?(?=\\W|$)(?!\\:\\d)`,"i");class Eu extends gu{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return xu}innerExtract(e,t){const r=Xd[t[1].toLowerCase()],n=au(t[2]);if(n>31)return null;if(this.shouldSkipYearLikeDate&&!t[3]&&!t[4]&&t[2].match(/^2[0-5]$/))return null;const s=e.createParsingComponents({day:n,month:r}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[4]){const e=iu(t[4]);s.assign("year",e)}else{const t=Qd(e.refDate,n,r);s.imply("year",t)}if(!t[3])return s;const a=au(t[3]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}}const $u=new RegExp(`((?:in)\\s*)?(${Hd(Xd)})\\s*(?:(?:,|-|of)?\\s*(${ou})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class _u extends gu{innerPattern(){return $u}innerExtract(e,t){const r=t[2].toLowerCase();if(t[0].length<=3&&!Jd[r])return null;const n=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);n.start.imply("day",1),n.start.addTag("parser/ENMonthNameParser");const s=Xd[r];if(n.start.assign("month",s),t[3]){const e=iu(t[3]);n.start.assign("year",e)}else{const t=Qd(e.refDate,1,s);n.start.imply("year",t)}return n}}const Au=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${Hd(Xd)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class ku extends gu{constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return Au}innerExtract(e,t){const r=parseInt(t[1]);let n=parseInt(t[4]),s=t[3]?parseInt(t[3]):Xd[t[2].toLowerCase()];if(s<1||s>12){if(this.strictMonthDateOrder)return null;n>=1&&n<=12&&([s,n]=[n,s])}return n<1||n>31?null:{day:n,month:s,year:r}}}const Pu=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class Tu extends gu{innerPattern(){return Pu}innerExtract(e,t){const r=parseInt(t[2]),n=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",n).assign("year",r)}}class Iu{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){const r=this.extractPrimaryTimeComponents(e,t);if(!r)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);const n=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(n,s,r);t.index+=t[0].length;const o=e.text.substring(t.index),i=this.getFollowingTimePatternThroughCache().exec(o);if(s.match(/^\d{3,4}/)&&i){if(i[0].match(/^\s*([+-])\s*\d{2,4}$/))return null;if(i[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))return null}return!i||i[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,i,a),a.end&&(a.text+=i[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,r=!1){const n=e.createParsingComponents();let s=0,a=null,o=parseInt(t[2]);if(o>100){if(this.strictMode||null!=t[3])return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(null!=t[3]){if(1==t[3].length&&!t[6])return null;s=parseInt(t[3])}if(s>=60)return null;if(o>12&&(a=Pd.PM),null!=t[6]){if(o>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(a=Pd.AM,12==o&&(o=0)),"p"==e&&(a=Pd.PM,12!=o&&(o+=12))}if(n.assign("hour",o),n.assign("minute",s),null!==a?n.assign("meridiem",a):o<12?n.imply("meridiem",Pd.AM):n.imply("meridiem",Pd.PM),null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}return n}extractFollowingTimeComponents(e,t,r){const n=e.createParsingComponents();if(null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}let s=parseInt(t[2]),a=0,o=-1;if(null!=t[3]?a=parseInt(t[3]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Pd.PM),null!=t[6]){if(s>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(o=Pd.AM,12==s&&(s=0,n.isCertain("day")||n.imply("day",n.get("day")+1))),"p"==e&&(o=Pd.PM,12!=s&&(s+=12)),r.start.isCertain("meridiem")||(o==Pd.AM?(r.start.imply("meridiem",Pd.AM),12==r.start.get("hour")&&r.start.assign("hour",0)):(r.start.imply("meridiem",Pd.PM),12!=r.start.get("hour")&&r.start.assign("hour",r.start.get("hour")+12)))}return n.assign("hour",s),n.assign("minute",a),o>=0?n.assign("meridiem",o):r.start.isCertain("meridiem")&&r.start.get("hour")>12?r.start.get("hour")-12>s?n.imply("meridiem",Pd.AM):s<=12&&(n.assign("hour",s+12),n.assign("meridiem",Pd.PM)):s>12?n.imply("meridiem",Pd.PM):s<=12&&n.imply("meridiem",Pd.AM),n.date().getTime()<r.start.date().getTime()&&n.imply("day",n.get("day")+1),n}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/))return null;if(e.text.match(/^\d\d\d+$/))return null;if(e.text.match(/\d[apAP]$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){const e=t[1];if(this.strictMode)return null;if(e.includes(".")&&!e.match(/\d(\.\d{2})+$/))return null;if(parseInt(e)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;const e=t[1],r=t[2];if(r.includes(".")&&!r.match(/\d(\.\d{2})+$/))return null;const n=parseInt(r),s=parseInt(e);if(n>24||s>24)return null}return e}getPrimaryTimePatternThroughCache(){const e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t||(this.cachedPrimaryTimePattern=function(e,t,r,n){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${r}`,n)}(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t),this.cachedPrimaryTimePattern}getFollowingTimePatternThroughCache(){const e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t||(this.cachedFollowingTimePatten=function(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t),this.cachedFollowingTimePatten}}class Du extends Iu{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){const r=super.extractPrimaryTimeComponents(e,t);if(!r)return r;if(t[0].endsWith("night")){const e=r.get("hour");e>=6&&e<12?(r.assign("hour",r.get("hour")+12),r.assign("meridiem",Pd.PM)):e<6&&r.assign("meridiem",Pd.AM)}if(t[0].endsWith("afternoon")){r.assign("meridiem",Pd.PM);const e=r.get("hour");e>=0&&e<=6&&r.assign("hour",r.get("hour")+12)}return t[0].endsWith("morning")&&(r.assign("meridiem",Pd.AM),r.get("hour")<12&&r.assign("hour",r.get("hour"))),r.addTag("parser/ENTimeExpressionParser")}extractFollowingTimeComponents(e,t,r){const n=super.extractFollowingTimeComponents(e,t,r);return n&&n.addTag("parser/ENTimeExpressionParser"),n}}function Ou(e){const t={};for(const r in e)t[r]=-e[r];return t}const Nu=new RegExp(`(${hu})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),Ru=new RegExp(`(${mu})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class Mu extends gu{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Ru:Nu}innerExtract(e,t){const r=pu(t[1]);if(!r)return null;const n=Ou(r);return Bd.createRelativeFromReference(e.reference,n)}}const Fu=new RegExp(`(${hu})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),ju=new RegExp(`(${mu})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i");class Lu extends gu{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?ju:Fu}innerExtract(e,t){const r=pu(t[1]);return r?Bd.createRelativeFromReference(e.reference,r):null}}class Yu{refine(e,t){return t.filter((t=>this.isValid(e,t)))}}class qu{refine(e,t){if(t.length<2)return t;const r=[];let n=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];const o=e.text.substring(n.index+n.text.length,s.index);if(this.shouldMergeResults(o,n,s,e)){const t=n,r=s,a=this.mergeResults(o,t,r,e);e.debug((()=>{console.log(`${this.constructor.name} merged ${t} and ${r} into ${a}`)})),n=a}else r.push(n),n=s}return null!=n&&r.push(n),r}}class Uu extends qu{shouldMergeResults(e,t,r){return!t.end&&!r.end&&null!=e.match(this.patternBetween())}mergeResults(e,t,r){if(t.start.isOnlyWeekdayComponent()||r.start.isOnlyWeekdayComponent()||(r.start.getCertainComponents().forEach((e=>{t.start.isCertain(e)||t.start.imply(e,r.start.get(e))})),t.start.getCertainComponents().forEach((e=>{r.start.isCertain(e)||r.start.imply(e,t.start.get(e))}))),t.start.date().getTime()>r.start.date().getTime()){let e=t.start.dayjs(),n=r.start.dayjs();r.start.isOnlyWeekdayComponent()&&n.add(7,"days").isAfter(e)?(n=n.add(7,"days"),r.start.imply("day",n.date()),r.start.imply("month",n.month()+1),r.start.imply("year",n.year())):t.start.isOnlyWeekdayComponent()&&e.add(-7,"days").isBefore(n)?(e=e.add(-7,"days"),t.start.imply("day",e.date()),t.start.imply("month",e.month()+1),t.start.imply("year",e.year())):r.start.isDateWithUnknownYear()&&n.add(1,"years").isAfter(e)?(n=n.add(1,"years"),r.start.imply("year",n.year())):t.start.isDateWithUnknownYear()&&e.add(-1,"years").isBefore(n)?(e=e.add(-1,"years"),t.start.imply("year",e.year())):[r,t]=[t,r]}const n=t.clone();return n.start=t.start,n.end=r.start,n.index=Math.min(t.index,r.index),t.index<r.index?n.text=t.text+e+r.text:n.text=r.text+e+t.text,n}}class zu extends Uu{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function Bu(e,t){const r=e.clone(),n=e.start,s=t.start;if(r.start=Wu(n,s),null!=e.end||null!=t.end){const n=Wu(null==e.end?e.start:e.end,null==t.end?t.start:t.end);if(null==e.end&&n.date().getTime()<r.start.date().getTime()){const e=n.dayjs().add(1,"day");n.isCertain("day")?Rd(n,e):Fd(n,e)}r.end=n}return r}function Wu(e,t){const r=e.clone();return t.isCertain("hour")?(r.assign("hour",t.get("hour")),r.assign("minute",t.get("minute")),t.isCertain("second")?(r.assign("second",t.get("second")),t.isCertain("millisecond")?r.assign("millisecond",t.get("millisecond")):r.imply("millisecond",t.get("millisecond"))):(r.imply("second",t.get("second")),r.imply("millisecond",t.get("millisecond")))):(r.imply("hour",t.get("hour")),r.imply("minute",t.get("minute")),r.imply("second",t.get("second")),r.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&r.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?r.assign("meridiem",t.get("meridiem")):null!=t.get("meridiem")&&null==r.get("meridiem")&&r.imply("meridiem",t.get("meridiem")),r.get("meridiem")==Pd.PM&&r.get("hour")<12&&(t.isCertain("hour")?r.assign("hour",r.get("hour")+12):r.imply("hour",r.get("hour")+12)),r.addTags(e.tags()),r.addTags(t.tags()),r}class Vu extends qu{shouldMergeResults(e,t,r){return(t.start.isOnlyDate()&&r.start.isOnlyTime()||r.start.isOnlyDate()&&t.start.isOnlyTime())&&null!=e.match(this.patternBetween())}mergeResults(e,t,r){const n=t.start.isOnlyDate()?Bu(t,r):Bu(r,t);return n.index=t.index,n.text=t.text+e+r.text,n}}class Hu extends Vu{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}const Ku=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class Qu{constructor(e){this.timezoneOverrides=e}refine(e,t){const r=e.option.timezones??{};return t.forEach((t=>{const n=e.text.substring(t.index+t.text.length),s=Ku.exec(n);if(!s)return;const a=s[1].toUpperCase(),o=t.start.date()??t.refDate??new Date,i={...this.timezoneOverrides,...r},l=Ud(a,o,i);if(null==l)return;e.debug((()=>{console.log(`Extracting timezone: '${a}' into: ${l} for: ${t.start}`)}));const c=t.start.get("timezoneOffset");if(null!==c&&l!=c){if(t.start.isCertain("timezoneOffset"))return;if(a!=s[1])return}t.start.isOnlyDate()&&a!=s[1]||(t.text+=s[0],t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",l),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",l))})),t}}const Gu=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i");class Ju{refine(e,t){return t.forEach((function(t){if(t.start.isCertain("timezoneOffset"))return;const r=e.text.substring(t.index+t.text.length),n=Gu.exec(r);if(!n)return;e.debug((()=>{console.log(`Extracting timezone: '${n[0]}' into : ${t}`)}));let s=60*parseInt(n[2])+parseInt(n[3]||"0");s>840||("-"===n[1]&&(s=-s),null!=t.end&&t.end.assign("timezoneOffset",s),t.start.assign("timezoneOffset",s),t.text+=n[0])})),t}}class Xu{refine(e,t){if(t.length<2)return t;const r=[];let n=t[0];for(let s=1;s<t.length;s++){const a=t[s];if(a.index>=n.index+n.text.length){r.push(n),n=a;continue}let o=null,i=null;a.text.length>n.text.length?(o=a,i=n):(o=n,i=a),e.debug((()=>{console.log(`${this.constructor.name} remove ${i} by ${o}`)})),n=o}return null!=n&&r.push(n),r}}class Zu{refine(e,t){return e.option.forwardDate?(t.forEach((t=>{let r=Nd(e.refDate);if(t.start.isOnlyTime()&&r.isAfter(t.start.dayjs())&&(r=r.add(1,"day"),Fd(t.start,r),t.end&&t.end.isOnlyTime()&&(Fd(t.end,r),t.start.dayjs().isAfter(t.end.dayjs())&&(r=r.add(1,"day"),Fd(t.end,r))),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} time result (${t.start})`)}))),t.start.isOnlyWeekdayComponent()&&r.isAfter(t.start.dayjs())&&(r=r.day()>=t.start.get("weekday")?r.day(t.start.get("weekday")+7):r.day(t.start.get("weekday")),t.start.imply("day",r.date()),t.start.imply("month",r.month()+1),t.start.imply("year",r.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.start})`)})),t.end&&t.end.isOnlyWeekdayComponent()&&(r=r.day()>t.end.get("weekday")?r.day(t.end.get("weekday")+7):r.day(t.end.get("weekday")),t.end.imply("day",r.date()),t.end.imply("month",r.month()+1),t.end.imply("year",r.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.end})`)})))),t.start.isDateWithUnknownYear()&&r.isAfter(t.start.dayjs()))for(let n=0;n<3&&r.isAfter(t.start.dayjs());n++)t.start.imply("year",t.start.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} year (${t.start})`)})),t.end&&!t.end.isCertain("year")&&(t.end.imply("year",t.end.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} month (${t.start})`)})))})),t):t}}class eh extends Yu{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug((()=>{console.log(`Removing unlikely result '${t.text}'`)})),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.end})`)})),!1):!this.strictMode||this.isStrictModeValid(e,t):(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.start})`)})),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug((()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)})),!1):!!(!t.start.isOnlyTime()||t.start.isCertain("hour")&&t.start.isCertain("minute"))||(e.debug((()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)})),!1)}}const th=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i");class rh extends gu{innerPattern(){return th}innerExtract(e,t){const r=e.createParsingComponents({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])});if(null!=t[4]&&(r.assign("hour",parseInt(t[4])),r.assign("minute",parseInt(t[5])),null!=t[6]&&r.assign("second",parseInt(t[6])),null!=t[7]&&r.assign("millisecond",parseInt(t[7])),null!=t[8])){let e=0;if(t[9]){const r=parseInt(t[9]);let n=0;null!=t[10]&&(n=parseInt(t[10])),e=60*r,e<0?e-=n:e+=n}r.assign("timezoneOffset",e)}return r.addTag("parser/ISOFormatParser")}}class nh extends qu{mergeResults(e,t,r){const n=r.clone();return n.index=t.index,n.text=t.text+e+n.text,n.start.assign("weekday",t.start.get("weekday")),n.end&&n.end.assign("weekday",t.start.get("weekday")),n}shouldMergeResults(e,t,r){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&r.start.isCertain("day")&&null!=e.match(/^,?\s*$/)}}function sh(e,t){let r=Nd(e.instant);const n=new Bd(e,{});return r=r.add(t,"day"),Rd(n,r),jd(n,r),n}const ah=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class oh extends gu{innerPattern(e){return ah}innerExtract(e,t){let r=Nd(e.refDate);const n=t[0].toLowerCase();let s=e.createParsingComponents();switch(n){case"now":s=function(e){const t=Nd(e.instant),r=new Bd(e,{});return Rd(r,t),Md(r,t),null!==e.timezoneOffset&&r.assign("timezoneOffset",t.utcOffset()),r.addTag("casualReference/now"),r}(e.reference);break;case"today":s=function(e){const t=Nd(e.instant),r=new Bd(e,{});return Rd(r,t),jd(r,t),r.addTag("casualReference/today"),r}(e.reference);break;case"yesterday":s=function(e){return sh(e,-1)}(e.reference).addTag("casualReference/yesterday");break;case"tomorrow":case"tmr":case"tmrw":s=sh(e.reference,1).addTag("casualReference/tomorrow");break;case"tonight":s=function(e,t=22){const r=Nd(e.instant),n=new Bd(e,{});return Rd(n,r),n.imply("hour",t),n.imply("meridiem",Pd.PM),n.addTag("casualReference/tonight"),n}(e.reference);break;default:n.match(/last\s*night/)&&(r.hour()>6&&(r=r.add(-1,"day")),Rd(s,r),s.imply("hour",0))}return s.addTag("parser/ENCasualDateParser"),s}}const ih=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class lh extends gu{innerPattern(){return ih}innerExtract(e,t){let r=null;switch(t[1].toLowerCase()){case"afternoon":r=function(e,t=15){const r=new Bd(e,{});return r.imply("meridiem",Pd.PM),r.imply("hour",t),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/afternoon"),r}(e.reference);break;case"evening":case"night":r=function(e,t=20){const r=new Bd(e,{});return r.imply("meridiem",Pd.PM),r.imply("hour",t),r.addTag("casualReference/evening"),r}(e.reference);break;case"midnight":r=function(e){const t=new Bd(e,{}),r=Nd(e.instant);return r.hour()>2&&function(e,t){Fd(e,t=t.add(1,"day")),jd(e,t)}(t,r),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/midnight"),t}(e.reference);break;case"morning":r=function(e,t=6){const r=new Bd(e,{});return r.imply("meridiem",Pd.AM),r.imply("hour",t),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/morning"),r}(e.reference);break;case"noon":case"midday":r=function(e){const t=new Bd(e,{});return t.imply("meridiem",Pd.AM),t.imply("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/noon"),t}(e.reference)}return r&&r.addTag("parser/ENCasualTimeParser"),r}}function ch(e,t){let r=t-e.getDay();return r<0&&(r+=7),r}function dh(e,t){let r=t-e.getDay();return r>=0&&(r-=7),r}const uh=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Hd(Gd)}|weekend|weekday)(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i");class hh extends gu{innerPattern(){return uh}innerExtract(e,t){const r=t[1],n=t[3];let s=r||n;s=s||"",s=s.toLowerCase();let a=null;"last"==s||"past"==s?a="last":"next"==s?a="next":"this"==s&&(a="this");const o=t[2].toLowerCase();let i;if(void 0!==Gd[o])i=Gd[o];else if("weekend"==o)i="last"==a?Td.SUNDAY:Td.SATURDAY;else{if("weekday"!=o)return null;{const t=e.reference.getDateWithAdjustedTimezone().getDay();t==Td.SUNDAY||t==Td.SATURDAY?i="last"==a?Td.FRIDAY:Td.MONDAY:(i=t-1,i="last"==a?i-1:i+1,i=i%5+1)}}return function(e,t,r){const n=function(e,t,r){const n=e.getDay();switch(r){case"this":return ch(e,t);case"last":return dh(e,t);case"next":return n==Td.SUNDAY?t==Td.SUNDAY?7:t:n==Td.SATURDAY?t==Td.SATURDAY?7:t==Td.SUNDAY?8:1+t:t<n&&t!=Td.SUNDAY?ch(e,t):ch(e,t)+7}return function(e,t){const r=dh(e,t),n=ch(e,t);return n<-r?n:r}(e,t)}(e.getDateWithAdjustedTimezone(),t,r);let s=new Bd(e);return s=function(e,t){const r=e.clone();let n=e.dayjs();for(const e in t)n=n.add(t[e],e);return("day"in t||"d"in t||"week"in t||"month"in t||"year"in t)&&(r.imply("day",n.date()),r.imply("month",n.month()+1),r.imply("year",n.year())),("second"in t||"minute"in t||"hour"in t)&&(r.imply("second",n.second()),r.imply("minute",n.minute()),r.imply("hour",n.hour())),r}(s,{day:n}),s.assign("weekday",t),s}(e.reference,i,a)}}const mh=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${Hd(ru)})(?=\\s*)(?=\\W|$)`,"i");class ph extends gu{innerPattern(){return mh}innerExtract(e,t){const r=t[1].toLowerCase(),n=t[2].toLowerCase(),s=ru[n];if("next"==r||r.startsWith("after")){const t={};return t[s]=1,Bd.createRelativeFromReference(e.reference,t)}if("last"==r||"past"==r){const t={};return t[s]=-1,Bd.createRelativeFromReference(e.reference,t)}const a=e.createParsingComponents();let o=Nd(e.reference.instant);return n.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):n.match(/month/i)?(o=o.add(1-o.date(),"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):n.match(/year/i)&&(o=o.add(1-o.date(),"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}}const fh=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i");class gh{constructor(e){this.groupNumberMonth=e?3:2,this.groupNumberDay=e?2:3}pattern(){return fh}extract(e,t){const r=t.index+t[1].length,n=t.index+t[0].length-t[5].length;if(r>0&&e.text.substring(0,r).match("\\d/?$"))return;if(n<e.text.length&&e.text.substring(n).match("^/?\\d"))return;const s=e.text.substring(r,n);if(s.match(/^\d\.\d$/)||s.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/))return;if(!t[4]&&s.indexOf("/")<0)return;const a=e.createParsingResult(r,s);let o=parseInt(t[this.groupNumberMonth]),i=parseInt(t[this.groupNumberDay]);if((o<1||o>12)&&o>12){if(!(i>=1&&i<=12&&o<=31))return null;[i,o]=[o,i]}if(i<1||i>31)return null;if(a.start.assign("day",i),a.start.assign("month",o),t[4]){const e=Kd(parseInt(t[4]));a.start.assign("year",e)}else{const t=Qd(e.refDate,i,o);a.start.imply("year",t)}return a.addTag("parser/SlashDateFormatParser")}}const yh=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${hu})(?=\\W|$)`,"i"),vh=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${mu})(?=\\W|$)`,"i");class bh extends gu{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?yh:vh}innerExtract(e,t){const r=t[1].toLowerCase();let n=pu(t[2]);if(!n)return null;switch(r){case"last":case"past":case"-":n=Ou(n)}return Bd.createRelativeFromReference(e.reference,n)}}function wh(e){return null!=e.text.match(/^-/i)}class Sh extends qu{shouldMergeResults(e,t,r){return!!e.match(/^\s*$/i)&&(null!=r.text.match(/^[+-]/i)||wh(r))}mergeResults(e,t,r,n){let s=pu(r.text);wh(r)&&(s=Ou(s));const a=Bd.createRelativeFromReference(new zd(t.start.date()),s);return new Wd(t.reference,t.index,`${t.text}${e}${r.text}`,a)}}function Ch(e){return null!=e.text.match(/\s+(before|from)$/i)}class xh extends qu{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,r){return!(!e.match(this.patternBetween())||!Ch(t)&&(n=t,null==n.text.match(/\s+(after|since)$/i))||!r.start.get("day")||!r.start.get("month")||!r.start.get("year"));var n}mergeResults(e,t,r){let n=pu(t.text);Ch(t)&&(n=Ou(n));const s=Bd.createRelativeFromReference(new zd(r.start.date()),n);return new Wd(r.reference,t.index,`${t.text}${e}${r.text}`,s)}}const Eh=new RegExp(`^\\s*(${ou})`,"i");class $h{refine(e,t){return t.forEach((function(t){if(!t.start.isDateWithUnknownYear())return;const r=e.text.substring(t.index+t.text.length),n=Eh.exec(r);if(!n)return;e.debug((()=>{console.log(`Extracting year: '${n[0]}' into : ${t}`)}));const s=iu(n[1]);null!=t.end&&t.end.assign("year",s),t.start.assign("year",s),t.text+=n[0]})),t}}class _h extends Yu{constructor(){super()}isValid(e,t){const r=t.text.trim();return r===e.text.trim()||("may"!==r.toLowerCase()||e.text.substring(0,t.index).trim().match(/\b(in)$/i)?!r.toLowerCase().endsWith("the second")||(e.text.substring(t.index+t.text.length).trim().length>0&&e.debug((()=>{console.log(`Removing unlikely result: ${t}`)})),!1):(e.debug((()=>{console.log(`Removing unlikely result: ${t}`)})),!1))}}class Ah{createCasualConfiguration(e=!1){const t=this.createConfiguration(!1,e);return t.parsers.push(new oh),t.parsers.push(new lh),t.parsers.push(new _u),t.parsers.push(new ph),t.parsers.push(new bh),t.refiners.push(new _h),t}createConfiguration(e=!0,t=!1){const r=function(e,t=!1){return e.parsers.unshift(new rh),e.refiners.unshift(new nh),e.refiners.unshift(new Ju),e.refiners.unshift(new Xu),e.refiners.push(new Qu),e.refiners.push(new Xu),e.refiners.push(new Zu),e.refiners.push(new eh(t)),e}({parsers:[new gh(t),new wu(e),new Cu,new Eu(t),new hh,new Tu,new Du(e),new Mu(e),new Lu(e)],refiners:[new Hu]},e);return r.parsers.unshift(new ku(e)),r.refiners.unshift(new xh),r.refiners.unshift(new Sh),r.refiners.unshift(new Xu),r.refiners.push(new Hu),r.refiners.push(new $h),r.refiners.push(new zu),r}}class kh{constructor(e){this.defaultConfig=new Ah,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new kh({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,r){const n=this.parse(e,t,r);return n.length>0?n[0].start.date():null}parse(e,t,r){const n=new Ph(e,t,r);let s=[];return this.parsers.forEach((e=>{const t=kh.executeParser(n,e);s=s.concat(t)})),s.sort(((e,t)=>e.index-t.index)),this.refiners.forEach((function(e){s=e.refine(n,s)})),s}static executeParser(e,t){const r=[],n=t.pattern(e),s=e.text;let a=e.text,o=n.exec(a);for(;o;){const i=o.index+s.length-a.length;o.index=i;const l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=n.exec(a);continue}let c=null;l instanceof Wd?c=l:l instanceof Bd?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l);const d=c.index,u=c.text;e.debug((()=>console.log(`${t.constructor.name} extracted (at index=${d}) '${u}'`))),r.push(c),a=s.substring(d+u.length),o=n.exec(a)}return r}}class Ph{constructor(e,t,r){this.text=e,this.reference=new zd(t),this.option=r??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Bd?e:new Bd(this.reference,e)}createParsingResult(e,t,r,n){const s="string"==typeof t?t:this.text.substring(e,t),a=r?this.createParsingComponents(r):null,o=n?this.createParsingComponents(n):null;return new Wd(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}const Th=new Ah,Ih=new kh(Th.createCasualConfiguration(!1));new kh(Th.createConfiguration(!0,!1)),new kh(Th.createCasualConfiguration(!0));const Dh=Ih;var Oh,Nh;const Rh=(0,D.A)(),Mh=null==Rh||null==(Oh=Rh.common)||null==(Nh=Oh.conf)?void 0:Nh.SCHEDULED_QUERIES,Fh={greater:(e,t)=>e>t,greater_equal:(e,t)=>e>=t,less:(e,t)=>e<t,less_equal:(e,t)=>e<=t},jh=()=>{const e=null==Mh?void 0:Mh.JSONSCHEMA;return e?(Object.entries(e.properties).forEach((([t,r])=>{if(r.default&&"date-time"===r.format){const s=(n=r.default,Dh.parseDate(n,undefined,undefined));e.properties[t]={...r,default:s?s.toISOString():null}}var n})),e):{}},Lh=()=>{const e=(null==Mh?void 0:Mh.VALIDATION)||[];return(t,r)=>(e.forEach((e=>{const n=Fh[e.name],s=e.arguments.map((e=>t[e])),a=e.container||e.arguments.slice(-1)[0];var o;n(s[0],s[1])||null==(o=r[a])||o.addError(e.message)})),r)},Yh=(0,b.I4)(pe.fI)`
  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;
`,qh=(0,b.I4)(de.A)`
  ${({theme:e})=>`\n    background: none;\n    text-transform: none;\n    padding: 0px;\n    color: ${e.colors.grayscale.dark2};\n    font-size: 14px;\n    font-weight: ${e.typography.weights.normal};\n    margin-left: 0;\n    &:disabled {\n      margin-left: 0;\n      background: none;\n      color: ${e.colors.grayscale.dark2};\n      &:hover {\n        background: none;\n        color: ${e.colors.grayscale.dark2};\n      }\n    }\n  `}
`,Uh=b.I4.div`
  i.glyphicon {
    display: none;
  }
  .btn-add::after {
    content: '+';
  }
  .array-item-move-up::after {
    content: '↑';
  }
  .array-item-move-down::after {
    content: '↓';
  }
  .array-item-remove::after {
    content: '-';
  }
`;var zh={name:"tjo4qw",styles:"float:right"};const Bh=({defaultLabel:e=(0,w.t)("Undefined"),sql:t,schema:r,dbId:s,onSchedule:a=()=>{},scheduleQueryWarning:o,tooltip:i,disabled:l=!1})=>{const[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(e),[p,f]=(0,n.useState)(!1),g=(0,n.useRef)();return(0,h.Y)("span",{className:"ScheduleQueryButton",children:(0,h.Y)(xe.A,{ref:g,modalTitle:(0,w.t)("Schedule query"),modalBody:(0,h.FD)(kn.lV,{layout:"vertical",children:[(0,h.Y)(Yh,{children:(0,h.Y)(pe.fv,{xs:24,children:(0,h.Y)(kn.eI,{label:(0,w.t)("Label"),children:(0,h.Y)(ge.pd,{type:"text",placeholder:(0,w.t)("Label for your query"),value:u,onChange:e=>m(e.target.value)})})})}),(0,h.Y)(Yh,{children:(0,h.Y)(pe.fv,{xs:24,children:(0,h.Y)(kn.eI,{label:(0,w.t)("Description"),children:(0,h.Y)(ge.fs,{rows:4,placeholder:(0,w.t)("Write a description for your query"),value:c,onChange:e=>d(e.target.value)})})})}),(0,h.Y)(pe.fI,{children:(0,h.Y)(pe.fv,{xs:24,children:(0,h.Y)(Uh,{children:(0,h.Y)(vd,{schema:jh(),uiSchema:null==Mh?void 0:Mh.UISCHEMA,onSubmit:({formData:e})=>{var n;const o={label:u,description:c,db_id:s,schema:r,sql:t,extra_json:JSON.stringify({schedule_info:e})};a(o),null==g||null==(n=g.current)||n.close()},customValidate:Lh(),validator:kd,children:(0,h.Y)(de.A,{buttonStyle:"primary",htmlType:"submit",css:zh,children:(0,w.t)("Submit")})})})})}),o&&(0,h.Y)(pe.fI,{children:(0,h.Y)(pe.fv,{xs:24,children:(0,h.Y)("small",{children:o})})})]}),triggerNode:(0,h.Y)(qh,{onClick:()=>f(!p),buttonSize:"small",buttonStyle:"link",tooltip:i,disabled:l,children:(0,w.t)("Schedule")})})})};var Wh=r(54016);const Vh=b.I4.div`
  ${({theme:e})=>a.AH`
    font-size: ${e.typography.sizes.s};
  `}
`,Hh=({getEstimate:e,queryEditorId:t,tooltip:r="",disabled:a=!1})=>{const o=(0,s.d4)((e=>{var r;return null==(r=e.sqlLab.queryCostEstimates)?void 0:r[t]})),{selectedText:i}=_e(t,["selectedText"]),{cost:l}=o||{},c=(0,n.useMemo)((()=>Array.isArray(l)?l:[]),[l]),d=(0,n.useMemo)((()=>Array.isArray(l)&&l.length?Object.keys(l[0]).map((e=>({accessor:e,Header:e}))):[]),[l]),u=i?(0,w.t)("Estimate selected query cost"):(0,w.t)("Estimate cost");return(0,h.Y)("span",{className:"EstimateQueryCostButton",children:(0,h.Y)(xe.A,{modalTitle:(0,w.t)("Cost estimate"),modalBody:null!=o&&o.error?(0,h.Y)(be.A,{type:"error",message:null==o?void 0:o.error},"query-estimate-error"):null!=o&&o.completed?(0,h.Y)(Vh,{children:(0,h.Y)(je.A,{columns:d,data:c,withPagination:!1,emptyWrapperType:Wh.V.Small})}):(0,h.Y)(Qe.A,{position:"normal"}),triggerNode:(0,h.Y)(de.A,{style:{height:32,padding:"4px 15px"},onClick:()=>{e()},tooltip:r,disabled:a,children:u},"query-estimate-btn")})})};var Kh=r(35742),Qh=r(51436);const Gh=(0,r(5261).Ay)((({queryEditorId:e,addDangerToast:t})=>{const r=(0,b.DP)(),n=we({queryEditorId:e}),{dbId:s,name:o,schema:i,autorun:l,sql:c,templateParams:d}=_e(e,["dbId","name","schema","autorun","sql","templateParams"]);return(0,h.Y)(tt.A,{getText:e=>(n(x.GM,{shortcut:!1}),(e=>{const r={dbId:s,name:o,schema:i,autorun:l,sql:c,templateParams:d};return Kh.A.post({endpoint:"/api/v1/sqllab/permalink",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((({json:t})=>{e(t.url)})).catch((e=>{(0,Qh.h4)(e).then((()=>{t((0,w.t)("There was an error with your request"))}))}))})(e)),wrapped:!1,copyNode:(()=>{const e=(0,w.t)("Copy query link to your clipboard");return(0,h.FD)(de.A,{buttonSize:"small",tooltip:e,css:a.AH`
          span > :first-of-type {
            margin-right: 0;
          }
        `,children:[(0,h.Y)(F.A.LinkOutlined,{iconColor:r.colors.primary.base,iconSize:"m"}),(0,w.t)("Copy link")]})})()})}));var Jh=r(86663),Xh=r(61693),Zh=r(8791);const em=e=>{const t=(0,b.DP)();return(0,h.Y)(a.Z2,{children:({css:r})=>(0,h.Y)(P.m_,{overlayClassName:r`
            .antd5-tooltip-inner {
              max-width: ${125*t.gridUnit}px;
              word-wrap: break-word;
              text-align: center;

              pre {
                background: transparent;
                border: none;
                text-align: left;
                color: ${t.colors.grayscale.light5};
                font-size: ${t.typography.sizes.xs}px;
              }
            }
          `,...e})})},tm=b.I4.hr`
  margin-top: ${({theme:e})=>1.5*e.gridUnit}px;
`,rm={pk:"fa-key",fk:"fa-link",index:"fa-bookmark"},nm={pk:(0,w.t)("Primary key"),fk:(0,w.t)("Foreign key"),index:(0,w.t)("Index")},sm=b.I4.div`
  white-space: nowrap;
`,am=({column:e})=>{let t,r=e.name;return e.keys&&e.keys.length>0&&(r=(0,h.Y)("strong",{children:e.name}),t=e.keys.map(((e,t)=>(0,h.Y)("span",{className:"ColumnElement",children:(0,h.Y)(em,{placement:"right",title:(0,h.FD)(h.FK,{children:[(0,h.Y)("strong",{children:nm[e.type]}),(0,h.Y)(tm,{}),(0,h.Y)("pre",{className:"text-small",children:JSON.stringify(e,null,"  ")})]}),children:(0,h.Y)("i",{className:`fa text-muted m-l-2 ${rm[e.type]}`})})},t)))),(0,h.FD)("div",{className:"clearfix table-column",children:[(0,h.FD)("div",{className:"pull-left m-l-10 col-name",children:[r,t]}),(0,h.Y)(sm,{className:"pull-right text-muted",children:(0,h.FD)("small",{children:[" ",e.type]})})]})},om=b.I4.span`
  color: ${({theme:e})=>e.colors.primary.dark1};
  &:hover {
    color: ${({theme:e})=>e.colors.primary.dark2};
  }
  cursor: pointer;
`,im=b.I4.div`
  transition: all ${({theme:e})=>e.transitionTiming}s;
  opacity: ${e=>e.hovered?1:0};
`,lm=(0,b.I4)(Xh.A.Panel)`
  ${({theme:e})=>a.AH`
    & {
      .ws-el-controls {
        margin-right: ${-e.gridUnit}px;
        display: flex;
      }

      .header-container {
        display: flex;
        flex: 1;
        align-items: center;
        width: 100%;

        .table-name {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          font-size: ${e.typography.sizes.l}px;
          flex: 1;
        }

        .header-right-side {
          margin-left: auto;
          display: flex;
          align-items: center;
          margin-right: ${8*e.gridUnit}px;
        }
      }
    }
  `}
`;var cm={name:"1hs1mx1",styles:"padding-top:6px"};const dm=({table:e,...t})=>{const{dbId:r,catalog:o,schema:i,name:l,expanded:c}=e,u=(0,b.DP)(),m=(0,s.wA)(),{currentData:p,isSuccess:f,isFetching:g,isError:y}=(0,vn.rq)({dbId:r,catalog:o,schema:i,table:l},{skip:!c}),{currentData:v,isSuccess:S,isLoading:C,isError:x}=(0,vn.ii)({dbId:r,catalog:o,schema:i,table:l},{skip:!c});(0,n.useEffect)((()=>{(y||x)&&m((0,d.addDangerToast)((0,w.t)("An error occurred while fetching table metadata")))}),[y,x,m]);const E={...p,...v},$=(0,U.A)((()=>{const{initialized:t}=e;t||m((0,d.syncTable)(e,E))}));(0,n.useEffect)((()=>{f&&S&&$()}),[f,S,$]);const[_,A]=(0,n.useState)(!1),[k,T]=(0,n.useState)(!1),I=(0,n.useRef)(null),D=e=>{q()((()=>T(e)),100)()},O=()=>{m((0,d.removeDataPreview)(e)),m((0,d.removeTables)([e]))},N=()=>{A((e=>!e))},R=()=>{m(vn.z7.invalidateTags([{type:"TableMetadatas",id:l}])),m((0,d.syncTable)(e,E))},M=()=>{let e,t;if(E.partitions){var r;let t,n;if(E.partitions.partitionQuery){({partitionQuery:t}=E.partitions);const e=(0,w.t)("Copy partition query to clipboard");n=(0,h.Y)(tt.A,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,h.Y)(F.A.CopyOutlined,{iconSize:"s"})})}const s=Object.entries((null==(r=E.partitions)?void 0:r.latest)||[]).map((([e,t])=>`${e}=${t}`)).join("/");e=(0,h.FD)("div",{children:[(0,h.FD)("small",{children:[(0,w.t)("latest partition:")," ",s]})," ",n]})}var n;return E.metadata&&(t=Object.entries(E.metadata).map((([e,t])=>(0,h.Y)("div",{children:(0,h.FD)("small",{children:[(0,h.FD)("strong",{children:[e,":"]})," ",t]})}))),null==(n=t)||!n.length)?null:e?(0,h.FD)(Re.A,{size:"small",children:[e,t]}):null},j=()=>{var e;let t;const r=(0,w.t)("Keys for table");return null!=E&&null!=(e=E.indexes)&&e.length&&(t=(0,h.Y)(xe.A,{modalTitle:`${r} ${l}`,modalBody:E.indexes.map(((e,t)=>(0,h.Y)("pre",{children:JSON.stringify(e,null,"  ")},t))),triggerNode:(0,h.Y)(nn,{className:"pull-left m-l-2",tooltip:(0,w.t)("View keys & indexes (%s)",E.indexes.length),children:(0,h.Y)(F.A.KeyOutlined,{iconSize:"s"})})})),(0,h.FD)(Ye,{css:a.AH`
          column-gap: ${1.5*u.gridUnit}px;
          margin-right: ${u.gridUnit}px;
          & span {
            display: flex;
            justify-content: center;
            width: ${4*u.gridUnit}px;
          }
        `,children:[(0,h.Y)(nn,{className:"pull-left m-l-2 pointer",onClick:R,tooltip:(0,w.t)("Refresh table schema"),children:(0,h.Y)(F.A.SyncOutlined,{iconSize:"m",iconColor:u.colors.primary.dark2})}),t,(0,h.Y)(nn,{className:`fa fa-sort-${_?"numeric":"alpha"}-asc pull-left sort-cols m-l-2 pointer`,onClick:N,tooltip:_?(0,w.t)("Original table column order"):(0,w.t)("Sort columns alphabetically")}),E.selectStar&&(0,h.Y)(tt.A,{copyNode:(0,h.Y)(nn,{"aria-label":"Copy",tooltip:(0,w.t)("Copy SELECT statement to the clipboard"),children:(0,h.Y)(F.A.CopyOutlined,{iconSize:"m",iconColor:u.colors.primary.dark2,"aria-hidden":!0})}),text:E.selectStar,shouldShowText:!1}),E.view&&(0,h.Y)(bn,{sql:E.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement")}),(0,h.Y)(nn,{className:" table-remove pull-left m-l-2 pointer",onClick:O,tooltip:(0,w.t)("Remove table preview"),children:(0,h.Y)(F.A.CloseOutlined,{iconSize:"m",iconColor:u.colors.primary.dark2,"aria-hidden":!0})})]})};return(0,a.n)(lm,{...t,key:e.id,header:(()=>{const e=I.current;let t=[];return e&&e.offsetWidth<e.scrollWidth&&(t=["hover"]),(0,h.FD)("div",{className:"clearfix header-container",onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),children:[(0,h.Y)(P.m_,{id:"copy-to-clipboard-tooltip",style:{cursor:"pointer"},title:l,trigger:t,children:(0,h.Y)(om,{ref:I,className:"table-name",children:(0,h.Y)("strong",{children:l})})}),(0,h.Y)("div",{className:"pull-right header-right-side",children:g||C?(0,h.Y)(Qe.A,{position:"inline"}):(0,h.Y)(im,{hovered:k,onClick:e=>e.stopPropagation(),children:j()})})]})})(),className:"TableElement",forceRender:!0},(()=>{var e;let t;return E.columns&&(t=E.columns.slice(),_&&t.sort(((e,t)=>{const r=e.name.toUpperCase(),n=t.name.toUpperCase();return r<n?-1:r>n?1:0}))),(0,h.FD)("div",{onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),css:cm,children:[M(),(0,h.Y)("div",{children:null==(e=t)?void 0:e.map((e=>(0,h.Y)(am,{column:e},e.name)))})]})})())},um=b.I4.div`
  flex: 1 1 auto;
  overflow: auto;
`,hm=e=>a.AH`
  .ant-collapse-item {
    margin-bottom: ${3*e.gridUnit}px;
  }
  .ant-collapse-header {
    padding: 0px !important;
    display: flex;
    align-items: center;
  }
  .ant-collapse-content-box {
    padding: 0px ${4*e.gridUnit}px 0px 0px !important;
  }
  .ant-collapse-arrow {
    padding: 0 !important;
    bottom: ${e.gridUnit}px !important;
    right: ${4*e.gridUnit}px !important;
    color: ${e.colors.primary.dark1} !important;
    &:hover {
      color: ${e.colors.primary.dark2} !important;
    }
  }
`,mm=b.I4.div`
  ${({theme:e})=>a.AH`
    height: 100%;
    display: flex;
    flex-direction: column;

    .divider {
      border-bottom: 1px solid ${e.colors.grayscale.light4};
      margin: ${4*e.gridUnit}px 0;
    }
  `}
`,pm=({database:e,queryEditorId:t,height:r=500})=>{const o=(0,s.d4)((({sqlLab:e})=>e.tables.filter((e=>e.queryEditorId===t))),s.bN),i=(0,s.wA)(),l=_e(t,["dbId","catalog","schema"]),[c,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),{dbId:f,catalog:g,schema:y}=l,v=(0,n.useMemo)((()=>o.filter((e=>e.dbId===f&&e.schema===y))),[o,f,y]);(0,n.useEffect)((()=>{const t=Jh.parse(window.location.search).db,r=(0,ve.Gq)(ve.Hh.Database,null);t&&r?(p(r),(0,ve.SO)(ve.Hh.Database,null)):e&&p(e)}),[e]);const b=(0,n.useCallback)((e=>{u(!!e)}),[]),S=(0,n.useMemo)((()=>(null==v?void 0:v.map((e=>e.name)))||[]),[v]),C="?reset=1"===window.location.search,x=r-130,E=(0,n.useCallback)((e=>{l&&i((0,d.queryEditorSetCatalog)(l,e))}),[i,l]),$=(0,n.useCallback)((e=>{l&&i((0,d.queryEditorSetSchema)(l,e))}),[i,l]),_=(0,n.useCallback)((e=>{i((0,d.setDatabases)(e))}),[i]),A=(0,n.useCallback)((e=>{i((0,d.addDangerToast)(e))}),[i]),k=(0,n.useCallback)((()=>{i((0,d.resetState)())}),[i]);return(0,h.FD)(mm,{children:[(0,h.Y)(Zh.Kt,{onEmptyResults:b,emptyState:(0,h.Y)(I.p,{}),database:m,getDbList:_,handleError:A,onDbChange:({id:e})=>{i((0,d.queryEditorSetDb)(l,e))},onCatalogChange:E,catalog:g,onSchemaChange:$,schema:y,onTableSelectChange:(e,t,r)=>{if(!r)return;const n=[...v];e.filter((e=>{const t=n.findIndex((t=>t.name===e));return!(t>=0&&(n.splice(t,1),1))})).forEach((e=>{i((0,d.addTable)(l,e,t,r))})),i((0,d.removeTables)(n))},tableValue:S,sqlLabMode:!0}),(0,h.Y)("div",{className:"divider"}),(0,h.Y)(um,{children:(0,h.Y)("div",{css:a.AH`
            height: ${x}px;
          `,children:(0,h.Y)(Xh.A,{activeKey:v.filter((({expanded:e})=>e)).map((({id:e})=>e)),css:hm,expandIconPosition:"right",ghost:!0,onChange:e=>{v.forEach((t=>{!e.includes(t.id.toString())&&t.expanded?i((0,d.collapseTable)(t)):e.includes(t.id.toString())&&!t.expanded&&i((0,d.expandTable)(t))}))},expandIcon:({isActive:e})=>(0,h.Y)(nn,{css:a.AH`
        transform: rotate(90deg);
      `,"aria-label":"Collapse",tooltip:e?(0,w.t)("Collapse table preview"):(0,w.t)("Expand table preview"),children:(0,h.Y)(F.A.RightOutlined,{iconSize:"s",css:a.AH`
          transform: ${e?"rotateY(180deg)":""};
        `})}),children:v.map((e=>(0,h.Y)(dm,{table:e},e.id)))})})}),C&&(0,h.FD)(de.A,{buttonSize:"small",buttonStyle:"danger",onClick:k,children:[(0,h.Y)("i",{className:"fa fa-bomb"})," ",(0,w.t)("Reset state")]})]})};var fm=r(1639),gm=r(84248);const ym=[];var vm=r(28274);const bm=i.F.injectEndpoints({endpoints:e=>({databaseFunctions:e.query({providesTags:["DatabaseFunctions"],query:({dbId:e})=>({endpoint:`/api/v1/database/${e}/function_names/`,transformResponse:({json:e})=>e.function_names})})})}),{useDatabaseFunctionsQuery:wm}=bm,Sm=[],{useQueryState:Cm}=vn.IX.schemas,{useQueryState:xm}=vn.PG.tables,Em=e=>e.length>30&&{docText:e},$m=(0,le.a)(),_m=(0,b.I4)(Ee.pw)`
  ${({theme:e})=>a.AH`
    && {
      // double class is better than !important
      border: 1px solid ${e.colors.grayscale.light2};
      font-feature-settings:
        'liga' off,
        'calt' off;
    }
  `}
`,Am=({autocomplete:e,onBlur:t=()=>{},onChange:r=()=>{},queryEditorId:o,onCursorPositionChange:l,height:c,hotkeys:u})=>{var m;const p=(0,s.wA)(),f=_e(o,["id","dbId","sql","catalog","schema","templateParams"]),g=(0,s.d4)((({sqlLab:{queryEditors:e}})=>{const{cursorPosition:t}={...e.find((({id:e})=>e===o))};return null!=t?t:{row:0,column:0}}),s.bN),y=null!=(m=f.sql)?m:"",[v,C]=(0,n.useState)(y),x=(0,n.useRef)("");(0,n.useEffect)((()=>{p((0,d.queryEditorSetSelectedText)(f,null))}),[]);const E=(0,qe.Z)(y);(0,n.useEffect)((()=>{y!==E&&C(y)}),[y]);const{data:$}=function(e){const{sql:t,dbId:r,schema:n,templateParams:a}=e,o=(0,gm.Q)(t,S.$V),i=(0,s.d4)((({sqlLab:e,common:t})=>{var n,s,a,o;return Boolean(null==t||null==(n=t.conf)||null==(s=n.SQL_VALIDATORS_BY_ENGINE)?void 0:s[null==e||null==(a=e.databases)||null==(o=a[r||""])?void 0:o.backend])}));return(0,vn.IV)({dbId:r,schema:n,sql:o,templateParams:a},{skip:!(i&&r&&t),selectFromResult:({isLoading:e,isError:t,error:r,data:n})=>{const s=null!=r?r:{};let a=(null==s?void 0:s.error)||(null==s?void 0:s.statusText)||(0,w.t)("Unknown error");return a.includes("CSRF token")&&(a=(0,w.t)(fm.HL.SESSION_TIMED_OUT)),{data:!e&&null!=n&&n.length?n.map((e=>({type:"error",row:(e.line_number||0)-1,column:(e.start_column||0)-1,text:e.message}))):t?[{type:"error",row:0,column:0,text:`The server failed to validate your query.\n${a}`}]:ym}}})}({dbId:f.dbId,catalog:f.catalog,schema:f.schema,sql:y,templateParams:f.templateParams}),_=function({queryEditorId:e,dbId:t,catalog:r,schema:a},o=!1){const l=$m.get("sqleditor.extension.customAutocomplete"),c=null==l?void 0:l({queryEditorId:String(e),dbId:t,catalog:r,schema:a}),u=(0,s.wA)(),h=(0,n.useRef)(!1),m=h&&o,{currentData:p}=Cm({dbId:t,catalog:r||void 0,forceRefresh:!1},{skip:m||!t}),{currentData:f}=xm({dbId:t,catalog:r,schema:a,forceRefresh:!1},{skip:m||!t||!a}),{currentData:g,isError:y}=wm({dbId:t},{skip:m||!t});(0,n.useEffect)((()=>{y&&u((0,d.addDangerToast)((0,w.t)("An error occurred while fetching function names.")))}),[u,y]);const v=(0,s.d4)((({sqlLab:t})=>{var r;return o?[]:(null!=(r=null==t?void 0:t.tables)?r:[]).filter((t=>t.queryEditorId===e)).map((e=>e.name))}),s.bN),b=(0,s.Pj)().getState()[i.F.reducerPath],C=(0,n.useMemo)((()=>{const e=new Set;return v.forEach((n=>{var s,o;null==(s=vn.PG.tableMetadata.select(t&&a?{dbId:t,catalog:r,schema:a,table:n}:vn.hT)({[i.F.reducerPath]:b}).data)||null==(o=s.columns)||o.forEach((({name:t})=>{e.add(t)}))})),[...e]}),[t,r,a,b,v]),x=(0,U.A)(((n,s)=>{"table"===s.meta&&u((0,d.addTable)({id:e,dbId:t},s.value,r,a));let{caption:o}=s;"table"===s.meta&&o.includes(" ")&&(o=`"${o}"`),n.completer.insertMatch(`${o}${["function","schema"].includes(s.meta)?"":" "}`)})),E=(0,n.useMemo)((()=>(null!=p?p:[]).map((e=>({name:e.label,value:e.value,score:S.e3,meta:"schema",completer:{insertMatch:x},...Em(e.value)})))),[p,x]),$=(0,n.useMemo)((()=>{var e;return(null!=(e=null==f?void 0:f.options)?e:[]).map((({value:e,label:t})=>({name:t,value:e,score:S.de,meta:"table",completer:{insertMatch:x},...Em(e)})))}),[null==f?void 0:f.options,x]),_=(0,n.useMemo)((()=>C.map((e=>({name:e,value:e,score:S.v9,meta:"column",...Em(e)})))),[C]),A=(0,n.useMemo)((()=>(null!=g?g:[]).map((e=>({name:e,value:e,score:S.T_,meta:"function",completer:{insertMatch:x},...Em(e)})))),[g,x]),k=(0,n.useMemo)((()=>_.concat(E).concat($).concat(A).concat(vm.A).concat(null!=c?c:[])),[E,$,_,A,c]);return h.current=!o,o?Sm:k}({queryEditorId:o,dbId:f.dbId,catalog:f.catalog,schema:f.schema},!e),A=(0,b.DP)();return(0,h.FD)(h.FK,{children:[(0,h.Y)(a.mL,{styles:a.AH`
          .ace_text-layer {
            width: 100% !important;
          }

          .ace_autocomplete {
            // Use !important because Ace Editor applies extra CSS at the last second
            // when opening the autocomplete.
            width: ${130*A.gridUnit}px !important;
          }

          .ace_tooltip {
            max-width: ${S.fq}px;
          }

          .ace_scroller {
            background-color: ${A.colors.grayscale.light4};
          }
        `}),(0,h.Y)(_m,{keywords:_,onLoad:e=>{e.commands.addCommand({name:"runQuery",bindKey:{win:"Alt-enter",mac:"Alt-enter"},exec:()=>{t(v)}}),u.forEach((t=>{e.commands.addCommand({name:t.name,bindKey:{win:t.key,mac:t.key},exec:t.func})})),e.$blockScrolling=1/0,e.selection.on("changeSelection",(()=>{const t=e.getSelectedText();t!==x.current&&1!==t.length&&p((0,d.queryEditorSetSelectedText)(f,t)),x.current=t})),e.selection.on("changeCursor",(()=>{const t=e.getCursorPosition();l(t)}));const{row:r,column:n}=g;e.moveCursorToPosition({row:r,column:n}),e.focus(),e.scrollToLine(r,!0,!0)},onBlur:()=>{t(v)},height:c,onChange:e=>{e!==v&&(C(e),r(e))},width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:e,value:v,annotations:$})]})},km=(e,t,r)=>e?(0,h.FD)(h.FK,{children:[(0,h.Y)(F.A.Square,{iconSize:"xs",iconColor:r.colors.primary.light5}),(0,w.t)("Stop")]}):t?(0,w.t)("Run selection"):(0,w.t)("Run"),Pm=b.I4.span`
  button {
    line-height: 13px;
    // this is to over ride a previous transition built into the component
    transition: background-color 0ms;
    &:last-of-type {
      margin-right: ${({theme:e})=>2*e.gridUnit}px;
    }
    span[name='caret-down'] {
      display: flex;
      margin-left: ${({theme:e})=>1*e.gridUnit}px;
    }
  }
`,Tm=({allowAsync:e=!1,queryEditorId:t,queryState:r,overlayCreateAsMenu:s,runQuery:a,stopQuery:o})=>{const i=(0,b.DP)(),l=we({queryEditorId:t}),c=(0,T.UX)(),{selectedText:d,sql:u}=_e(t,["selectedText","sql"]),m=!!r&&["running","pending"].indexOf(r)>-1,p=s?Dn:de.A,f=d||u||"",g=!(null!=f&&f.replace(/(\/\*[^*]*\*\/)|(\/\/[^*]*)|(--[^.].*)/gm,"").trim()),y=(0,n.useMemo)((()=>"MacOS"===c?(0,w.t)("Stop running (Ctrl + x)"):(0,w.t)("Stop running (Ctrl + e)")),[c]);return(0,h.Y)(Pm,{children:(0,h.Y)(p,{onClick:()=>((e,t,r=()=>{},n=()=>{},s)=>(s(e?x.fL:x.Mr,{shortcut:!1}),e?n():r(!!t)))(m,e,a,o,l),disabled:g,tooltip:!g&&(m?y:(0,w.t)("Run query (Ctrl + Return)")),cta:!0,...s?{overlay:s,icon:(0,h.Y)(F.A.DownOutlined,{iconColor:g?i.colors.grayscale.base:i.colors.grayscale.light5}),trigger:"click"}:{buttonStyle:m?"warning":"primary"},children:km(m,d,i)})})};function Im(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}const Dm=({queryEditorId:e,maxRow:t,defaultQueryLimit:r})=>{const n=(0,s.wA)(),a=_e(e,["id","queryLimit"]),o=a.queryLimit||r,i=e=>n((0,d.queryEditorSetQueryLimit)(a,e));return(0,h.Y)(me.ms,{dropdownRender:()=>function(e,t){const r=[];for(let t=10;t<e;t*=10)r.push(t);return r.push(e),(0,h.Y)(ye.W1,{children:[...new Set(r)].map((e=>(0,h.FD)(ye.W1.Item,{onClick:()=>t(e),children:[Im(e)," "]},`${e}`)))})}(t,i),trigger:["click"],children:(0,h.FD)(de.A,{size:"small",showMarginRight:!1,type:"link",children:[(0,h.FD)("span",{children:[(0,w.t)("LIMIT"),":"]}),(0,h.Y)("span",{className:"limitDropdown",children:Im(o)}),(0,h.Y)(F.A.CaretDownOutlined,{iconSize:"m"})]})})},Om=(0,T.UX)();var Nm;!function(e){e.CtrlR="ctrl+r",e.CtrlEnter="ctrl+enter",e.CtrlShiftEnter="ctrl+shift+enter",e.CtrlP="ctrl+p",e.CtrlQ="ctrl+q",e.CtrlE="ctrl+e",e.CtrlT="ctrl+t",e.CtrlX="ctrl+x",e.AltEnter="alt+enter",e.CmdF="cmd+f",e.CmdOptF="cmd+opt+f",e.CtrlF="ctrl+f",e.CtrlH="ctrl+h",e.CtrlShiftF="ctrl+shift+f",e.CtrlLeft="ctrl+[",e.CtrlRight="ctrl+]"}(Nm||(Nm={}));const Rm={[Nm.CtrlR]:(0,w.t)("Run query"),[Nm.CtrlEnter]:(0,w.t)("Run query"),[Nm.AltEnter]:(0,w.t)("Run query"),[Nm.CtrlShiftEnter]:(0,w.t)("Run current query"),[Nm.CtrlX]:"MacOS"===Om?(0,w.t)("Stop query"):void 0,[Nm.CtrlE]:"MacOS"!==Om?(0,w.t)("Stop query"):void 0,[Nm.CtrlQ]:"Windows"===Om?(0,w.t)("New tab"):void 0,[Nm.CtrlT]:"Windows"!==Om?(0,w.t)("New tab"):void 0,[Nm.CtrlP]:(0,w.t)("Previous Line"),[Nm.CtrlShiftF]:(0,w.t)("Format SQL"),[Nm.CtrlLeft]:(0,w.t)("Switch to the previous tab"),[Nm.CtrlRight]:(0,w.t)("Switch to the next tab"),[Nm.CmdF]:"MacOS"===Om?(0,w.t)("Find"):void 0,[Nm.CtrlF]:"MacOS"!==Om?(0,w.t)("Find"):void 0,[Nm.CmdOptF]:"MacOS"===Om?(0,w.t)("Replace"):void 0,[Nm.CtrlH]:"MacOS"!==Om?(0,w.t)("Replace"):void 0},Mm=Object.entries(Rm).reduce(((e,[t,r])=>(r&&(e[r]=[...e[r]||[],t]),e)),{}),Fm=b.I4.span`
  font-size: ${({theme:e})=>e.typography.sizes.m}px;
  color: ${({theme:e})=>e.colors.text.help};
  padding-left: ${({theme:e})=>2*e.gridUnit}px;
`,jm=b.I4.div`
  display: flex;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.gridUnit}px;
  padding: ${({theme:e})=>2*e.gridUnit}px;
`,Lm=b.I4.code`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  color: ${({theme:e})=>e.colors.grayscale.dark1};
  border-radius: ${({theme:e})=>e.borderRadius}px;
  padding: ${({theme:e})=>`${e.gridUnit}px ${2*e.gridUnit}px`};
`,Ym=({children:e})=>(0,h.Y)(xe.A,{modalTitle:(0,w.t)("Keyboard shortcuts"),modalBody:(0,h.Y)("div",{children:Object.entries(Mm).map((([e,t])=>(0,h.FD)("div",{css:a.AH`
              display: table-row;
            `,children:[(0,h.Y)("div",{css:a.AH`
                display: table-cell;
                max-width: 200px;
                vertical-align: middle;
              `,children:(0,h.Y)(Fm,{children:e})}),(0,h.Y)("div",{css:a.AH`
                display: table-cell;
              `,children:(0,h.Y)(jm,{children:t.map((e=>(0,h.Y)(Lm,{children:e},e)))})})]},e)))}),triggerNode:e});var qm,Um;const zm=(0,D.A)(),Bm=null==zm||null==(qm=zm.common)||null==(Um=qm.conf)?void 0:Um.SCHEDULED_QUERIES,Wm=b.I4.div`
  padding: ${({theme:e})=>2*e.gridUnit}px;
  background: ${({theme:e})=>e.colors.grayscale.light5};
  display: flex;
  justify-content: space-between;
  border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  border-top: 0;
  column-gap: ${({theme:e})=>e.gridUnit}px;

  form {
    margin-block-end: 0;
  }

  .leftItems,
  .rightItems {
    display: flex;
    align-items: center;
    & > span {
      margin-right: ${({theme:e})=>2*e.gridUnit}px;
      display: inline-block;

      &:last-child {
        margin-right: 0;
      }
    }
  }

  .limitDropdown {
    white-space: nowrap;
  }
`,Vm=b.I4.div`
  flex: 0 0 ${({width:e})=>e}px;
  width: ${({width:e})=>e}px;
  padding: ${({theme:e,hide:t})=>t?0:2.5*e.gridUnit}px;
  border-right: 1px solid
    ${({theme:e,hide:t})=>t?"transparent":e.colors.grayscale.light2};
`,Hm=b.I4.div`
  ${({theme:e})=>a.AH`
    display: flex;
    flex-direction: row;
    height: 100%;

    .schemaPane {
      transition: transform ${e.transitionTiming}s ease-in-out;
    }

    .queryPane {
      flex: 1 1 auto;
      padding: ${2*e.gridUnit}px;
      overflow-y: auto;
      overflow-x: scroll;
    }

    .schemaPane-enter-done,
    .schemaPane-exit {
      transform: translateX(0);
      z-index: 7;
    }

    .schemaPane-exit-active {
      transform: translateX(-120%);
    }

    .schemaPane-enter-active {
      transform: translateX(0);
      max-width: ${75*e.gridUnit}px;
    }

    .schemaPane-enter,
    .schemaPane-exit-done {
      max-width: 0;
      transform: translateX(-120%);
      overflow: hidden;
    }

    .schemaPane-exit-done + .queryPane {
      margin-left: 0;
    }

    .gutter {
      border-top: 1px solid ${e.colors.grayscale.light2};
      border-bottom: 1px solid ${e.colors.grayscale.light2};
      width: 3%;
      margin: ${S.oL}px 47%;
    }

    .gutter.gutter-vertical {
      cursor: row-resize;
    }
  `}
`,Km=(0,le.a)(),Qm=(e,t,r)=>({[e]:`calc(${t}% - ${r+S.oL}px)`});var Gm={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},Jm={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};const Xm=({queryEditor:e,defaultQueryLimit:t,maxRow:r,displayLimit:i,saveQueryWarning:l,scheduleQueryWarning:c})=>{const u=(0,b.DP)(),m=(0,s.wA)(),{database:p,latestQuery:g,hideLeftBar:y,currentQueryEditorId:C,hasSqlStatement:E}=(0,s.d4)((({sqlLab:{unsavedQueryEditor:t,databases:r,queries:n,tabHistory:s}})=>{var a;let{dbId:o,latestQueryId:i,hideLeftBar:l}=e;return(null==t?void 0:t.id)===e.id&&(o=t.dbId||o,i=t.latestQueryId||i,l="boolean"==typeof t.hideLeftBar?t.hideLeftBar:l),{hasSqlStatement:Boolean((null==(a=e.sql)?void 0:a.trim().length)>0),database:r[o||""],latestQuery:n[i||""],hideLeftBar:l,currentQueryEditorId:s.slice(-1)[0]}}),s.bN),$=we({queryEditorId:e.id}),_=C===e.id,[A,k]=(0,n.useState)(0),[P,D]=(0,n.useState)(e.autorun),[O,N]=(0,n.useState)(""),[R,M]=(0,n.useState)(e.northPercent||S.du),[j,Y]=(0,n.useState)(e.southPercent||S.tR),[z,B]=(0,n.useState)((0,ve.Gq)(ve.Hh.SqllabIsAutocompleteEnabled,!0)),[W,V]=(0,n.useState)((0,ve.Gq)(ve.Hh.SqllabIsRenderHtmlEnabled,!0)),[H,K]=(0,n.useState)(!1),[Q,G]=(0,n.useState)(""),J=(0,n.useMemo)((()=>!p||L()(p)),[p]),X=(0,n.useRef)(null),Z=(0,n.useRef)(null),ee=Km.get("sqleditor.extension.form"),te=(0,n.useCallback)(((r=!1,n=d.CtasEnum.Table)=>{p&&(m((0,d.runQueryFromSqlEditor)(p,e,t,r?O:"",r,n)),m((0,d.setActiveSouthPaneTab)("Results")))}),[O,p,t,m,e]),re=(0,n.useCallback)((t=>{$(x.Ob,{shortcut:Boolean(t)}),m((0,d.formatQuery)(e))}),[m,e,$]),ne=(0,n.useCallback)((()=>(g&&["running","pending"].indexOf(g.state)>=0&&m((0,d.postStopQuery)(g)),!1)),[m,g]),se=()=>{p&&te()};(0,n.useEffect)((()=>{P&&(D(!1),m((0,d.queryEditorSetAutorun)(e,!1)),te())}),[P,m,e,te]);const ae=()=>X.current?X.current.clientHeight-2*S.b:0,le=(0,n.useCallback)((()=>{const t=(0,T.UX)();return[{name:"runQuery1",key:Nm.CtrlR,descr:Rm[Nm.CtrlR],func:()=>{""!==e.sql.trim()&&($(x.Mr,{shortcut:!0}),te())}},{name:"runQuery2",key:Nm.CtrlEnter,descr:Rm[Nm.CtrlEnter],func:()=>{""!==e.sql.trim()&&($(x.Mr,{shortcut:!0}),te())}},{name:"newTab",..."Windows"===t?{key:Nm.CtrlQ,descr:Rm[Nm.CtrlQ]}:{key:Nm.CtrlT,descr:Rm[Nm.CtrlT]},func:()=>{x.Vy.markTimeOrigin(),m((0,d.addNewQueryEditor)())}},{name:"stopQuery",..."MacOS"===t?{key:Nm.CtrlX,descr:Rm[Nm.CtrlX]}:{key:Nm.CtrlE,descr:Rm[Nm.CtrlE]},func:()=>{$(x.fL,{shortcut:!0}),ne()}},{name:"formatQuery",key:Nm.CtrlShiftF,descr:Rm[Nm.CtrlShiftF],func:()=>{re(!0)}},{name:"switchTabToLeft",key:Nm.CtrlLeft,descr:Rm[Nm.CtrlLeft],func:()=>{m((0,d.switchQueryEditor)(!0))}},{name:"switchTabToRight",key:Nm.CtrlRight,descr:Rm[Nm.CtrlRight],func:()=>{m((0,d.switchQueryEditor)(!1))}}]}),[m,e.sql,te,ne,re]),Se=(0,n.useMemo)((()=>{const e=(0,T.UX)(),t=[...le(),{name:"runQuery3",key:Nm.CtrlShiftEnter,descr:Rm[Nm.CtrlShiftEnter],func:e=>{var t,r,n,s,a;if(!e.getValue().trim())return;const o=e.getSession(),i=e.getCursorPosition(),l=o.getLength(),c=e.getFirstVisibleRow(),d=e.find(";",{backwards:!1,skipCurrent:!0});let u;d&&({end:u}=d),(!u||u.row<i.row)&&(u={row:l+1,column:0});const h=e.find(";",{backwards:!0,skipCurrent:!0});let m;h&&(m=h.end);let p=null==(t=m)?void 0:t.row;(!p||p>i.row||p===i.row&&((null==(r=m)?void 0:r.column)||0)>i.column)&&(p=0);let f=p===(null==(n=m)?void 0:n.row)?o.getLine(p).slice(m.column).trim():o.getLine(p).trim();for(;!f&&p<l;)p+=1,f=o.getLine(p).trim();p!==(null==(s=m)?void 0:s.row)&&(m={row:p,column:0}),e.selection.setSelectionRange({start:null!=(a=m)?a:{row:0,column:0},end:u}),te(),e.selection.clearSelection(),e.moveCursorToPosition(i),e.scrollToRow(c)}}];return"MacOS"===e&&t.push({name:"previousLine",key:Nm.CtrlP,descr:Rm[Nm.CtrlP],func:e=>{e.navigateUp()}}),t}),[le,te]),Ce=(0,U.A)((e=>{var t;null!=p&&null!=(t=p.extra_json)&&t.cancel_query_on_windows_unload&&"running"===(null==g?void 0:g.state)&&(e.preventDefault(),ne())})),xe=(0,o.G7)(o.TO.SqllabBackendPersistence)&&!e.loaded,Ee=(0,U.A)((()=>{const t=x.Vy.getTimestamp();$(x.CY,{duration:t,queryEditorId:e.id,inLocalStorage:Boolean(e.inLocalStorage),hasLoaded:!xe}),xe&&m((0,d.fetchQueryEditor)(e,i))}));(0,n.useEffect)((()=>{k(ae());const e=f()((()=>k(ae())),S.A7);return _&&(Ee(),window.addEventListener("resize",e),window.addEventListener("beforeunload",Ce)),()=>{window.removeEventListener("resize",e),window.removeEventListener("beforeunload",Ce)}}),[Ce,Ee,_]),(0,n.useEffect)((()=>{const e=le();_&&e.forEach((e=>{v().bind([e.key],e.func)}))}),[le,g,_]);const $e=()=>{const e=document.getElementsByClassName("ace_content")[0];e&&(e.style.height="100%")},_e=([t,r])=>{var n;M(t),Y(r),null!=(n=Z.current)&&n.clientHeight&&m((0,d.persistEditorHeight)(e,t,r))},Ae=(0,n.useCallback)((t=>{m((0,d.queryEditorSetAndSaveSql)(e,t))}),[m,e]),ke=(0,n.useMemo)((()=>q()(Ae,S.cD)),[Ae]),Te=(0,U.A)((t=>{m((0,d.queryEditorSetSql)(e,t))})),Ie=()=>{$(x.Lb,{shortcut:!1}),p&&m((0,d.estimateQueryCost)(e))},De=()=>{(0,ve.SO)(ve.Hh.SqllabIsAutocompleteEnabled,!z),B(!z)},Oe=()=>{(0,ve.SO)(ve.Hh.SqllabIsRenderHtmlEnabled,!W),V(!W)},Ne=async(t,r)=>{const n=await m((0,d.saveQuery)(t,r));m((0,d.addSavedQueryToTabState)(e,n))},Re=n=>{var s;const{allow_ctas:i,allow_cvas:f}=p||{},y=i||f,v=(0,h.FD)(ye.W1,{children:[i&&(0,h.Y)(ye.W1.Item,{onClick:()=>{$(x.Ek,{shortcut:!1}),K(!0),G(d.CtasEnum.Table)},children:(0,w.t)("CREATE TABLE AS")},"1"),f&&(0,h.Y)(ye.W1.Item,{onClick:()=>{$(x.XC,{shortcut:!1}),K(!0),G(d.CtasEnum.View)},children:(0,w.t)("CREATE VIEW AS")},"2")]});return(0,h.Y)(Wm,{className:"sql-toolbar",id:"js-sql-toolbar",children:n?(0,h.Y)(be.A,{type:"warning",message:(0,w.t)("The database that was used to generate this query could not be found"),description:(0,w.t)("Choose one of the available databases on the left panel."),closable:!1}):(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{className:"leftItems",children:[(0,h.Y)("span",{children:(0,h.Y)(Tm,{allowAsync:!0===(null==p?void 0:p.allow_run_async),queryEditorId:e.id,queryState:null==g?void 0:g.state,runQuery:se,stopQuery:ne,overlayCreateAsMenu:y?v:null})}),(0,o.G7)(o.TO.EstimateQueryCost)&&(null==p?void 0:p.allows_cost_estimate)&&(0,h.Y)("span",{children:(0,h.Y)(Hh,{getEstimate:Ie,queryEditorId:e.id,tooltip:(0,w.t)("Estimate the cost before running a query")})}),(0,h.Y)("span",{children:(0,h.Y)(Dm,{queryEditorId:e.id,maxRow:r,defaultQueryLimit:t})}),g&&(0,h.Y)(ue.A,{startTime:g.startDttm,endTime:g.endDttm,status:S.sA[g.state],isRunning:"running"===g.state})]}),(0,h.FD)("div",{className:"rightItems",children:[(0,h.Y)("span",{children:(0,h.Y)(Mn,{queryEditorId:e.id,columns:(null==g||null==(s=g.results)?void 0:s.columns)||[],onSave:Ne,onUpdate:(e,t)=>m((0,d.updateSavedQuery)(e,t)),saveQueryWarning:l,database:p})}),(0,h.Y)("span",{children:(0,h.Y)(Gh,{queryEditorId:e.id})}),(0,h.Y)(me.ms,{dropdownRender:()=>(()=>{const t=e,r="success"===(null==g?void 0:g.state),n=r?(0,w.t)("Schedule the query periodically"):(0,w.t)("You must run the query successfully first");return(0,h.FD)(ye.W1,{css:(0,a.AH)({width:50*u.gridUnit},"",""),children:[(0,h.FD)(ye.W1.Item,{css:Gm,children:[" ",(0,h.Y)("span",{children:(0,w.t)("Render HTML")})," ",(0,h.Y)(fe.d,{checked:W,onChange:Oe})," "]}),(0,h.FD)(ye.W1.Item,{css:Jm,children:[" ",(0,h.Y)("span",{children:(0,w.t)("Autocomplete")})," ",(0,h.Y)(fe.d,{checked:z,onChange:De})," "]}),(0,o.G7)(o.TO.EnableTemplateProcessing)&&(0,h.Y)(ye.W1.Item,{children:(0,h.Y)(Pe,{language:"json",onChange:e=>{m((0,d.queryEditorSetTemplateParams)(t,e))},queryEditorId:t.id})}),(0,h.Y)(ye.W1.Item,{onClick:()=>re(),children:(0,w.t)("Format SQL")}),!L()(Bm)&&(0,h.Y)(ye.W1.Item,{children:(0,h.Y)(Bh,{defaultLabel:t.name,sql:t.sql,onSchedule:e=>m((0,d.scheduleQuery)(e)),schema:t.schema,dbId:t.dbId,scheduleQueryWarning:c,tooltip:n,disabled:!r})}),(0,h.Y)(ye.W1.Item,{children:(0,h.Y)(Ym,{children:(0,w.t)("Keyboard shortcuts")})})]})})(),trigger:["click"],children:(0,h.Y)(de.A,{buttonSize:"xsmall",type:"link",showMarginRight:!1,children:(0,h.Y)(F.A.EllipsisOutlined,{})})})]})]})})},Me=t=>{m((0,d.queryEditorSetCursorPosition)(e,t))},Fe=Q===d.CtasEnum.View?"CREATE VIEW AS":"CREATE TABLE AS",je=Q===d.CtasEnum.View?(0,w.t)("Specify name to CREATE VIEW AS schema in: public"):(0,w.t)("Specify name to CREATE TABLE AS schema in: public"),Le=y?"schemaPane-exit-done":"schemaPane-enter-done";return(0,h.FD)(Hm,{ref:X,className:"SqlEditor",children:[(0,h.Y)(oe,{classNames:"schemaPane",in:!y,timeout:300,children:(0,h.Y)(he.A,{id:`sqllab:${e.id}`,minWidth:S.fq,initialWidth:S.fq,enable:!y,children:t=>(0,h.Y)(Vm,{className:`schemaPane ${Le}`,width:t,hide:y,children:(0,h.Y)(pm,{database:p,queryEditorId:e.id})})})}),xe?(0,h.Y)("div",{css:a.AH`
            flex: 1;
            padding: ${4*u.gridUnit}px;
          `,children:(0,h.Y)(pe.EA,{active:!0})}):J&&!E?(0,h.Y)(I.p,{image:"vector.svg",size:"large",title:(0,w.t)("Select a database to write a query"),description:(0,w.t)("Choose one of the available databases from the panel on the left.")}):(()=>{const{aceEditorHeight:r,southPaneHeight:n}=((e,t,r)=>({aceEditorHeight:e*t/(25*u.gridUnit)-(S.B8/2+S.oL)-S.d$,southPaneHeight:e*r/(25*u.gridUnit)-(S.B8/2+S.oL)}))(A,R,j);return(0,h.FD)(ie.A,{expandToMin:!0,className:"queryPane",sizes:[R,j],elementStyle:Qm,minSize:200,direction:"vertical",gutterSize:S.B8,onDragStart:$e,onDragEnd:_e,children:[(0,h.FD)("div",{ref:Z,className:"north-pane",children:[ee&&(0,h.Y)(ee,{queryEditorId:e.id,setQueryEditorAndSaveSqlWithDebounce:ke,startQuery:te}),_&&(0,h.Y)(Am,{autocomplete:z,onBlur:Te,onChange:Te,queryEditorId:e.id,onCursorPositionChange:Me,height:`${r}px`,hotkeys:Se}),Re(J)]}),(0,h.Y)(An,{queryEditorId:e.id,latestQueryId:null==g?void 0:g.id,height:n,displayLimit:i,defaultQueryLimit:t})]})})(),(0,h.FD)(ce.Ay,{show:H,title:(0,w.t)(Fe),onHide:()=>K(!1),footer:(0,h.FD)(h.FK,{children:[(0,h.Y)(de.A,{onClick:()=>K(!1),children:(0,w.t)("Cancel")}),Q===d.CtasEnum.Table&&(0,h.Y)(de.A,{buttonStyle:"primary",disabled:0===O.length,onClick:()=>{te(!0,d.CtasEnum.Table),K(!1),N("")},children:(0,w.t)("Create")}),Q===d.CtasEnum.View&&(0,h.Y)(de.A,{buttonStyle:"primary",disabled:0===O.length,onClick:()=>{te(!0,d.CtasEnum.View),K(!1),N("")},children:(0,w.t)("Create")})]}),children:[(0,h.Y)("span",{children:(0,w.t)("Name")}),(0,h.Y)(ge.pd,{placeholder:je,onChange:e=>{N(e.target.value)}})]})]})};var Zm=r(82960);const ep=b.I4.div`
  display: flex;
  align-items: center;

  [aria-label='check-circle'],
  .status-icon {
    margin: 0px;
  }
`,tp=b.I4.span`
  margin-right: ${({theme:e})=>2*e.gridUnit}px;
  text-transform: none;
`,rp=b.I4.div`
  ${({theme:e})=>a.AH`
    display: inline-block;
    margin: 0 ${2*e.gridUnit}px 0 0px;
  `}
`,np={started:F.A.CircleSolid,stopped:F.A.StopOutlined,pending:F.A.CircleSolid,scheduled:F.A.CalendarOutlined,fetching:F.A.CircleSolid,timedOut:F.A.FieldTimeOutlined,running:F.A.CircleSolid,success:F.A.CheckCircleOutlined,failed:F.A.CloseCircleOutlined},sp=({queryEditor:e})=>{const t=(0,b.DP)(),r=(0,s.d4)((({sqlLab:{unsavedQueryEditor:t}})=>({...e,...e.id===(null==t?void 0:t.id)&&t})),s.bN),o=(0,s.d4)((({sqlLab:e})=>{var t;return(null==(t=e.queries[r.latestQueryId||""])?void 0:t.state)||""})),i=o?np[o]:np.running,l=(0,s.wA)(),c=(0,n.useMemo)((()=>(0,Zm.zH)({removeQueryEditor:d.removeQueryEditor,removeAllOtherQueryEditors:d.removeAllOtherQueryEditors,queryEditorSetTitle:d.queryEditorSetTitle,cloneQueryToNewTab:d.cloneQueryToNewTab,toggleLeftBar:d.toggleLeftBar},l)),[l]);return(0,h.FD)(ep,{children:[(0,h.Y)(me.LO,{trigger:["click"],overlay:(0,h.FD)(ye.W1,{children:[(0,h.FD)(ye.W1.Item,{className:"close-btn",onClick:()=>c.removeQueryEditor(r),children:[(0,h.Y)(rp,{children:(0,h.Y)(F.A.CloseOutlined,{iconSize:"l",css:a.AH`
                    verticalalign: middle;
                  `})}),(0,w.t)("Close tab")]},"1"),(0,h.FD)(ye.W1.Item,{onClick:function(){const e=prompt((0,w.t)("Enter a new title for the tab"));e&&c.queryEditorSetTitle(r,e,r.id)},children:[(0,h.Y)(rp,{children:(0,h.Y)(F.A.EditOutlined,{css:a.AH`
                    verticalalign: middle;
                  `,iconSize:"l"})}),(0,w.t)("Rename tab")]},"2"),(0,h.FD)(ye.W1.Item,{onClick:()=>c.toggleLeftBar(r),children:[(0,h.Y)(rp,{children:(0,h.Y)(F.A.VerticalAlignBottomOutlined,{iconSize:"l",css:a.AH`
                    rotate: ${r.hideLeftBar?"-90deg;":"90deg;"};
                  `})}),r.hideLeftBar?(0,w.t)("Expand tool bar"):(0,w.t)("Hide tool bar")]},"3"),(0,h.FD)(ye.W1.Item,{onClick:()=>c.removeAllOtherQueryEditors(r),children:[(0,h.Y)(rp,{children:(0,h.Y)(F.A.CloseOutlined,{iconSize:"l",css:a.AH`
                    vertical-align: middle;
                  `})}),(0,w.t)("Close all other tabs")]},"4"),(0,h.FD)(ye.W1.Item,{onClick:()=>c.cloneQueryToNewTab(r,!1),children:[(0,h.Y)(rp,{children:(0,h.Y)(F.A.CopyOutlined,{iconSize:"l",css:a.AH`
                    vertical-align: middle;
                  `})}),(0,w.t)("Duplicate tab")]},"5")]})}),(0,h.Y)(tp,{children:r.name}),(0,h.Y)(i,{className:"status-icon",iconSize:"xs",iconColor:((e,t)=>({[ze.kZ.Running]:t.colors.info.base,[ze.kZ.Success]:t.colors.success.base,[ze.kZ.Failed]:t.colors.error.base,[ze.kZ.Started]:t.colors.primary.base,[ze.kZ.Stopped]:t.colors.warning.base,[ze.kZ.Pending]:t.colors.grayscale.light1,[ze.kZ.Scheduled]:t.colors.grayscale.light2,[ze.kZ.Fetching]:t.colors.secondary.base,[ze.kZ.TimedOut]:t.colors.error.dark1}[e]||t.colors.grayscale.light2))(o,t)})]})},ap={queryEditors:[],offline:!1,saveQueryWarning:null,scheduleQueryWarning:null},op=(0,b.I4)(_.fn)`
  height: 100%;
  display: flex;
  flex-direction: column;
`,ip=b.I4.span`
  line-height: 24px;
`,lp=b.I4.span`
  margin-right: ${({theme:e})=>2*e.gridUnit}px;
  text-transform: none;
`,cp=(0,T.UX)(),dp="/sqllab";class up extends n.PureComponent{constructor(e){super(e),this.onTabClicked=()=>{var e;x.Vy.markTimeOrigin(),0===(null==(e=this.props.queryEditors)?void 0:e.length)&&this.newQueryEditor()},this.removeQueryEditor=this.removeQueryEditor.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleEdit=this.handleEdit.bind(this)}componentDidMount(){var e;const t=(0,D.A)(),r=k()(window.location).search(!0),n=k()(window.location).path(),{id:s,name:a,sql:i,savedQueryId:l,datasourceKey:c,queryId:d,dbid:u,dbname:h,catalog:m,schema:p,autorun:f,new:g,...y}={...this.context.requestedQuery,...t.requested_query,...r},v=null==(e=n.match(/\/p\/\w+/))?void 0:e[0].slice(3);if(v||s||i||l||c||d){if(v)this.props.actions.popPermalink(v);else if(s)this.props.actions.popStoredQuery(s);else if(l)this.props.actions.popSavedQuery(l);else if(d)this.props.actions.popQuery(d);else if(c)this.props.actions.popDatasourceQuery(c,i);else if(i){let e=u;if(e)e=parseInt(e,10);else{const{databases:t}=this.props,r=h;r&&Object.keys(t).forEach((n=>{t[n].database_name===r&&(e=t[n].id)}))}const t={name:a,dbId:e,catalog:m,schema:p,autorun:f,sql:i};this.props.actions.addQueryEditor(t)}this.popNewTab($()(y,Object.keys(null!=r?r:{})))}else if(g||0===this.props.queryEditors.length)this.newQueryEditor(),g&&window.history.replaceState({},document.title,dp);else{const e=this.activeQueryEditor(),t=this.props.queries[(null==e?void 0:e.latestQueryId)||""];(0,o.G7)(o.TO.SqllabBackendPersistence)&&t&&t.resultsKey&&this.props.actions.fetchQueryResults(t,this.props.displayLimit)}}popNewTab(e){const t=`${k()(dp).query(e)}`;window.history.replaceState({},document.title,t)}activeQueryEditor(){if(0===this.props.tabHistory.length)return this.props.queryEditors[0];const e=this.props.tabHistory[this.props.tabHistory.length-1];return this.props.queryEditors.find((t=>t.id===e))||null}newQueryEditor(){this.props.actions.addNewQueryEditor()}handleSelect(e){const t=this.props.tabHistory[this.props.tabHistory.length-1];if(e!==t){const t=this.props.queryEditors.find((t=>t.id===e));if(!t)return;this.props.actions.setActiveQueryEditor(t)}}handleEdit(e,t){if("remove"===t){const t=this.props.queryEditors.find((t=>t.id===e));t&&this.removeQueryEditor(t)}"add"===t&&(x.Vy.markTimeOrigin(),this.newQueryEditor())}removeQueryEditor(e){this.props.actions.removeQueryEditor(e)}render(){var e,t;const r=0===(null==(e=this.props.queryEditors)?void 0:e.length),n=null==(t=this.props.queryEditors)?void 0:t.map((e=>(0,h.Y)(_.fn.TabPane,{tab:(0,h.Y)(sp,{queryEditor:e}),"data-key":e.id,children:(0,h.Y)(Xm,{queryEditor:e,defaultQueryLimit:this.props.defaultQueryLimit,maxRow:this.props.maxRow,displayLimit:this.props.displayLimit,saveQueryWarning:this.props.saveQueryWarning,scheduleQueryWarning:this.props.scheduleQueryWarning})},e.id))),s=(0,h.FD)(ip,{children:[(0,h.Y)(lp,{children:(0,w.t)("Add a new tab")}),(0,h.Y)(P.m_,{id:"add-tab",placement:"bottom",title:"Windows"===cp?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,h.Y)(F.A.PlusCircleOutlined,{iconSize:"s",css:a.AH`
              vertical-align: middle;
            `})})]}),o=(0,h.Y)(_.fn.TabPane,{"data-key":0,tab:s,closable:!1,children:(0,h.Y)(I.p,{image:"empty_sql_chart.svg",size:"large",description:(0,w.t)("Add a new tab to create SQL Query")})},0);return(0,h.FD)(op,{activeKey:this.props.tabHistory[this.props.tabHistory.length-1],id:"a11y-query-editor-tabs",className:"SqlEditorTabs",onChange:this.handleSelect,fullWidth:!1,hideAdd:this.props.offline,onTabClick:this.onTabClicked,onEdit:this.handleEdit,type:r?"card":"editable-card",addIcon:(0,h.Y)(P.m_,{id:"add-tab",placement:"bottom",title:"Windows"===cp?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,h.Y)(F.A.PlusCircleOutlined,{iconSize:"l",css:a.AH`
                vertical-align: middle;
              `})}),children:[n,r&&o]})}}up.contextType=O;const hp={...d},mp=(0,s.Ng)((function({sqlLab:e,common:t}){var r,n,s,a;return{databases:e.databases,queryEditors:null!=(r=e.queryEditors)?r:ap.queryEditors,queries:e.queries,tabHistory:e.tabHistory,defaultDbId:t.conf.SQLLAB_DEFAULT_DBID,displayLimit:t.conf.DISPLAY_MAX_ROW,offline:null!=(n=e.offline)?n:ap.offline,defaultQueryLimit:t.conf.DEFAULT_SQLLAB_LIMIT,maxRow:t.conf.SQL_MAX_ROW,saveQueryWarning:null!=(s=t.conf.SQLLAB_SAVE_WARNING_MESSAGE)?s:ap.saveQueryWarning,scheduleQueryWarning:null!=(a=t.conf.SQLLAB_SCHEDULE_WARNING_MESSAGE)?a:ap.scheduleQueryWarning}}),hp,(function(e,t){return{...e,actions:t}}))(up);var pp=r(58561),fp=r.n(pp);const gp=2e3,yp=function({queries:e,queriesLastUpdate:t}){const r=(0,n.useRef)(!1),a=(0,n.useRef)(!1),o=(0,s.wA)();return function(e,t){const r=(0,n.useRef)(e);(0,n.useEffect)((()=>{r.current=e}),[e]),(0,n.useEffect)((()=>{if(null!==t){const e=setInterval((function(){null==r||null==r.current||r.current()}),t);return()=>clearInterval(e)}return()=>{}}),[t])}((()=>{(()=>{const n=(e=>{let t=!1;const r=Date.now();return xs()(e)&&(t=Object.values(e).some((e=>(e=>ze.P7.includes(null==e?void 0:e.state))(e)&&r-(null==e?void 0:e.startDttm)<216e5))),t})(e);if(!r.current&&n){const e=fp().encode({last_updated_ms:t-5e3}),n=new AbortController;r.current=!0,Kh.A.get({endpoint:`/api/v1/query/updated_since?q=${e}`,timeout:1e4,parseMethod:"json-bigint",signal:n.signal}).then((({json:e})=>{if(e){var t;const s=e;if(null!=s&&null!=(t=s.result)&&t.length){var r,n;const e=null!=(r=null==s||null==(n=s.result)?void 0:n.reduce(((e,t)=>(e[t.id]=t,e)),{}))?r:{};o((0,d.refreshQueries)(e))}else o((0,d.clearInactiveQueries)(gp))}})).catch((()=>{n.abort()})).finally((()=>{r.current=!1}))}a.current||n||(o((0,d.clearInactiveQueries)(gp)),a.current=!0)})()}),gp),null},vp=b.I4.div`
  ${({theme:e})=>a.AH`
    &.SqlLab {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      padding: 0 ${2*e.gridUnit}px;

      pre:not(.code) {
        padding: 0 !important;
        margin: 0;
        border: none;
        font-size: ${e.typography.sizes.s}px;
        background: transparent !important;
      }

      .north-pane {
        display: flex;
        flex-direction: column;
      }

      .ace_editor {
        flex-grow: 1;
      }

      .ace_content {
        height: 100%;
      }

      .ant-tabs-content-holder {
        /* This is needed for Safari */
        height: 100%;
      }

      .ant-tabs-content {
        height: 100%;
        position: relative;
        background-color: ${e.colors.grayscale.light5};
        overflow-x: auto;
        overflow-y: auto;

        > .ant-tabs-tabpane {
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
        }
      }

      .ResultsModal .antd5-modal-body {
        min-height: ${140*e.gridUnit}px;
      }

      .antd5-modal-body {
        overflow: auto;
      }
    }
  `};
`;class bp extends n.PureComponent{constructor(e){super(e),this.hasLoggedLocalStorageUsage=void 0,this.state={hash:window.location.hash},this.showLocalStorageUsageWarning=f()(this.showLocalStorageUsageWarning,S.Cq,{trailing:!1})}componentDidMount(){window.addEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="none"}componentDidUpdate(){const{localStorageUsageInKilobytes:e,actions:t,queries:r}=this.props,n=Object.keys(r||{}).length||0;if(e>=S.sC*S.QJ&&this.showLocalStorageUsageWarning(e,n),e>0&&!this.hasLoggedLocalStorageUsage){const r={current_usage:e,query_count:n};t.logEvent(x.A_,r),this.hasLoggedLocalStorageUsage=!0}}componentWillUnmount(){window.removeEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="auto",v().reset()}onHashChanged(){this.setState({hash:window.location.hash})}showLocalStorageUsageWarning(e,t){this.props.actions.addDangerToast((0,w.t)("SQL Lab uses your browser's local storage to store queries and results.\nCurrently, you are using %(currentUsage)s KB out of %(maxStorage)d KB storage space.\nTo keep SQL Lab from crashing, please delete some query tabs.\nYou can re-access these queries by using the Save feature before you delete the tab.\nNote that you will need to close other SQL Lab windows before you do this.",{currentUsage:e.toFixed(2),maxStorage:S.QJ}));const r={current_usage:e,query_count:t};this.props.actions.logEvent(x.hK,r)}render(){const{queries:e,queriesLastUpdate:t}=this.props;return this.state.hash&&"#search"===this.state.hash?(0,h.Y)(g.rd,{to:{pathname:"/sqllab/history/"}}):(0,h.FD)(vp,{className:"App SqlLab",children:[(0,h.Y)(yp,{queries:e,queriesLastUpdate:t}),(0,h.Y)(mp,{})]})}}const wp={addDangerToast:u.iB,logEvent:C.logEvent},Sp=(0,s.Ng)((function(e){const{common:t,localStorageUsageInKilobytes:r,sqlLab:n}=e;return{common:t,localStorageUsageInKilobytes:r,queries:null==n?void 0:n.queries,queriesLastUpdate:null==n?void 0:n.queriesLastUpdate}}),wp,(function(e,t,r){return{...r,...e,actions:t}}))(bp);var Cp=r(94500);function xp(){const e=(0,s.d4)((e=>e.sqlLab.queriesLastUpdate||0)),{data:t,isLoading:r,isError:i,error:l,fulfilledTimeStamp:p}=c(),f=e<=(p||0),g=(0,s.wA)(),y=(0,U.A)((e=>{f&&g((0,d.resetState)(e))}));return(0,n.useEffect)((()=>{t&&y(t)}),[t,y]),r||f?(0,h.Y)(Qe.A,{}):i&&null!=l&&l.message?(g((0,u.iB)(null==l?void 0:l.message)),null):(0,h.Y)(M,{children:(0,h.FD)("div",{css:a.AH`
          flex: 1 1 auto;
          position: relative;
          display: flex;
          flex-direction: column;
        `,children:[(0,h.Y)(m,{}),(0,h.Y)(Sp,{}),(0,o.G7)(o.TO.SqllabBackendPersistence)&&(0,h.Y)(Cp.Ay,{})]})})}},11051:(e,t,r)=>{const n=r(90370),s=r(39754),{allUniqueKeys:a,deleteUndefinedProps:o,has:i,isSchema:l,notUndefined:c,uniqWith:d}=r(5109);e.exports={keywords:["items","additionalItems"],resolver(e,t,r){const u=e.map((e=>e.items)),h=u.filter(c),m={};let p;var f;return h.every(l)?m.items=r.items(u):m.items=function(e,t,r){return a(r).reduce((function(r,s){const a=function(e,t){return e.map((function(e){if(e){if(!Array.isArray(e.items))return e.items;{const r=e.items[t];if(l(r))return r;if(i(e,"additionalItems"))return e.additionalItems}}}))}(e,s),o=d(a.filter(c),n);return r[s]=t(o,s),r}),[])}(e,r.items,u),h.every(Array.isArray)?p=e.map((e=>e.additionalItems)):h.some(Array.isArray)&&(p=e.map((function(e){if(e)return Array.isArray(e.items)?e.additionalItems:e.items}))),p&&(m.additionalItems=r.additionalItems(p)),!1===m.additionalItems&&Array.isArray(m.items)&&(f=m.items,s(f,(function(e,t){!1===e&&f.splice(t,1)}))),o(m)}}},11447:(e,t,r)=>{"use strict";var n=r(17991),s=r(8960);t.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var t=Number(e.totalPages);if(isNaN(t))throw new Error("getPaginationModel(): totalPages should be a number");if(t<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var r=Number(e.currentPage);if(isNaN(r))throw new Error("getPaginationModel(): currentPage should be a number");if(r<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(r>t)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var a=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(a))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(a<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var o=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(o))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(o<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var i=Boolean(e.hidePreviousAndNextPageLinks),l=Boolean(e.hideFirstAndLastPageLinks),c=Boolean(e.hideEllipsis),d=c?0:1,u=[],h=s.createPageFunctionFactory(e);if(l||u.push(s.createFirstPageLink(e)),i||u.push(s.createPreviousPageLink(e)),1+2*d+2*o+2*a>=t){var m=n.createRange(1,t).map(h);u.push.apply(u,m)}else{var p=a,f=n.createRange(1,p).map(h),g=t+1-a,y=t,v=n.createRange(g,y).map(h),b=Math.min(Math.max(r-o,p+d+1),g-d-2*o-1),w=b+2*o,S=n.createRange(b,w).map(h);if(u.push.apply(u,f),!c){var C=b-1,x=(C===p+1?h:s.createFirstEllipsis)(C);u.push(x)}if(u.push.apply(u,S),!c){var E=w+1,$=(E===g-1?h:s.createSecondEllipsis)(E);u.push($)}u.push.apply(u,v)}return i||u.push(s.createNextPageLink(e)),l||u.push(s.createLastPageLink(e)),u};var a=r(30327);t.ITEM_TYPES=a.ITEM_TYPES,t.ITEM_KEYS=a.ITEM_KEYS},12027:e=>{e.exports=function(e,t,r,n){for(var s=r-1,a=e.length;++s<a;)if(n(e[s],t))return s;return-1}},12358:(e,t,r)=>{var n=r(21988);e.exports=function(e,t){return e&&e.length&&t&&t.length?n(e,t):e}},12661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?n.str`must contain at least ${e} valid item(s)`:n.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?n._`{minContains: ${e}}`:n._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:o,it:i}=e;let l,c;const{minContains:d,maxContains:u}=a;i.opts.next?(l=void 0===d?1:d,c=u):l=1;const h=t.const("len",n._`${o}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,s.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,s.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,s.alwaysValidSchema)(i,r)){let t=n._`${h} >= ${l}`;return void 0!==c&&(t=n._`${t} && ${h} <= ${c}`),void e.pass(t)}i.items=!0;const m=t.name("valid");function p(){const e=t.name("_valid"),r=t.let("count",0);f(e,(()=>t.if(e,(()=>function(e){t.code(n._`${e}++`),void 0===c?t.if(n._`${e} >= ${l}`,(()=>t.assign(m,!0).break())):(t.if(n._`${e} > ${c}`,(()=>t.assign(m,!1).break())),1===l?t.assign(m,!0):t.if(n._`${e} >= ${l}`,(()=>t.assign(m,!0))))}(r)))))}function f(r,n){t.forRange("i",0,h,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:s.Type.Num,compositeRule:!0},r),n()}))}void 0===c&&1===l?f(m,(()=>t.if(m,(()=>t.break())))):0===l?(t.let(m,!0),void 0!==c&&t.if(n._`${o}.length > 0`,p)):(t.let(m,!1),p()),e.result(m,(()=>e.reset()))}};t.default=a},13558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},13693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const n=r(34551),s=r(15765),a=r(99029),o=r(64404),i=r(73835),l=r(94227),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:s}=e,{baseId:o,schemaEnv:l,validateName:c,opts:h,self:m}=s,{root:p}=l;if(("#"===r||"#/"===r)&&o===p.baseId)return function(){if(l===p)return u(e,c,l,l.$async);const r=t.scopeValue("root",{ref:p});return u(e,a._`${r}.validate`,p,p.$async)}();const f=i.resolveRef.call(m,p,o,r);if(void 0===f)throw new n.default(s.opts.uriResolver,o,r);return f instanceof i.SchemaEnv?function(t){const r=d(e,t);u(e,r,t,t.$async)}(f):function(n){const s=t.scopeValue("schema",!0===h.code.source?{ref:n,code:(0,a.stringify)(n)}:{ref:n}),o=t.name("valid"),i=e.subschema({schema:n,dataTypes:[],schemaPath:a.nil,topSchemaRef:s,errSchemaPath:r},o);e.mergeEvaluated(i),e.ok(o)}(f)}};function d(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):a._`${r.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,r,n){const{gen:i,it:c}=e,{allErrors:d,schemaEnv:u,opts:h}=c,m=h.passContext?o.default.this:a.nil;function p(e){const t=a._`${e}.errors`;i.assign(o.default.vErrors,a._`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`),i.assign(o.default.errors,a._`${o.default.vErrors}.length`)}function f(e){var t;if(!c.opts.unevaluated)return;const n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(n&&!n.dynamicProps)void 0!==n.props&&(c.props=l.mergeEvaluated.props(i,n.props,c.props));else{const t=i.var("props",a._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(i,t,c.props,a.Name)}if(!0!==c.items)if(n&&!n.dynamicItems)void 0!==n.items&&(c.items=l.mergeEvaluated.items(i,n.items,c.items));else{const t=i.var("items",a._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(i,t,c.items,a.Name)}}n?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const r=i.let("valid");i.try((()=>{i.code(a._`await ${(0,s.callValidateCode)(e,t,m)}`),f(t),d||i.assign(r,!0)}),(e=>{i.if(a._`!(${e} instanceof ${c.ValidationError})`,(()=>i.throw(e))),p(e),d||i.assign(r,!1)})),e.ok(r)}():e.result((0,s.callValidateCode)(e,t,m),(()=>f(t)),(()=>p(t)))}t.getValidate=d,t.callRef=u,t.default=c},14018:(e,t)=>{"use strict";function r(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:r(a,o),time:r(l,c),"date-time":r((function(e){const t=e.split(d);return 2===t.length&&a(t[0])&&l(t[1],!0)}),u),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&m.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(v.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return p.lastIndex=0,p.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=g&&e>=f}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:y},double:{type:"number",validate:y},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function a(e){const t=n.exec(e);if(!t)return!1;const r=+t[1],a=+t[2],o=+t[3];return a>=1&&a<=12&&o>=1&&o<=(2===a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:s[a])}function o(e,t){if(e&&t)return e>t?1:e<t?-1:0}const i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const r=i.exec(e);if(!r)return!1;const n=+r[1],s=+r[2],a=+r[3],o=r[5];return(n<=23&&s<=59&&a<=59||23===n&&59===s&&60===a)&&(!t||""!==o)}function c(e,t){if(!e||!t)return;const r=i.exec(e),n=i.exec(t);return r&&n?(e=r[1]+r[2]+r[3]+(r[4]||""))>(t=n[1]+n[2]+n[3]+(n[4]||""))?1:e<t?-1:0:void 0}const d=/t|\s/i;function u(e,t){if(!e||!t)return;const[r,n]=e.split(d),[s,a]=t.split(d),i=o(r,s);return void 0!==i?i||c(n,a):void 0}const h=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,p=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,f=-(2**31),g=2**31-1;function y(){return!0}const v=/[^\\]\\Z/},15457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const n=r(99029),s=r(94227),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;Array.isArray(n)?o(e,n):(0,s.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function o(e,t){const{gen:r,schema:a,data:o,keyword:i,it:l}=e;l.items=!0;const c=r.const("len",n._`${o}.length`);if(!1===a)e.setParams({len:t.length}),e.pass(n._`${c} <= ${t.length}`);else if("object"==typeof a&&!(0,s.alwaysValidSchema)(l,a)){const a=r.var("valid",n._`${c} <= ${t.length}`);r.if((0,n.not)(a),(()=>function(a){r.forRange("i",t.length,c,(t=>{e.subschema({keyword:i,dataProp:t,dataPropType:s.Type.Num},a),l.allErrors||r.if((0,n.not)(a),(()=>r.break()))}))}(a))),e.ok(a)}}t.validateAdditionalItems=o,t.default=a},15765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const n=r(99029),s=r(94227),a=r(64404),o=r(94227);function i(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:n._`Object.prototype.hasOwnProperty`})}function l(e,t,r){return n._`${i(e)}.call(${t}, ${r})`}function c(e,t,r,s){const a=n._`${t}${(0,n.getProperty)(r)} === undefined`;return s?(0,n.or)(a,(0,n.not)(l(e,t,r))):a}function d(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:r,data:s,it:a}=e;r.if(c(r,s,t,a.opts.ownProperties),(()=>{e.setParams({missingProperty:n._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},s,a){return(0,n.or)(...s.map((s=>(0,n.and)(c(e,t,s,r.ownProperties),n._`${a} = ${s}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=i,t.isOwnProperty=l,t.propertyInData=function(e,t,r,s){const a=n._`${t}${(0,n.getProperty)(r)} !== undefined`;return s?n._`${a} && ${l(e,t,r)}`:a},t.noPropertyInData=c,t.allSchemaProperties=d,t.schemaProperties=function(e,t){return d(t).filter((r=>!(0,s.alwaysValidSchema)(e,t[r])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:o,errorPath:i},it:l},c,d,u){const h=u?n._`${e}, ${t}, ${s}${o}`:t,m=[[a.default.instancePath,(0,n.strConcat)(a.default.instancePath,i)],[a.default.parentData,l.parentData],[a.default.parentDataProperty,l.parentDataProperty],[a.default.rootData,a.default.rootData]];l.opts.dynamicRef&&m.push([a.default.dynamicAnchors,a.default.dynamicAnchors]);const p=n._`${h}, ${r.object(...m)}`;return d!==n.nil?n._`${c}.call(${d}, ${p})`:n._`${c}(${p})`};const u=n._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){const s=t.unicodeRegExp?"u":"",{regExp:a}=t.code,i=a(r,s);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:n._`${"new RegExp"===a.code?u:(0,o.useFunc)(e,a)}(${r}, ${s})`})},t.validateArray=function(e){const{gen:t,data:r,keyword:a,it:o}=e,i=t.name("valid");if(o.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(i,!0),l((()=>t.break())),i;function l(o){const l=t.const("len",n._`${r}.length`);t.forRange("i",0,l,(r=>{e.subschema({keyword:a,dataProp:r,dataPropType:s.Type.Num},i),t.if((0,n.not)(i),o)}))}},t.validateUnion=function(e){const{gen:t,schema:r,keyword:a,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some((e=>(0,s.alwaysValidSchema)(o,e)))&&!o.opts.unevaluated)return;const i=t.let("valid",!1),l=t.name("_valid");t.block((()=>r.forEach(((r,s)=>{const o=e.subschema({keyword:a,schemaProp:s,compositeRule:!0},l);t.assign(i,n._`${i} || ${l}`),e.mergeValidEvaluated(o,l)||t.if((0,n.not)(i))})))),e.result(i,(()=>e.reset()),(()=>e.error(!0)))}},15844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach(((t,r)=>{if((0,n.alwaysValidSchema)(s,t))return;const o=e.subschema({keyword:"allOf",schemaProp:r},a);e.ok(a),e.mergeEvaluated(o)}))}};t.default=s},16505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(15765).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=n},17991:(e,t)=>{"use strict";t.createRange=function(e,t){for(var r=[],n=e;n<=t;n++)r.push(n);return r}},18575:(e,t,r)=>{"use strict";t.w$=t.uv=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=i(r(96540)),a=i(r(5556)),o=r(11447);function i(e){return e&&e.__esModule?e:{default:e}}t.uv=function(e){var t=e.itemTypeToComponent,r=e.WrapperComponent,i=void 0===r?"div":r,l=function(e){var r=e.currentPage,a=e.totalPages,l=e.boundaryPagesRange,c=e.siblingPagesRange,d=e.hideEllipsis,u=e.hidePreviousAndNextPageLinks,h=e.hideFirstAndLastPageLinks,m=e.onChange,p=e.disabled,f=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),g=(0,o.getPaginationModel)({currentPage:r,totalPages:a,boundaryPagesRange:l,siblingPagesRange:c,hideEllipsis:d,hidePreviousAndNextPageLinks:u,hideFirstAndLastPageLinks:h}),y=function(e,t,r){return function(a){var o,i,l,c=e[a.type],d=(i=(o=a).value,l=o.isDisabled,function(){!l&&r&&t!==i&&r(i)});return s.default.createElement(c,n({onClick:d},a))}}(t,r,m);return s.default.createElement(i,f,g.map((function(e){return y(n({},e,{isDisabled:!!p}))})))};return l.propTypes={currentPage:a.default.number.isRequired,totalPages:a.default.number.isRequired,boundaryPagesRange:a.default.number,siblingPagesRange:a.default.number,hideEllipsis:a.default.bool,hidePreviousAndNextPageLinks:a.default.bool,hideFirstAndLastPageLinks:a.default.bool,onChange:a.default.func,disabled:a.default.bool},l},t.w$=o.ITEM_TYPES},19713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>n._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:a,it:o}=e;if((0,s.alwaysValidSchema)(o,r))return;const i=t.name("valid");t.forIn("key",a,(r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},i),t.if((0,n.not)(i),(()=>{e.error(!0),o.allErrors||t.break()}))})),e.ok(i)}};t.default=a},19966:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(96540),s=r(95579),a=r(19129),o=r(5261),i=r(73135),l=r(2445);const c={copyNode:(0,l.Y)("span",{children:(0,s.t)("Copy")}),onCopyEnd:()=>{},shouldShowText:!0,wrapped:!0,tooltipText:(0,s.t)("Copy to clipboard"),hideTooltip:!1};var d={name:"8irbms",styles:"display:inline-flex;align-items:center"};class u extends n.Component{constructor(e){super(e),this.copyToClipboard=this.copyToClipboard.bind(this),this.onClick=this.onClick.bind(this)}onClick(){this.props.getText?this.props.getText((e=>{this.copyToClipboard(Promise.resolve(e))})):this.copyToClipboard(Promise.resolve(this.props.text||""))}getDecoratedCopyNode(){return(0,n.cloneElement)(this.props.copyNode,{style:{cursor:"pointer"},onClick:this.onClick})}copyToClipboard(e){(0,i.A)((()=>e)).then((()=>{this.props.addSuccessToast((0,s.t)("Copied to clipboard!"))})).catch((()=>{this.props.addDangerToast((0,s.t)("Sorry, your browser does not support copying. Use Ctrl / Cmd + C!"))})).finally((()=>{this.props.onCopyEnd&&this.props.onCopyEnd()}))}renderTooltip(e){return(0,l.Y)(l.FK,{children:this.props.hideTooltip?this.getDecoratedCopyNode():(0,l.Y)(a.m_,{id:"copy-to-clipboard-tooltip",placement:"topRight",style:{cursor:e},title:this.props.tooltipText||"",trigger:["hover"],arrow:{pointAtCenter:!0},children:this.getDecoratedCopyNode()})})}renderNotWrapped(){return this.renderTooltip("pointer")}renderLink(){return(0,l.FD)("span",{css:d,children:[this.props.shouldShowText&&this.props.text&&(0,l.Y)("span",{className:"m-r-5",children:this.props.text}),this.renderTooltip("pointer")]})}render(){const{wrapped:e}=this.props;return e?this.renderLink():this.renderNotWrapped()}}u.defaultProps=c;const h=(0,o.Ay)(u)},20494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const n=r(99029),s=r(94227),a=r(15765),o={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return i(e,"additionalItems",t);r.items=!0,(0,s.alwaysValidSchema)(r,t)||e.ok((0,a.validateArray)(e))}};function i(e,t,r=e.schema){const{gen:a,parentSchema:o,data:i,keyword:l,it:c}=e;!function(e){const{opts:n,errSchemaPath:a}=c,o=r.length,i=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(n.strictTuples&&!i){const e=`"${l}" is ${o}-tuple, but minItems or maxItems/${t} are not specified or different at path "${a}"`;(0,s.checkStrictMode)(c,e,n.strictTuples)}}(o),c.opts.unevaluated&&r.length&&!0!==c.items&&(c.items=s.mergeEvaluated.items(a,r.length,c.items));const d=a.name("valid"),u=a.const("len",n._`${i}.length`);r.forEach(((t,r)=>{(0,s.alwaysValidSchema)(c,t)||(a.if(n._`${u} > ${r}`,(()=>e.subschema({keyword:l,schemaProp:r,dataProp:r},d))),e.ok(d))}))}t.validateTuple=i,t.default=o},21988:(e,t,r)=>{var n=r(34932),s=r(96131),a=r(12027),o=r(27301),i=r(23007),l=Array.prototype.splice;e.exports=function(e,t,r,c){var d=c?a:s,u=-1,h=t.length,m=e;for(e===t&&(t=i(t)),r&&(m=n(e,o(r)));++u<h;)for(var p=0,f=t[u],g=r?r(f):f;(p=d(m,g,p,c))>-1;)m!==e&&l.call(m,p,1),l.call(e,p,1);return e}},24495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const n=r(99029),s=r(94227);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:a,schemaPath:o,errSchemaPath:i,topSchemaRef:l}){if(void 0!==t&&void 0!==a)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const a=e.schema[t];return void 0===r?{schema:a,schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}${(0,n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,s.escapeFragment)(r)}`}}if(void 0!==a){if(void 0===o||void 0===i||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:o,topSchemaRef:l,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:a,data:o,dataTypes:i,propertyName:l}){if(void 0!==o&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==r){const{errorPath:o,dataPathArr:i,opts:l}=t;d(c.let("data",n._`${t.data}${(0,n.getProperty)(r)}`,!0)),e.errorPath=n.str`${o}${(0,s.getErrorPath)(r,a,l.jsPropertySyntax)}`,e.parentDataProperty=n._`${r}`,e.dataPathArr=[...i,e.parentDataProperty]}function d(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==o&&(d(o instanceof n.Name?o:c.let("data",o,!0)),void 0!==l&&(e.propertyName=l)),i&&(e.dataTypes=i)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:a}){void 0!==n&&(e.compositeRule=n),void 0!==s&&(e.createErrors=s),void 0!==a&&(e.allErrors=a),e.jtdDiscriminator=t,e.jtdMetadata=r}},26461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const n=r(63282),s=r(99029),a=s.operators,o={formatMaximum:{okStr:"<=",ok:a.LTE,fail:a.GT},formatMinimum:{okStr:">=",ok:a.GTE,fail:a.LT},formatExclusiveMaximum:{okStr:"<",ok:a.LT,fail:a.GTE},formatExclusiveMinimum:{okStr:">",ok:a.GT,fail:a.LTE}},i={message:({keyword:e,schemaCode:t})=>s.str`should be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>s._`{comparison: ${o[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(o),type:"string",schemaType:"string",$data:!0,error:i,code(e){const{gen:t,data:r,schemaCode:a,keyword:i,it:l}=e,{opts:c,self:d}=l;if(!c.validateFormats)return;const u=new n.KeywordCxt(l,d.RULES.all.format.definition,"format");function h(e){return s._`${e}.compare(${r}, ${a}) ${o[i].fail} 0`}u.$data?function(){const r=t.scopeValue("formats",{ref:d.formats,code:c.code.formats}),n=t.const("fmt",s._`${r}[${u.schemaCode}]`);e.fail$data(s.or(s._`typeof ${n} != "object"`,s._`${n} instanceof RegExp`,s._`typeof ${n}.compare != "function"`,h(n)))}():function(){const r=u.schema,n=d.formats[r];if(!n||!0===n)return;if("object"!=typeof n||n instanceof RegExp||"function"!=typeof n.compare)throw new Error(`"${i}": format "${r}" does not define "compare" function`);const a=t.scopeValue("formats",{key:r,ref:n,code:c.code.formats?s._`${c.code.formats}${s.getProperty(r)}`:void 0});e.fail$data(h(a))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},27935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a=r(53869),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>n._`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:o,schemaCode:i,schema:l}=e;o||l&&"object"==typeof l?e.fail$data(n._`!${(0,s.useFunc)(t,a.default)}(${r}, ${i})`):e.fail(n._`${l} !== ${r}`)}};t.default=o},28274:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(67553);const s=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"].concat(["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]).map((e=>({meta:"sql",name:e,score:n.lI,value:e})))},28643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a=r(53869),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:o,schema:i,schemaCode:l,it:c}=e;if(!o&&0===i.length)throw new Error("enum must have non-empty array");const d=i.length>=c.opts.loopEnum;let u;const h=()=>null!=u?u:u=(0,s.useFunc)(t,a.default);let m;if(d||o)m=t.let("valid"),e.block$data(m,(function(){t.assign(m,!1),t.forOf("v",l,(e=>t.if(n._`${h()}(${r}, ${e})`,(()=>t.assign(m,!0).break()))))}));else{if(!Array.isArray(i))throw new Error("ajv implementation error");const e=t.const("vSchema",l);m=(0,n.or)(...i.map(((t,s)=>function(e,t){const s=i[t];return"object"==typeof s&&null!==s?n._`${h()}(${r}, ${e}[${t}])`:n._`${r} === ${s}`}(e,s))))}e.pass(m)}};t.default=o},28727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const n=r(48708),s=r(99029),a=r(64404),o={message:"boolean schema is false"};function i(e,t){const{gen:r,data:s}=e,a={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,n.reportError)(a,o,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:n}=e;!1===r?i(e,!1):"object"==typeof r&&!0===r.$async?t.return(a.default.data):(t.assign(s._`${n}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),i(e)):r.var(t,!0)}},29022:(e,t,r)=>{"use strict";var n=r(85419),s=r(96552),a=r(82986),o=Math.pow(2,31)-1;function i(e,t){var r,n=1;if(0===e)return t;if(0===t)return e;for(;e%2==0&&t%2==0;)e/=2,t/=2,n*=2;for(;e%2==0;)e/=2;for(;t;){for(;t%2==0;)t/=2;e>t&&(r=t,t=e,e=r),t-=e}return n*e}function l(e,t){var r,n=0;if(0===e)return t;if(0===t)return e;for(;!(1&e||1&t);)e>>>=1,t>>>=1,n++;for(;!(1&e);)e>>>=1;for(;t;){for(;!(1&t);)t>>>=1;e>t&&(r=t,t=e,e=r),t-=e}return e<<n}e.exports=function(){var e,t,r,c,d,u,h,m=arguments.length;for(e=new Array(m),h=0;h<m;h++)e[h]=arguments[h];if(s(e)){if(2===m)return(d=e[0])<0&&(d=-d),(u=e[1])<0&&(u=-u),d<=o&&u<=o?l(d,u):i(d,u);r=e}else{if(!n(e[0]))throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(m>1){if(r=e[0],t=e[1],!a(t))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else r=e[0]}if((c=r.length)<2)return null;if(t){for(d=new Array(c),h=0;h<c;h++)d[h]=t(r[h],h);r=d}if(m<3&&!s(r))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+r+"`.");for(h=0;h<c;h++)(d=r[h])<0&&(r[h]=-d);for(d=r[0],h=1;h<c;h++)d=(u=r[h])<=o&&d<=o?l(d,u):i(d,u);return d}},30327:(e,t)=>{"use strict";t.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},t.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},32017:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,s,a;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;0!=s--;){var o=a[s];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},33673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const n=r(99029),s=r(64404),a=r(15765),o=r(48708);function i(e){const{gen:t,data:r,it:s}=e;t.if(s.parentData,(()=>t.assign(r,n._`${s.parentData}[${s.parentDataProperty}]`)))}function l(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,n.stringify)(r)})}t.macroKeywordCode=function(e,t){const{gen:r,keyword:s,schema:a,parentSchema:o,it:i}=e,c=t.macro.call(i.self,a,o,i),d=l(r,s,c);!1!==i.opts.validateSchema&&i.self.validateSchema(c,!0);const u=r.name("valid");e.subschema({schema:c,schemaPath:n.nil,errSchemaPath:`${i.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},u),e.pass(u,(()=>e.error(!0)))},t.funcKeywordCode=function(e,t){var r;const{gen:c,keyword:d,schema:u,parentSchema:h,$data:m,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const f=!m&&t.compile?t.compile.call(p.self,u,h,p):t.validate,g=l(c,d,f),y=c.let("valid");function v(r=(t.async?n._`await `:n.nil)){const o=p.opts.passContext?s.default.this:s.default.self,i=!("compile"in t&&!m||!1===t.schema);c.assign(y,n._`${r}${(0,a.callValidateCode)(e,g,o,i)}`,t.modifying)}function b(e){var r;c.if((0,n.not)(null!==(r=t.valid)&&void 0!==r?r:y),e)}e.block$data(y,(function(){if(!1===t.errors)v(),t.modifying&&i(e),b((()=>e.error()));else{const r=t.async?function(){const e=c.let("ruleErrs",null);return c.try((()=>v(n._`await `)),(t=>c.assign(y,!1).if(n._`${t} instanceof ${p.ValidationError}`,(()=>c.assign(e,n._`${t}.errors`)),(()=>c.throw(t))))),e}():function(){const e=n._`${g}.errors`;return c.assign(e,null),v(n.nil),e}();t.modifying&&i(e),b((()=>function(e,t){const{gen:r}=e;r.if(n._`Array.isArray(${t})`,(()=>{r.assign(s.default.vErrors,n._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`).assign(s.default.errors,n._`${s.default.vErrors}.length`),(0,o.extendErrors)(e)}),(()=>e.error()))}(e,r)))}})),e.ok(null!==(r=t.valid)&&void 0!==r?r:y)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e))},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},s,a){if(Array.isArray(s.keyword)?!s.keyword.includes(a):s.keyword!==a)throw new Error("ajv implementation error");const o=s.dependencies;if(null==o?void 0:o.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${a}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[a])){const e=`keyword "${a}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}},33978:(e,t,r)=>{const n=r(88055),s=r(90370),a=r(78867),o=r(51973),i=r(35970),l=r(80795),c=r(5287),d=r(80191),u=r(2404),h=r(11331),m=r(12358),p=r(33031),f=r(63375),g=r(9063),y=r(7894),v=r(11051),b=(e,t)=>-1!==e.indexOf(t),w=e=>h(e)||!0===e||!1===e,S=e=>!1===e,C=e=>!0===e,x=(e,t,r)=>r(e),E=e=>p(f(l(e))),$=e=>void 0!==e,_=e=>f(l(e.map(D))),A=e=>e[0],k=e=>Math.max.apply(Math,e),P=e=>Math.min.apply(Math,e);function T(e){let{allOf:t=[],...r}=e;return r=h(e)?r:e,[r,...t.map(T)]}function I(e,t){return e.map((e=>e&&e[t]))}function D(e){return h(e)||Array.isArray(e)?Object.keys(e):[]}function O(e,t){if(t=t||[],!e.length)return t;const r=e.slice(0).shift(),n=e.slice(1);return t.length?O(n,i(t.map((e=>r.map((t=>[t].concat(e))))))):O(n,r.map((e=>e)))}function N(e,t){let r;try{r=e.map((function(e){return JSON.stringify(e,null,2)})).join("\n")}catch(t){r=e.join(", ")}throw new Error('Could not resolve values for path:"'+t.join(".")+'". They are probably incompatible. Values: \n'+r)}function R(e,t,r,n,a,o){if(e.length){const i=a.complexResolvers[t];if(!i||!i.resolver)throw new Error("No resolver found for "+t);const l=r.map((t=>e.reduce(((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e)),{}))),c=g(l,s),d=i.keywords.reduce(((e,t)=>({...e,[t]:(e,r=[])=>n(e,null,o.concat(t,r))})),{}),u=i.resolver(c,o.concat(t),d,a);return h(u)||N(c,o.concat(t)),u}}function M(e){return{required:e}}const F=["properties","patternProperties","definitions","dependencies"],j=["anyOf","oneOf"],L=["additionalProperties","additionalItems","contains","propertyNames","not","items"],Y={type(e){if(e.some(Array.isArray)){const t=e.map((function(e){return Array.isArray(e)?e:[e]})),r=c.apply(null,t);if(1===r.length)return r[0];if(r.length>1)return f(r)}},dependencies:(e,t,r)=>_(e).reduce((function(t,n){const a=I(e,n);let o=g(a.filter($),u);const i=o.filter(Array.isArray);if(i.length){if(i.length===o.length)t[n]=E(o);else{const e=o.filter(w),s=i.map(M);t[n]=r(e.concat(s),n)}return t}return o=g(o,s),t[n]=r(o,n),t}),{}),oneOf(e,t,r){const a=function(e,t){return e.map((function(e,r){try{return t(e,r)}catch(e){return}})).filter($)}(O(n(e)),r),o=g(a,s);if(o.length)return o},not:e=>({anyOf:e}),pattern:e=>e.map((e=>"(?="+e+")")).join(""),multipleOf(e){let t=e.slice(0),r=1;for(;t.some((e=>!Number.isInteger(e)));)t=t.map((e=>10*e)),r*=10;return a(t)/r},enum(e){const t=d.apply(null,e.concat(u));if(t.length)return p(t)}};Y.$id=A,Y.$ref=A,Y.$schema=A,Y.additionalItems=x,Y.additionalProperties=x,Y.anyOf=Y.oneOf,Y.contains=x,Y.default=A,Y.definitions=Y.dependencies,Y.description=A,Y.examples=e=>g(i(e),u),Y.exclusiveMaximum=P,Y.exclusiveMinimum=k,Y.items=v,Y.maximum=P,Y.maxItems=P,Y.maxLength=P,Y.maxProperties=P,Y.minimum=k,Y.minItems=k,Y.minLength=k,Y.minProperties=k,Y.properties=y,Y.propertyNames=x,Y.required=e=>E(e),Y.title=A,Y.uniqueItems=e=>e.some(C);const q={properties:y,items:v};function U(e,t,r){r=r||[],t=o(t,{ignoreAdditionalProperties:!1,resolvers:Y,complexResolvers:q,deep:!0});const a=Object.entries(t.complexResolvers),i=function e(o,i,l){o=n(o.filter($)),l=l||[];const c=h(i)?i:{};if(!o.length)return;if(o.some(S))return!1;if(o.every(C))return!0;o=o.filter(h);const d=_(o);if(t.deep&&b(d,"allOf"))return U({allOf:o},t,r);const u=a.map((([e,t])=>d.filter((e=>t.keywords.includes(e)))));return u.forEach((e=>m(d,e))),d.forEach((function(r){const n=I(o,r),a=g(n.filter($),function(e){return function(t,r){return s({[e]:t},{[e]:r})}}(r));if(1===a.length&&b(j,r))c[r]=a[0].map((t=>e([t],t)));else if(1!==a.length||b(F,r)||b(L,r)){const n=t.resolvers[r]||t.resolvers.defaultResolver;if(!n)throw new Error("No resolver found for key "+r+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const s=(t,n=[])=>e(t,null,l.concat(r,n));c[r]=n(a,l.concat(r),s,t),void 0===c[r]?N(a,l.concat(r)):void 0===c[r]&&delete c[r]}else c[r]=a[0]})),a.reduce(((r,[n,s],a)=>({...r,...R(u[a],n,o,e,t,l)})),c)}(l(T(e)));return i}U.options={resolvers:Y},e.exports=U},34486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,a="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`Object.keys(${r}).length ${a} ${s}`)}};t.default=s},34551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(66939);class s extends Error{constructor(e,t,r,s){super(s||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,n.resolveUrl)(e,t,r),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(e,this.missingRef))}}t.default=s},34834:(e,t,r)=>{"use strict";const{HEX:n}=r(64914),s=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function a(e){if(c(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(s)||[],[r]=t;return r?{host:l(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function o(e,t=!1){let r="",s=!0;for(const t of e){if(void 0===n[t])return;"0"!==t&&!0===s&&(s=!1),s||(r+=t)}return t&&0===r.length&&(r="0"),r}function i(e){if(c(e,":")<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let a=!1,i=!1,l=!1;function c(){if(s.length){if(!1===a){const e=o(s);if(void 0===e)return r.error=!0,!1;n.push(e)}s.length=0}return!0}for(let o=0;o<e.length;o++){const d=e[o];if("["!==d&&"]"!==d)if(":"!==d)if("%"===d){if(!c())break;a=!0}else s.push(d);else{if(!0===i&&(l=!0),!c())break;if(t++,n.push(":"),t>7){r.error=!0;break}o-1>=0&&":"===e[o-1]&&(i=!0)}}return s.length&&(a?r.zone=s.join(""):l?n.push(s.join("")):n.push(o(s))),r.address=n.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,escapedHost:r,isIPV6:!0}}}function l(e,t){let r="",n=!0;const s=e.length;for(let a=0;a<s;a++){const o=e[a];"0"===o&&n?(a+1<=s&&e[a+1]===t||a+1===s)&&(r+=o,n=!1):(n=o===t,r+=o)}return r}function c(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const d=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,h=/^\/\.\.(?:\/|$)/u,m=/^\/?(?:.|\n)*?(?=\/|$)/u;e.exports={recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let r=unescape(e.host);const n=a(r);if(n.isIPV4)r=n.host;else{const t=i(n.host);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(r)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){const t=[];for(;e.length;)if(e.match(d))e=e.replace(d,"");else if(e.match(u))e=e.replace(u,"/");else if(e.match(h))e=e.replace(h,"/"),t.pop();else if("."===e||".."===e)e="";else{const r=e.match(m);if(!r)throw new Error("Unexpected dot segment condition");{const n=r[0];e=e.slice(n.length),t.push(n)}}return t.join("")},normalizeIPv4:a,normalizeIPv6:i,stringArrayToHexStripped:o}},36653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(97652),a=r(73835),o=r(34551),i=r(94227),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>n._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:l,parentSchema:c,it:d}=e,{oneOf:u}=c;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=l.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const m=t.let("valid",!1),p=t.const("tag",n._`${r}${(0,n.getProperty)(h)}`);function f(r){const s=t.name("valid"),a=e.subschema({keyword:"oneOf",schemaProp:r},s);return e.mergeEvaluated(a,n.Name),s}t.if(n._`typeof ${p} == "string"`,(()=>function(){const r=function(){var e;const t={},r=s(c);let n=!0;for(let t=0;t<u.length;t++){let c=u[t];if((null==c?void 0:c.$ref)&&!(0,i.schemaHasRulesButRef)(c,d.self.RULES)){const e=c.$ref;if(c=a.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,e),c instanceof a.SchemaEnv&&(c=c.schema),void 0===c)throw new o.default(d.opts.uriResolver,d.baseId,e)}const m=null===(e=null==c?void 0:c.properties)||void 0===e?void 0:e[h];if("object"!=typeof m)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);n=n&&(r||s(c)),l(m,t)}if(!n)throw new Error(`discriminator: "${h}" must be required`);return t;function s({required:e}){return Array.isArray(e)&&e.includes(h)}function l(e,t){if(e.const)m(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const r of e.enum)m(r,t)}}function m(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(n._`${p} === ${e}`),t.assign(m,f(r[e]));t.else(),e.error(!1,{discrError:s.DiscrError.Mapping,tag:p,tagName:h}),t.endIf()}()),(()=>e.error(!1,{discrError:s.DiscrError.Tag,tag:p,tagName:h}))),e.ok(m)}};t.default=l},38660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),a=r(64404),o=r(94227),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>s._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:i,data:l,errsCount:c,it:d}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=d;if(d.props=!0,"all"!==h.removeAdditional&&(0,o.alwaysValidSchema)(d,r))return;const m=(0,n.allSchemaProperties)(i.properties),p=(0,n.allSchemaProperties)(i.patternProperties);function f(e){t.code(s._`delete ${l}[${e}]`)}function g(n){if("all"===h.removeAdditional||h.removeAdditional&&!1===r)f(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(u||t.break());if("object"==typeof r&&!(0,o.alwaysValidSchema)(d,r)){const r=t.name("valid");"failing"===h.removeAdditional?(y(n,r,!1),t.if((0,s.not)(r),(()=>{e.reset(),f(n)}))):(y(n,r),u||t.if((0,s.not)(r),(()=>t.break())))}}}function y(t,r,n){const s={keyword:"additionalProperties",dataProp:t,dataPropType:o.Type.Str};!1===n&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,r)}t.forIn("key",l,(r=>{m.length||p.length?t.if(function(r){let a;if(m.length>8){const e=(0,o.schemaRefOrVal)(d,i.properties,"properties");a=(0,n.isOwnProperty)(t,e,r)}else a=m.length?(0,s.or)(...m.map((e=>s._`${r} === ${e}`))):s.nil;return p.length&&(a=(0,s.or)(a,...p.map((t=>s._`${(0,n.usePattern)(e,t)}.test(${r})`)))),(0,s.not)(a)}(r),(()=>g(r))):g(r)})),e.ok(s._`${c} === ${a.default.errors}`)}};t.default=i},39754:(e,t,r)=>{var n=r(83729),s=r(80909),a=r(24066),o=r(56449);e.exports=function(e,t){return(o(e)?n:s)(e,a(t))}},40117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(62586),s=r(15765),a=r(94227),o=r(38660),i={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:i,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===i.additionalProperties&&o.default.code(new n.KeywordCxt(c,o.default,"additionalProperties"));const d=(0,s.allSchemaProperties)(r);for(const e of d)c.definedProperties.add(e);c.opts.unevaluated&&d.length&&!0!==c.props&&(c.props=a.mergeEvaluated.props(t,(0,a.toHash)(d),c.props));const u=d.filter((e=>!(0,a.alwaysValidSchema)(c,r[e])));if(0===u.length)return;const h=t.name("valid");for(const r of u)m(r)?p(r):(t.if((0,s.propertyInData)(t,l,r,c.opts.ownProperties)),p(r),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(h);function m(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==r[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=i},40860:(e,t,r)=>{var n=r(40882),s=r(80909),a=r(15389),o=r(85558),i=r(56449);e.exports=function(e,t,r){var l=i(e)?n:o,c=arguments.length<3;return l(e,a(t,4),r,c,s)}},41520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class s extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function a(e,...t){const r=[e[0]];let n=0;for(;n<t.length;)l(r,t[n]),r.push(e[++n]);return new s(r)}t._Code=s,t.nil=new s(""),t._=a;const o=new s("+");function i(e,...t){const r=[d(e[0])];let n=0;for(;n<t.length;)r.push(o),l(r,t[n]),r.push(o,d(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const r=c(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new s(r)}function l(e,t){var r;t instanceof s?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:d(Array.isArray(r)?r.join(","):r))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=i,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:i`${e}${t}`},t.stringify=function(e){return new s(d(e))},t.safeStringify=d,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new s(`.${e}`):a`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new s(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new s(e.toString())}},41621:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(33149),s=r(96453),a=r(96540),o=r(62221),i=r(2445);const l=s.I4.div`
  position: absolute;
  height: 100%;

  :hover .sidebar-resizer::after {
    background-color: ${({theme:e})=>e.colors.primary.base};
  }

  .sidebar-resizer {
    // @z-index-above-sticky-header (100) + 1 = 101
    z-index: 101;
  }

  .sidebar-resizer::after {
    display: block;
    content: '';
    width: 1px;
    height: 100%;
    margin: 0 auto;
  }
`,c=({id:e,initialWidth:t,minWidth:r,maxWidth:s,enable:c,children:d})=>{const[u,h]=function(e,t){const r=(0,a.useRef)(),[n,s]=(0,a.useState)(t);return(0,a.useEffect)((()=>{var t;r.current=null!=(t=r.current)?t:(0,o.Gq)(o.Hh.CommonResizableSidebarWidths,{}),r.current[e]&&s(r.current[e])}),[e]),[n,function(t){s(t),(0,o.SO)(o.Hh.CommonResizableSidebarWidths,{...r.current,[e]:t})}]}(e,t);return(0,i.FD)(i.FK,{children:[(0,i.Y)(l,{children:(0,i.Y)(n.c,{enable:{right:c},handleClasses:{right:"sidebar-resizer",bottom:"hidden",bottomRight:"hidden",bottomLeft:"hidden"},size:{width:u,height:"100%"},minWidth:r,maxWidth:s,onResizeStop:(e,t,r,n)=>h(u+n.width)})}),d(u)]})}},41816:function(e){e.exports=function(){"use strict";var e="month",t="quarter";return function(r,n){var s=n.prototype;s.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=s.add;s.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):a.bind(this)(r,n)};var o=s.startOf;s.startOf=function(r,n){var s=this.$utils(),a=!!s.u(n)||n;if(s.p(r)===t){var i=this.quarter()-1;return a?this.month(3*i).startOf(e).startOf("day"):this.month(3*i+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}}()},48343:(e,t,r)=>{"use strict";const{normalizeIPv6:n,normalizeIPv4:s,removeDotSegments:a,recomposeAuthority:o,normalizeComponentEncoding:i}=r(34834),l=r(343);function c(e,t,r,n){const s={};return n||(e=m(d(e,r),r),t=m(d(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=a(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=a(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=a(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=a(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function d(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=l[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),void 0!==r.path&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==n.reference&&r.scheme&&s.push(r.scheme,":");const c=o(r);if(void 0!==c&&("suffix"!==n.reference&&s.push("//"),s.push(c),r.path&&"/"!==r.path.charAt(0)&&s.push("/")),void 0!==r.path){let e=r.path;n.absolutePath||i&&i.absolutePath||(e=a(e)),void 0===c&&(e=e.replace(/^\/\//u,"/%2F")),s.push(e)}return void 0!==r.query&&s.push("?",r.query),void 0!==r.fragment&&s.push("#",r.fragment),s.join("")}const u=Array.from({length:127},((e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)))),h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function m(e,t){const r=Object.assign({},t),a={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},o=-1!==e.indexOf("%");let i=!1;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const c=e.match(h);if(c){if(a.scheme=c[1],a.userinfo=c[3],a.host=c[4],a.port=parseInt(c[5],10),a.path=c[6]||"",a.query=c[7],a.fragment=c[8],isNaN(a.port)&&(a.port=c[5]),a.host){const e=s(a.host);if(!1===e.isIPV4){const t=n(e.host);a.host=t.host.toLowerCase(),i=t.isIPV6}else a.host=e.host,i=!0}void 0!==a.scheme||void 0!==a.userinfo||void 0!==a.host||void 0!==a.port||void 0!==a.query||a.path?void 0===a.scheme?a.reference="relative":void 0===a.fragment?a.reference="absolute":a.reference="uri":a.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==a.reference&&(a.error=a.error||"URI is not a "+r.reference+" reference.");const e=l[(r.scheme||a.scheme||"").toLowerCase()];if(!(r.unicodeSupport||e&&e.unicodeSupport)&&a.host&&(r.domainHost||e&&e.domainHost)&&!1===i&&function(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||u[t])return!0;return!1}(a.host))try{a.host=URL.domainToASCII(a.host.toLowerCase())}catch(e){a.error=a.error||"Host's domain name can not be converted to ASCII: "+e}(!e||e&&!e.skipNormalize)&&(o&&void 0!==a.scheme&&(a.scheme=unescape(a.scheme)),o&&void 0!==a.host&&(a.host=unescape(a.host)),a.path&&(a.path=escape(unescape(a.path))),a.fragment&&(a.fragment=encodeURI(decodeURIComponent(a.fragment)))),e&&e.parse&&e.parse(a,r)}else a.error=a.error||"URI can not be parsed.";return a}const p={SCHEMES:l,normalize:function(e,t){return"string"==typeof e?e=d(m(e,t),t):"object"==typeof e&&(e=m(d(e,t),t)),e},resolve:function(e,t,r){const n=Object.assign({scheme:"null"},r);return d(c(m(e,n),m(t,n),n,!0),{...n,skipEscape:!0})},resolveComponents:c,equal:function(e,t,r){return"string"==typeof e?(e=unescape(e),e=d(i(m(e,r),!0),{...r,skipEscape:!0})):"object"==typeof e&&(e=d(i(e,!0),{...r,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=d(i(m(t,r),!0),{...r,skipEscape:!0})):"object"==typeof t&&(t=d(i(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:d,parse:m};e.exports=p,e.exports.default=p,e.exports.fastUri=p},48708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const n=r(99029),s=r(94227),a=r(64404);function o(e,t){const r=e.const("err",t);e.if(n._`${a.default.vErrors} === null`,(()=>e.assign(a.default.vErrors,n._`[${r}]`)),n._`${a.default.vErrors}.push(${r})`),e.code(n._`${a.default.errors}++`)}function i(e,t){const{gen:r,validateName:s,schemaEnv:a}=e;a.$async?r.throw(n._`new ${e.ValidationError}(${t})`):(r.assign(n._`${s}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>n.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?n.str`"${e}" keyword must be ${t} ($data)`:n.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,s,a){const{it:l}=e,{gen:d,compositeRule:u,allErrors:h}=l,m=c(e,r,s);(null!=a?a:u||h)?o(d,m):i(l,n._`[${m}]`)},t.reportExtraError=function(e,r=t.keywordError,n){const{it:s}=e,{gen:l,compositeRule:d,allErrors:u}=s;o(l,c(e,r,n)),d||u||i(s,a.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(a.default.errors,t),e.if(n._`${a.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(n._`${a.default.vErrors}.length`,t)),(()=>e.assign(a.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:s,errsCount:o,it:i}){if(void 0===o)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",o,a.default.errors,(o=>{e.const(l,n._`${a.default.vErrors}[${o}]`),e.if(n._`${l}.instancePath === undefined`,(()=>e.assign(n._`${l}.instancePath`,(0,n.strConcat)(a.default.instancePath,i.errorPath)))),e.assign(n._`${l}.schemaPath`,n.str`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign(n._`${l}.schema`,r),e.assign(n._`${l}.data`,s))}))};const l={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function c(e,t,r){const{createErrors:s}=e.it;return!1===s?n._`{}`:function(e,t,r={}){const{gen:s,it:o}=e,i=[d(o,r),u(e,r)];return function(e,{params:t,message:r},s){const{keyword:o,data:i,schemaValue:c,it:d}=e,{opts:u,propertyName:h,topSchemaRef:m,schemaPath:p}=d;s.push([l.keyword,o],[l.params,"function"==typeof t?t(e):t||n._`{}`]),u.messages&&s.push([l.message,"function"==typeof r?r(e):r]),u.verbose&&s.push([l.schema,c],[l.parentSchema,n._`${m}${p}`],[a.default.data,i]),h&&s.push([l.propertyName,h])}(e,t,i),s.object(...i)}(e,t,r)}function d({errorPath:e},{instancePath:t}){const r=t?n.str`${e}${(0,s.getErrorPath)(t,s.Type.Str)}`:e;return[a.default.instancePath,(0,n.strConcat)(a.default.instancePath,r)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:a}){let o=a?t:n.str`${t}/${e}`;return r&&(o=n.str`${o}${(0,s.getErrorPath)(r,s.Type.Str)}`),[l.schemaPath,o]}},51973:(e,t,r)=>{var n=r(91033),s=r(69302),a=r(52606),o=r(6924),i=s((function(e){return e.push(void 0,a),n(o,void 0,e)}));e.exports=i},52606:(e,t,r)=>{var n=r(85250),s=r(23805);e.exports=function e(t,r,a,o,i,l){return s(t)&&s(r)&&(l.set(r,t),n(t,r,void 0,e,l),l.delete(r)),t}},53853:(e,t)=>{"use strict";function r(e){const t=e.length;let r,n=0,s=0;for(;s<t;)n++,r=e.charCodeAt(s++),r>=55296&&r<=56319&&s<t&&(r=e.charCodeAt(s),56320==(64512&r)&&s++);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},53869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(32017);n.code='require("ajv/dist/runtime/equal").default',t.default=n},55944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(48343);n.code='require("ajv/dist/runtime/uri").default',t.default=n},56239:(e,t)=>{var r=/~/,n=/~[01]/g;function s(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function a(e){return r.test(e)?e.replace(n,s):e}function o(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e;throw new Error("Invalid JSON pointer.")}if(Array.isArray(e)){for(const t of e)if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function i(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var r=(t=o(t)).length;if(1===r)return e;for(var n=1;n<r;){if(e=e[a(t[n++])],r===n)return e;if("object"!=typeof e||null===e)return}}function l(e,t,r){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=o(t)).length)throw new Error("Invalid JSON pointer for set.");return function(e,t,r){for(var n,s,o=1,i=t.length;o<i;){if("constructor"===t[o]||"prototype"===t[o]||"__proto__"===t[o])return e;if(n=a(t[o++]),s=i>o,void 0===e[n]&&(Array.isArray(e)&&"-"===n&&(n=e.length),s&&(""!==t[o]&&t[o]<1/0||"-"===t[o]?e[n]=[]:e[n]={})),!s)break;e=e[n]}var l=e[n];return void 0===r?delete e[n]:e[n]=r,l}(e,t,r)}t.get=i,t.set=l,t.compile=function(e){var t=o(e);return{get:function(e){return i(e,t)},set:function(e,r){return l(e,t,r)}}}},56378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15457),s=r(65354),a=r(20494),o=r(93966),i=r(12661),l=r(83025),c=r(19713),d=r(38660),u=r(40117),h=r(67714),m=r(57923),p=r(16505),f=r(96163),g=r(15844),y=r(1239),v=r(92045);t.default=function(e=!1){const t=[m.default,p.default,f.default,g.default,y.default,v.default,c.default,d.default,l.default,u.default,h.default];return e?t.push(s.default,o.default):t.push(n.default,a.default),t.push(i.default),t}},56384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),a=r(94227),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>s.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>s._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:o,data:i,$data:l,it:c}=e,{opts:d}=c;if(!l&&0===r.length)return;const u=r.length>=d.loopRequired;if(c.allErrors?function(){if(u||l)e.block$data(s.nil,h);else for(const t of r)(0,n.checkReportMissingProp)(e,t)}():function(){const a=t.let("missing");if(u||l){const r=t.let("valid",!0);e.block$data(r,(()=>function(r,a){e.setParams({missingProperty:r}),t.forOf(r,o,(()=>{t.assign(a,(0,n.propertyInData)(t,i,r,d.ownProperties)),t.if((0,s.not)(a),(()=>{e.error(),t.break()}))}),s.nil)}(a,r))),e.ok(r)}else t.if((0,n.checkMissingProp)(e,r,a)),(0,n.reportMissingProp)(e,a),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:n}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!n.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,a.checkStrictMode)(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",o,(r=>{e.setParams({missingProperty:r}),t.if((0,n.noPropertyInData)(t,i,r,d.ownProperties),(()=>e.error()))}))}}};t.default=o},57923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:s}=e;if((0,n.alwaysValidSchema)(s,r))return void e.fail();const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};t.default=s},60237:(e,t,r)=>{"use strict";r.d(t,{T3:()=>d,cL:()=>u,kV:()=>i});var n=r(90179),s=r.n(n),a=r(35742);const o=["url_params"],i=e=>s()(e,o),l=(e,t)=>{let r="api/v1/explore/form_data";return e&&(r=r.concat(`/${e}`)),t&&(r=r.concat(`?tab_id=${t}`)),r},c=(e,t,r,n)=>{const s={datasource_id:e,datasource_type:t,form_data:JSON.stringify(i(r))};return n&&(s.chart_id=n),s},d=(e,t,r,n,s)=>a.A.post({endpoint:l(void 0,s),jsonPayload:c(e,t,r,n)}).then((e=>e.json.key)),u=(e,t,r,n,s,o)=>a.A.put({endpoint:l(r,o),jsonPayload:c(e,t,n,s)}).then((e=>e.json.message))},60617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10208),s=r(99029),a=r(94227),o=r(53869),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>s.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>s._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:i,schema:l,parentSchema:c,schemaCode:d,it:u}=e;if(!i&&!l)return;const h=t.let("valid"),m=c.items?(0,n.getSchemaTypes)(c.items):[];function p(a,o){const i=t.name("item"),l=(0,n.checkDataTypes)(m,i,u.opts.strictNumbers,n.DataType.Wrong),c=t.const("indices",s._`{}`);t.for(s._`;${a}--;`,(()=>{t.let(i,s._`${r}[${a}]`),t.if(l,s._`continue`),m.length>1&&t.if(s._`typeof ${i} == "string"`,s._`${i} += "_"`),t.if(s._`typeof ${c}[${i}] == "number"`,(()=>{t.assign(o,s._`${c}[${i}]`),e.error(),t.assign(h,!1).break()})).code(s._`${c}[${i}] = ${a}`)}))}function f(n,i){const l=(0,a.useFunc)(t,o.default),c=t.name("outer");t.label(c).for(s._`;${n}--;`,(()=>t.for(s._`${i} = ${n}; ${i}--;`,(()=>t.if(s._`${l}(${r}[${n}], ${r}[${i}])`,(()=>{e.error(),t.assign(h,!1).break(c)}))))))}e.block$data(h,(function(){const n=t.let("i",s._`${r}.length`),a=t.let("j");e.setParams({i:n,j:a}),t.assign(h,!0),t.if(s._`${n} > 1`,(()=>(m.length>0&&!m.some((e=>"object"===e||"array"===e))?p:f)(n,a)))}),s._`${d} === false`),e.ok(h)}};t.default=i},61163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,a="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`${r}.length ${a} ${s}`)}};t.default=s},61448:(e,t,r)=>{var n=r(98045),s=r(49326);e.exports=function(e,t){return null!=e&&s(e,t,n)}},62586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const n=r(28727),s=r(10208),a=r(7887),o=r(10208),i=r(7870),l=r(33673),c=r(24495),d=r(99029),u=r(64404),h=r(66939),m=r(94227),p=r(48708);function f({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},a){s.code.es5?e.func(t,d._`${u.default.data}, ${u.default.valCxt}`,n.$async,(()=>{e.code(d._`"use strict"; ${g(r,s)}`),function(e,t){e.if(u.default.valCxt,(()=>{e.var(u.default.instancePath,d._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,d._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,d._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,d._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`${u.default.valCxt}.${u.default.dynamicAnchors}`)}),(()=>{e.var(u.default.instancePath,d._`""`),e.var(u.default.parentData,d._`undefined`),e.var(u.default.parentDataProperty,d._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`{}`)}))}(e,s),e.code(a)})):e.func(t,d._`${u.default.data}, ${function(e){return d._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?d._`, ${u.default.dynamicAnchors}={}`:d.nil}}={}`}(s)}`,n.$async,(()=>e.code(g(r,s)).code(a)))}function g(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?d._`/*# sourceURL=${r} */`:d.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function b(e){(0,m.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function w(e,t){if(e.opts.jtd)return C(e,[],!1,t);const r=(0,s.getSchemaTypes)(e.schema);C(e,r,!(0,s.coerceAndCheckDataType)(e,r),t)}function S({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const a=r.$comment;if(!0===s.$comment)e.code(d._`${u.default.self}.logger.log(${a})`);else if("function"==typeof s.$comment){const r=d.str`${n}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(d._`${u.default.self}.opts.$comment(${a}, ${r}, ${s}.schema)`)}}function C(e,t,r,n){const{gen:s,schema:i,data:l,allErrors:c,opts:h,self:p}=e,{RULES:f}=p;function g(m){(0,a.shouldUseGroup)(i,m)&&(m.type?(s.if((0,o.checkDataType)(m.type,l,h.strictNumbers)),x(e,m),1===t.length&&t[0]===m.type&&r&&(s.else(),(0,o.reportTypeError)(e)),s.endIf()):x(e,m),c||s.if(d._`${u.default.errors} === ${n||0}`))}!i.$ref||!h.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(i,f)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{E(e.dataTypes,t)||$(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),function(e,t){const r=[];for(const n of e.dataTypes)E(t,n)?r.push(n):t.includes("integer")&&"number"===n&&r.push("integer");e.dataTypes=r}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&$(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if("object"==typeof s&&(0,a.shouldUseRule)(e.schema,s)){const{type:r}=s.definition;r.length&&!r.some((e=>{return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n}))&&$(e,`missing type "${r.join(",")}" for keyword "${n}"`)}}}(e,e.dataTypes))}(e,t),s.block((()=>{for(const e of f.rules)g(e);g(f.post)}))):s.block((()=>A(e,"$ref",f.all.$ref.definition)))}function x(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,i.assignDefaults)(e,t.type),r.block((()=>{for(const r of t.rules)(0,a.shouldUseRule)(n,r)&&A(e,r.keyword,r.definition,t.type)}))}function E(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function $(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,m.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){v(e)&&(b(e),y(e))?function(e){const{schema:t,opts:r,gen:n}=e;f(e,(()=>{r.$comment&&t.$comment&&S(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,m.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(u.default.vErrors,null),n.let(u.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",d._`${r}.evaluated`),t.if(d._`${e.evaluated}.dynamicProps`,(()=>t.assign(d._`${e.evaluated}.props`,d._`undefined`))),t.if(d._`${e.evaluated}.dynamicItems`,(()=>t.assign(d._`${e.evaluated}.items`,d._`undefined`)))}(e),w(e),function(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:a}=e;r.$async?t.if(d._`${u.default.errors} === 0`,(()=>t.return(u.default.data)),(()=>t.throw(d._`new ${s}(${u.default.vErrors})`))):(t.assign(d._`${n}.errors`,u.default.vErrors),a.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof d.Name&&e.assign(d._`${t}.props`,r),n instanceof d.Name&&e.assign(d._`${t}.items`,n)}(e),t.return(d._`${u.default.errors} === 0`))}(e)}))}(e):f(e,(()=>(0,n.topBoolOrEmptySchema)(e)))};class _{constructor(e,t,r){if((0,l.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",T(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,r){this.failResult((0,d.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,d.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(d._`${t} !== undefined && (${(0,d.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=d.nil){this.gen.block((()=>{this.check$data(e,r),t()}))}check$data(e=d.nil,t=d.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:s,def:a}=this;r.if((0,d.or)(d._`${n} === undefined`,t)),e!==d.nil&&r.assign(e,!0),(s.length||a.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==d.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:n,it:s}=this;return(0,d.or)(function(){if(r.length){if(!(t instanceof d.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return d._`${(0,o.checkDataTypes)(e,t,s.opts.strictNumbers,o.DataType.Wrong)}`}return d.nil}(),function(){if(n.validateSchema){const r=e.scopeValue("validate$data",{ref:n.validateSchema});return d._`!${r}(${t})`}return d.nil}())}subschema(e,t){const r=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(r,this.it,e),(0,c.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return function(e,t){v(e)&&(b(e),y(e))?function(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&S(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const a=n.const("_errs",u.default.errors);w(e,a),n.var(t,d._`${a} === ${u.default.errors}`)}(e,t):(0,n.boolOrEmptySchema)(e,t)}(s,t),s}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=m.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=m.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,(()=>this.mergeEvaluated(e,d.Name))),!0}}function A(e,t,r,n){const s=new _(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,l.funcKeywordCode)(s,r):"macro"in r?(0,l.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,l.funcKeywordCode)(s,r)}t.KeywordCxt=_;const k=/^\/(?:[^~]|~0|~1)*$/,P=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function T(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,a;if(""===e)return u.default.rootData;if("/"===e[0]){if(!k.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,a=u.default.rootData}else{const o=P.exec(e);if(!o)throw new Error(`Invalid JSON-pointer: ${e}`);const i=+o[1];if(s=o[2],"#"===s){if(i>=t)throw new Error(l("property/index",i));return n[t-i]}if(i>t)throw new Error(l("data",i));if(a=r[t-i],!s)return a}let o=a;const i=s.split("/");for(const e of i)e&&(a=d._`${a}${(0,d.getProperty)((0,m.unescapeJsonPointer)(e))}`,o=d._`${o} && ${a}`);return o;function l(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=T},63282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=r(4042),s=r(86144),a=r(36653),o=r(72079),i=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),s.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(o,i):o;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=r(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=r(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=r(13558);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var m=r(34551);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return m.default}})},63439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>n.str`must be multiple of ${e}`,params:({schemaCode:e})=>n._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:s,it:a}=e,o=a.opts.multipleOfPrecision,i=t.let("res"),l=o?n._`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:n._`${i} !== parseInt(${i})`;e.fail$data(n._`(${s} === 0 || (${i} = ${r}/${s}, ${l}))`)}};t.default=s},63837:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},64404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};t.default=s},64527:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(96540),s=r(96453),a=r(35768),o=r(16294),i=r(7089),l=r(2445);const c=(0,s.I4)(a.Ay)`
  text-align: left;
  font-family: ${({theme:e})=>e.typography.families.monospace};
`;function d({endTime:e,isRunning:t,startTime:r,status:a="success"}){const d=(0,s.DP)(),[u,h]=(0,n.useState)("00:00:00.00"),m=(0,n.useRef)();return(0,n.useEffect)((()=>{const n=()=>{m.current&&(clearInterval(m.current),m.current=void 0)};return t&&(m.current=setInterval((()=>{if(r){const s=e||(0,i.tB)();r<s&&h((0,i.RW)(r,s)),t||n()}}),30)),n}),[e,t,r]),(0,l.Y)(c,{icon:(0,l.Y)(o.A.ClockCircleOutlined,{iconColor:(e=>{const{colors:t}=d;return{success:t.success.dark2,warning:t.warning.dark2,danger:t.error.dark2,info:t.info.dark2,default:t.grayscale.dark1,primary:t.primary.dark2,secondary:t.secondary.dark2}[e]||t.grayscale.dark1})(a),iconSize:"m"}),type:a,role:"timer",children:u})}},64914:e=>{"use strict";e.exports={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}},65354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(20494),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")};t.default=s},66245:(e,t,r)=>{var n=r(83915),s=r(83120),a=r(69302),o=r(83693),i=a((function(e,t){return o(e)?n(e,s(t,1,o,!0)):[]}));e.exports=i},66415:e=>{"use strict";e.exports=function(e){return("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))&&e.valueOf()==e.valueOf()}},66939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const n=r(94227),s=r(32017),a=r(7106),o=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&c(e)<=t)};const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(i.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(l))return!0;if("object"==typeof r&&l(r))return!0}return!1}function c(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!o.has(r)&&("object"==typeof e[r]&&(0,n.eachItem)(e[r],(e=>t+=c(e))),t===1/0))return 1/0}return t}function d(e,t="",r){!1!==r&&(t=m(t));const n=e.parse(t);return u(e,n)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=u;const h=/#\/?$/;function m(e){return e?e.replace(h,""):""}t.normalizeId=m,t.resolveUrl=function(e,t,r){return r=m(r),e.resolve(t,r)};const p=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:n}=this.opts,o=m(e[r]||t),i={"":o},l=d(n,o,!1),c={},u=new Set;return a(e,{allKeys:!0},((e,t,n,s)=>{if(void 0===s)return;const a=l+t;let o=i[s];function d(t){const r=this.opts.uriResolver.resolve;if(t=m(o?r(o,t):t),u.has(t))throw f(t);u.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?h(e,n.schema,t):t!==m(a)&&("#"===t[0]?(h(e,c[t],t),c[t]=e):this.refs[t]=a),t}function g(e){if("string"==typeof e){if(!p.test(e))throw new Error(`invalid anchor "${e}"`);d.call(this,`#${e}`)}}"string"==typeof e[r]&&(o=d.call(this,e[r])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),i[t]=o})),c;function h(e,t,r){if(void 0!==t&&!s(e,t))throw f(r)}function f(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},67060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(75882),s=r(63439),a=r(77307),o=r(68041),i=r(34486),l=r(56384),c=r(61163),d=r(60617),u=r(27935),h=r(28643),m=[n.default,s.default,a.default,o.default,i.default,l.default,c.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=m},67714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),a=r(94227),o=r(94227),i={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:i,parentSchema:l,it:c}=e,{opts:d}=c,u=(0,n.allSchemaProperties)(r),h=u.filter((e=>(0,a.alwaysValidSchema)(c,r[e])));if(0===u.length||h.length===u.length&&(!c.opts.unevaluated||!0===c.props))return;const m=d.strictSchema&&!d.allowMatchingProperties&&l.properties,p=t.name("valid");!0===c.props||c.props instanceof s.Name||(c.props=(0,o.evaluatedPropsToName)(t,c.props));const{props:f}=c;function g(e){for(const t in m)new RegExp(e).test(t)&&(0,a.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function y(r){t.forIn("key",i,(a=>{t.if(s._`${(0,n.usePattern)(e,r)}.test(${a})`,(()=>{const n=h.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:a,dataPropType:o.Type.Str},p),c.opts.unevaluated&&!0!==f?t.assign(s._`${f}[${a}]`,!0):n||c.allErrors||t.if((0,s.not)(p),(()=>t.break()))}))}))}!function(){for(const e of u)m&&g(e),c.allErrors?y(e):(t.var(p,!0),y(e),t.if(p))}()}};t.default=i},68041:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),a={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match pattern "${e}"`,params:({schemaCode:e})=>s._`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:a,schemaCode:o,it:i}=e,l=i.opts.unicodeRegExp?"u":"",c=r?s._`(new RegExp(${o}, ${l}))`:(0,n.usePattern)(e,a);e.fail$data(s._`!${c}.test(${t})`)}};t.default=a},68182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(14018),s=r(26461),a=r(99029),o=new a.Name("fullFormats"),i=new a.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,n.fullFormats,o),e;const[r,a]="fast"===t.mode?[n.fastFormats,i]:[n.fullFormats,o];return c(e,t.formats||n.formatNames,r,a),t.keywords&&s.default(e),e};function c(e,t,r,n){var s,o;null!==(s=(o=e.opts.code).formats)&&void 0!==s||(o.formats=a._`require("ajv-formats/dist/formats").${n}`);for(const n of t)e.addFormat(n,r[n])}l.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},69857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},70713:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u});var n=r(96540);let s;s="undefined"!=typeof window?window:"undefined"!=typeof self?self:r.g;let a=null,o=null;const i=s.clearTimeout,l=s.setTimeout,c=s.cancelAnimationFrame||s.mozCancelAnimationFrame||s.webkitCancelAnimationFrame,d=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame;null==c||null==d?(a=i,o=function(e){return l(e,20)}):(a=function([e,t]){c(e),i(t)},o=function(e){const t=d((function(){i(r),e()})),r=l((function(){c(t),e()}),20);return[t,r]});class u extends n.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:r}=this.props;if(this._parentNode){const n=window.getComputedStyle(this._parentNode)||{},s=parseFloat(n.paddingLeft||"0"),a=parseFloat(n.paddingRight||"0"),o=parseFloat(n.paddingTop||"0"),i=parseFloat(n.paddingBottom||"0"),l=this._parentNode.getBoundingClientRect(),c=l.height-o-i,d=l.width-s-a,u=this._parentNode.offsetHeight-o-i,h=this._parentNode.offsetWidth-s-a;(e||this.state.height===u&&this.state.scaledHeight===c)&&(t||this.state.width===h&&this.state.scaledWidth===d)||(this.setState({height:u,width:h,scaledHeight:c,scaledWidth:d}),"function"==typeof r&&r({height:u,scaledHeight:c,scaledWidth:d,width:h}))}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const r=t.ownerDocument.defaultView.ResizeObserver;null!=r?(this._resizeObserver=new r((()=>{this._timeoutId=setTimeout(this._onResize,0)})),this._resizeObserver.observe(t)):(this._detectElementResize=function(e){let t,r,n,i,l,c,d;const u="undefined"!=typeof document&&document.attachEvent;if(!u){c=function(e){const t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,s=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,s.style.width=r.offsetWidth+1+"px",s.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},l=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},d=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;c(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=o((function(){l(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))};let e=!1,s="";n="animationstart";const u="Webkit Moz O ms".split(" ");let h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let r=0;r<u.length;r++)if(void 0!==t.style[u[r]+"AnimationName"]){m=u[r],s="-"+m.toLowerCase()+"-",n=h[r],e=!0;break}}r="resizeanim",t="@"+s+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",i=s+"animation: 1ms "+r+"; "}return{addResizeListener:function(a,o){if(u)a.attachEvent("onresize",o);else{if(!a.__resizeTriggers__){const o=a.ownerDocument,l=s.getComputedStyle(a);l&&"static"===l.position&&(a.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){const n=(t||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',s=r.head||r.getElementsByTagName("head")[0],a=r.createElement("style");a.id="detectElementResize",a.type="text/css",null!=e&&a.setAttribute("nonce",e),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(r.createTextNode(n)),s.appendChild(a)}}(o),a.__resizeLast__={},a.__resizeListeners__=[],(a.__resizeTriggers__=o.createElement("div")).className="resize-triggers";const u=o.createElement("div");u.className="expand-trigger",u.appendChild(o.createElement("div"));const h=o.createElement("div");h.className="contract-trigger",a.__resizeTriggers__.appendChild(u),a.__resizeTriggers__.appendChild(h),a.appendChild(a.__resizeTriggers__),c(a),a.addEventListener("scroll",d,!0),n&&(a.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&c(a)},a.__resizeTriggers__.addEventListener(n,a.__resizeTriggers__.__animationListener__))}a.__resizeListeners__.push(o)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",d,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:t,defaultWidth:r,disableHeight:s=!1,disableWidth:a=!1,doNotBailOutOnEmptyChildren:o=!1,nonce:i,onResize:l,style:c={},tagName:d="div",...u}=this.props,{height:h,scaledHeight:m,scaledWidth:p,width:f}=this.state,g={overflow:"visible"},y={};let v=!1;return s||(0===h&&(v=!0),g.height=0,y.height=h,y.scaledHeight=m),a||(0===f&&(v=!0),g.width=0,y.width=f,y.scaledWidth=p),o&&(v=!1),(0,n.createElement)(d,{ref:this._setRef,style:{...g,...c},...u},!v&&e(y))}}},72079:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},72128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(83463),s=r(13693),a=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,s.default];t.default=a},73357:(e,t,r)=>{var n=r(19931);e.exports=function(e,t){return null==e||n(e,t)}},73835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const n=r(99029),s=r(13558),a=r(64404),o=r(66939),i=r(94227),l=r(62586);class c{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,o.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function d(e){const t=h.call(this,e);if(t)return t;const r=(0,o.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:i,lines:c}=this.opts.code,{ownProperties:d}=this.opts,u=new n.CodeGen(this.scope,{es5:i,lines:c,ownProperties:d});let m;e.$async&&(m=u.scopeValue("Error",{ref:s.default,code:n._`require("ajv/dist/runtime/validation_error").default`}));const p=u.scopeName("validate");e.validateName=p;const f={gen:u,allErrors:this.opts.allErrors,data:a.default.data,parentData:a.default.parentData,parentDataProperty:a.default.parentDataProperty,dataNames:[a.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,n.stringify)(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:m,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:n.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:n._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,l.validateFunctionCode)(f),u.optimize(this.opts.code.optimize);const t=u.toString();g=`${u.scopeRefs(a.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const r=new Function(`${a.default.self}`,`${a.default.scope}`,g)(this,this.scope.get());if(this.scope.value(p,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:p,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=f;r.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},r.source&&(r.source.evaluated=(0,n.stringify)(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function u(e){return(0,o.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function h(e){for(const n of this._compilations)if(r=e,(t=n).schema===r.schema&&t.root===r.root&&t.baseId===r.baseId)return n;var t,r}function m(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||p.call(this,e,t)}function p(e,t){const r=this.opts.uriResolver.parse(t),n=(0,o._getFullPath)(this.opts.uriResolver,r);let s=(0,o.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return g.call(this,r,e);const a=(0,o.normalizeId)(n),i=this.refs[a]||this.schemas[a];if("string"==typeof i){const t=p.call(this,e,i);if("object"!=typeof(null==t?void 0:t.schema))return;return g.call(this,r,t)}if("object"==typeof(null==i?void 0:i.schema)){if(i.validate||d.call(this,i),a===(0,o.normalizeId)(t)){const{schema:t}=i,{schemaId:r}=this.opts,n=t[r];return n&&(s=(0,o.resolveUrl)(this.opts.uriResolver,s,n)),new c({schema:t,schemaId:r,root:e,baseId:s})}return g.call(this,r,i)}}t.SchemaEnv=c,t.compileSchema=d,t.resolveRef=function(e,t,r){var n;r=(0,o.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let a=m.call(this,e,r);if(void 0===a){const s=null===(n=e.localRefs)||void 0===n?void 0:n[r],{schemaId:o}=this.opts;s&&(a=new c({schema:s,schemaId:o,root:e,baseId:t}))}return void 0!==a?e.refs[r]=u.call(this,a):void 0},t.getCompilingSchema=h,t.resolveSchema=p;const f=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(e,{baseId:t,schema:r,root:n}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,i.unescapeFragment)(n)];if(void 0===e)return;const s="object"==typeof(r=e)&&r[this.opts.schemaId];!f.has(n)&&s&&(t=(0,o.resolveUrl)(this.opts.uriResolver,t,s))}let a;if("boolean"!=typeof r&&r.$ref&&!(0,i.schemaHasRulesButRef)(r,this.RULES)){const e=(0,o.resolveUrl)(this.opts.uriResolver,t,r.$ref);a=p.call(this,n,e)}const{schemaId:l}=this.opts;return a=a||new c({schema:r,schemaId:l,root:n,baseId:t}),a.schema!==a.root.schema?a:void 0}},75882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=n.operators,a={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},o={message:({keyword:e,schemaCode:t})=>n.str`must be ${a[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${a[e].okStr}, limit: ${t}}`},i={keyword:Object.keys(a),type:"number",schemaType:"number",$data:!0,error:o,code(e){const{keyword:t,data:r,schemaCode:s}=e;e.fail$data(n._`${r} ${a[t].fail} ${s} || isNaN(${r})`)}};t.default=i},77307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a=r(53853),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:o,it:i}=e,l="maxLength"===t?n.operators.GT:n.operators.LT,c=!1===i.opts.unicode?n._`${r}.length`:n._`${(0,s.useFunc)(e.gen,a.default)}(${r})`;e.fail$data(n._`${c} ${l} ${o}`)}};t.default=o},78704:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(17437),s=r(96453),a=r(16784),o=r(16294),i=r(19129),l=r(2445);const c=function({warningMarkdown:e,size:t,marginRight:r}){const c=(0,s.DP)();return(0,l.Y)(i.m_,{id:"warning-tooltip",title:(0,l.Y)(a.A,{source:e}),children:(0,l.Y)(o.A.WarningOutlined,{iconColor:c.colors.warning.base,iconSize:t,css:(0,n.AH)({marginRight:null!=r?r:2*c.gridUnit},"","")})})}},78867:(e,t,r)=>{"use strict";var n=r(29022),s=r(85419),a=r(96552),o=r(82986);e.exports=function(){var e,t,r,i,l,c,d,u=arguments.length;for(e=new Array(u),d=0;d<u;d++)e[d]=arguments[d];if(a(e)){if(2===u)return(l=e[0])<0&&(l=-l),(c=e[1])<0&&(c=-c),0===l||0===c?0:l/n(l,c)*c;r=e}else{if(!s(e[0]))throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(u>1){if(r=e[0],t=e[1],!o(t))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else r=e[0]}if((i=r.length)<2)return null;if(t){for(l=new Array(i),d=0;d<i;d++)l[d]=t(r[d],d);r=l}if(u<3&&!a(r))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+r+"`.");for(d=0;d<i;d++)(l=r[d])<0&&(r[d]=-l);for(l=r[0],d=1;d<i;d++){if(c=r[d],0===l||0===c)return 0;l=l/n(l,c)*c}return l}},80191:(e,t,r)=>{var n=r(34932),s=r(27185),a=r(69302),o=r(80741),i=r(68090),l=a((function(e){var t=i(e),r=n(e,o);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?s(r,void 0,t):[]}));e.exports=l},80226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const n=r(41520);class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var a;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(a||(t.UsedValueState=a={})),t.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=o;class i extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}t.ValueScopeName=i;const l=n._`\n`;t.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:n.nil}}get(){return this._scope}name(e){return new i(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:s}=n,a=null!==(r=t.key)&&void 0!==r?r:t.ref;let o=this._values[s];if(o){const e=o.get(a);if(e)return e}else o=this._values[s]=new Map;o.set(a,n);const i=this._scope[s]||(this._scope[s]=[]),l=i.length;return i[l]=t.ref,n.setValue(t,{property:s,itemIndex:l}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,r){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,r)}_reduceValues(e,r,o={},i){let l=n.nil;for(const c in e){const d=e[c];if(!d)continue;const u=o[c]=o[c]||new Map;d.forEach((e=>{if(u.has(e))return;u.set(e,a.Started);let o=r(e);if(o){const r=this.opts.es5?t.varKinds.var:t.varKinds.const;l=n._`${l}${r} ${e} = ${o};${this.opts._n}`}else{if(!(o=null==i?void 0:i(e)))throw new s(e);l=n._`${l}${o}${this.opts._n}`}u.set(e,a.Completed)}))}return l}}},80299:(e,t,r)=>{var n=r(83120),s=r(69302),a=r(55765),o=r(83693),i=s((function(e){return a(n(e,1,o,!0))}));e.exports=i},80795:(e,t,r)=>{var n=r(83120),s=1/0;e.exports=function(e){return null!=e&&e.length?n(e,s):[]}},82986:e=>{"use strict";e.exports=function(e){return"function"==typeof e}},83025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const n=r(99029),s=r(94227),a=r(15765);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>{const s=1===t?"property":"properties";return n.str`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>n._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${r}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);i(e,t),l(e,r)}};function i(e,t=e.schema){const{gen:r,data:s,it:o}=e;if(0===Object.keys(t).length)return;const i=r.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const d=(0,a.propertyInData)(r,s,l,o.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),o.allErrors?r.if(d,(()=>{for(const t of c)(0,a.checkReportMissingProp)(e,t)})):(r.if(n._`${d} && (${(0,a.checkMissingProp)(e,c,i)})`),(0,a.reportMissingProp)(e,i),r.else())}}function l(e,t=e.schema){const{gen:r,data:n,keyword:o,it:i}=e,l=r.name("valid");for(const c in t)(0,s.alwaysValidSchema)(i,t[c])||(r.if((0,a.propertyInData)(r,n,c,i.opts.ownProperties),(()=>{const t=e.subschema({keyword:o,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>r.var(l,!0))),e.ok(l))}t.validatePropertyDeps=i,t.validateSchemaDeps=l,t.default=o},83463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},83915:(e,t,r)=>{var n=r(38859),s=r(15325),a=r(29905),o=r(34932),i=r(27301),l=r(19219);e.exports=function(e,t,r,c){var d=-1,u=s,h=!0,m=e.length,p=[],f=t.length;if(!m)return p;r&&(t=o(t,i(r))),c?(u=a,h=!1):t.length>=200&&(u=l,h=!1,t=new n(t));e:for(;++d<m;){var g=e[d],y=null==r?g:r(g);if(g=c||0!==g?g:0,h&&y==y){for(var v=f;v--;)if(t[v]===y)continue e;p.push(g)}else u(t,y,c)||p.push(g)}return p}},84356:(e,t,r)=>{"use strict";var n=r(66415);e.exports=function(e){return n(e)&&e%1==0}},84684:(e,t,r)=>{var n=r(69302),s=r(75288),a=r(36800),o=r(37241),i=Object.prototype,l=i.hasOwnProperty,c=n((function(e,t){e=Object(e);var r=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&a(t[0],t[1],c)&&(n=1);++r<n;)for(var d=t[r],u=o(d),h=-1,m=u.length;++h<m;){var p=u[h],f=e[p];(void 0===f||s(f,i[p])&&!l.call(e,p))&&(e[p]=d[p])}return e}));e.exports=c},85419:e=>{"use strict";e.exports=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},85558:e=>{e.exports=function(e,t,r,n,s){return s(e,(function(e,s,a){r=n?(n=!1,e):t(r,e,s,a)})),r}},85692:(e,t,r)=>{"use strict";r.d(t,{Wx:()=>c});var n=r(96540),s=(Object.defineProperty,new Map),a=new WeakMap,o=0,i=void 0;function l(e,t,r={},n=i){if(void 0===window.IntersectionObserver&&void 0!==n){const s=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:l,observer:c,elements:d}=function(e){const t=function(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(a.has(r)||(o+=1,a.set(r,o.toString())),a.get(r)):"0"):e[t]}`;var r})).toString()}(e);let r=s.get(t);if(!r){const n=new Map;let a;const o=new IntersectionObserver((t=>{t.forEach((t=>{var r;const s=t.isIntersecting&&a.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(r=n.get(t.target))||r.forEach((e=>{e(s,t)}))}))}),e);a=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:n},s.set(t,r)}return r}(r),u=d.get(e)||[];return d.has(e)||d.set(e,u),u.push(t),c.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(d.delete(e),c.unobserve(e)),0===d.size&&(c.disconnect(),s.delete(l))}}function c({threshold:e,delay:t,trackVisibility:r,rootMargin:s,root:a,triggerOnce:o,skip:i,initialInView:c,fallbackInView:d,onChange:u}={}){var h;const[m,p]=n.useState(null),f=n.useRef(u),[g,y]=n.useState({inView:!!c,entry:void 0});f.current=u,n.useEffect((()=>{if(i||!m)return;let n;return n=l(m,((e,t)=>{y({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&o&&n&&(n(),n=void 0)}),{root:a,rootMargin:s,threshold:e,trackVisibility:r,delay:t},d),()=>{n&&n()}}),[Array.isArray(e)?e.toString():e,m,a,s,o,i,r,d,t]);const v=null==(h=g.entry)?void 0:h.target,b=n.useRef(void 0);m||!v||o||i||b.current===v||(b.current=v,y({inView:!!c,entry:void 0}));const w=[p,g.inView,g.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}n.Component},86144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(72128),s=r(67060),a=r(56378),o=r(97532),i=r(69857),l=[n.default,s.default,(0,a.default)(),o.default,i.metadataVocabulary,i.contentVocabulary];t.default=l},90370:(e,t,r)=>{var n=r(2404),s=r(33031),a=r(63375),o=r(9063),i=r(84684),l=r(80191),c=r(11331),d=r(53812),u=e=>Array.isArray(e)?e:[e],h=e=>void 0===e,m=e=>c(e)||Array.isArray(e)?Object.keys(e):[],p=(e,t)=>e.hasOwnProperty(t),f=e=>s(a(e)),g=e=>h(e)||Array.isArray(e)&&0===e.length,y=(e,t)=>h(e)&&0===t||h(t)&&0===e||n(e,t),v=e=>h(e)||n(e,{})||!0===e,b=e=>h(e)||n(e,{}),w=e=>h(e)||c(e)||!0===e||!1===e;function S(e,t){return!(!g(e)||!g(t))||n(f(e),f(t))}function C(e,t,r,s){var o=a(m(e).concat(m(t)));return!(!b(e)||!b(t))||(!b(e)||!m(t).length)&&(!b(t)||!m(e).length)&&o.every((function(r){var a=e[r],o=t[r];return Array.isArray(a)&&Array.isArray(o)?n(f(e),f(t)):!(Array.isArray(a)&&!Array.isArray(o))&&!(Array.isArray(o)&&!Array.isArray(a))&&((e,t,r,n)=>t&&p(t,r)&&e&&p(e,r)&&n(e[r],t[r]))(e,t,r,s)}))}function x(e,t,r,n){var s=o(e,n),a=o(t,n);return l(s,a,n).length===Math.max(s.length,a.length)}var E={title:n,uniqueItems:(e,t)=>h(e)&&!1===t||h(t)&&!1===e||n(e,t),minLength:y,minItems:y,minProperties:y,required:S,enum:S,type:function(e,t){return e=u(e),t=u(t),n(f(e),f(t))},items:function(e,t,r,s){return c(e)&&c(t)?s(e,t):Array.isArray(e)&&Array.isArray(t)?C(e,t,0,s):n(e,t)},anyOf:x,allOf:x,oneOf:x,properties:C,patternProperties:C,dependencies:C},$=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],_=["additionalProperties","additionalItems","contains","propertyNames","not"];e.exports=function e(t,r,s){if(s=i(s,{ignore:[]}),v(t)&&v(r))return!0;if(!w(t)||!w(r))throw new Error("Either of the values are not a JSON schema.");if(t===r)return!0;if(d(t)&&d(r))return t===r;if(void 0===t&&!1===r||void 0===r&&!1===t)return!1;if(h(t)&&!h(r)||!h(t)&&h(r))return!1;var o=a(Object.keys(t).concat(Object.keys(r)));if(s.ignore.length&&(o=o.filter((e=>-1===s.ignore.indexOf(e)))),!o.length)return!0;function l(t,r){return e(t,r,s)}return o.every((function(a){var o=t[a],i=r[a];if(-1!==_.indexOf(a))return e(o,i,s);var c=E[a];if(c||(c=n),n(o,i))return!0;if(-1===$.indexOf(a)&&(!p(t,a)&&p(r,a)||p(t,a)&&!p(r,a)))return o===i;var u=c(o,i,a,l);if(!d(u))throw new Error("Comparer must return true or false");return u}))}},91648:(e,t,r)=>{var n=r(83915),s=r(69302),a=r(83693),o=s((function(e,t){return a(e)?n(e,t):[]}));e.exports=o},92045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};t.default=s},93966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a=r(15765),o=r(15457),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:i}=r;n.items=!0,(0,s.alwaysValidSchema)(n,t)||(i?(0,o.validateAdditionalItems)(e,i):e.ok((0,a.validateArray)(e)))}};t.default=i},94227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const n=r(99029),s=r(41520);function a(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const s=n.RULES.keywords;for(const r in t)s[r]||p(e,`unknown keyword: "${r}"`)}function o(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function i(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(a,o,i,l)=>{const c=void 0===i?o:i instanceof n.Name?(o instanceof n.Name?e(a,o,i):t(a,o,i),i):o instanceof n.Name?(t(a,i,o),o):r(o,i);return l!==n.Name||c instanceof n.Name?c:s(a,c)}}function d(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",n._`{}`);return void 0!==t&&u(e,r,t),r}function u(e,t,r){Object.keys(r).forEach((r=>e.assign(n._`${t}${(0,n.getProperty)(r)}`,!0)))}t.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(a(e,t),!o(t,e.self.RULES.all))},t.checkUnknownRules=a,t.schemaHasRules=o,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,s,a){if(!a){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return n._`${r}`}return n._`${e}${t}${(0,n.getProperty)(s)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(i(e))},t.escapeJsonPointer=i,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,(()=>{e.if(n._`${t} === true`,(()=>e.assign(r,!0)),(()=>e.assign(r,n._`${r} || {}`).code(n._`Object.assign(${r}, ${t})`)))})),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,(()=>{!0===t?e.assign(r,!0):(e.assign(r,n._`${r} || {}`),u(e,r,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,(()=>e.assign(r,n._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`))),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,(()=>e.assign(r,!0===t||n._`${r} > ${t} ? ${r} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=u;const h={};var m;function p(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new s._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(m||(t.Type=m={})),t.getErrorPath=function(e,t,r){if(e instanceof n.Name){const s=t===m.Num;return r?s?n._`"[" + ${e} + "]"`:n._`"['" + ${e} + "']"`:s?n._`"/" + ${e}`:n._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,n.getProperty)(e).toString():"/"+i(e)},t.checkStrictMode=p},94737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>n.str`must match format "${e}"`,params:({schemaCode:e})=>n._`{format: ${e}}`},code(e,t){const{gen:r,data:s,$data:a,schema:o,schemaCode:i,it:l}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:h}=l;c.validateFormats&&(a?function(){const a=r.scopeValue("formats",{ref:h.formats,code:c.code.formats}),o=r.const("fDef",n._`${a}[${i}]`),l=r.let("fType"),d=r.let("format");r.if(n._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,(()=>r.assign(l,n._`${o}.type || "string"`).assign(d,n._`${o}.validate`)),(()=>r.assign(l,n._`"string"`).assign(d,o))),e.fail$data((0,n.or)(!1===c.strictSchema?n.nil:n._`${i} && !${d}`,function(){const e=u.$async?n._`(${o}.async ? await ${d}(${s}) : ${d}(${s}))`:n._`${d}(${s})`,r=n._`(typeof ${d} == "function" ? ${e} : ${d}.test(${s}))`;return n._`${d} && ${d} !== true && ${l} === ${t} && !${r}`}()))}():function(){const a=h.formats[o];if(!a)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${d}"`}h.logger.warn(e())}();if(!0===a)return;const[i,l,m]=function(e){const t=e instanceof RegExp?(0,n.regexpCode)(e):c.code.formats?n._`${c.code.formats}${(0,n.getProperty)(o)}`:void 0,s=r.scopeValue("formats",{key:o,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,s]:[e.type||"string",e.validate,n._`${s}.validate`]}(a);i===t&&e.pass(function(){if("object"==typeof a&&!(a instanceof RegExp)&&a.async){if(!u.$async)throw new Error("async format in sync schema");return n._`await ${m}(${s})`}return"function"==typeof l?n._`${m}(${s})`:n._`${m}.test(${s})`}())}())}};t.default=s},95632:(e,t,r)=>{var n=r(73170);e.exports=function(e,t,r,s){return s="function"==typeof s?s:void 0,null==e?e:n(e,t,r,s)}},96163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),a={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>n._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:a,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(o.opts.discriminator&&a.discriminator)return;const i=r,l=t.let("valid",!1),c=t.let("passing",null),d=t.name("_valid");e.setParams({passing:c}),t.block((function(){i.forEach(((r,a)=>{let i;(0,s.alwaysValidSchema)(o,r)?t.var(d,!0):i=e.subschema({keyword:"oneOf",schemaProp:a,compositeRule:!0},d),a>0&&t.if(n._`${d} && ${l}`).assign(l,!1).assign(c,n._`[${c}, ${a}]`).else(),t.if(d,(()=>{t.assign(l,!0),t.assign(c,a),i&&e.mergeEvaluated(i,n.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}};t.default=a},96552:(e,t,r)=>{"use strict";var n=r(85419),s=r(84356);e.exports=function(e){var t;if(!n(e))return!1;if(!(t=e.length))return!1;for(var r=0;r<t;r++)if(!s(e[r]))return!1;return!0}},97532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[r(94737).default];t.default=n},97652:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},98045:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,r){return null!=e&&t.call(e,r)}},99029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const n=r(41520),s=r(80226);var a=r(41520);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return a.Name}});var o=r(80226);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class i{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends i{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const r=e?s.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=I(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class c extends i{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=I(this.rhs,e,t),this}get names(){return T(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class d extends c{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class m extends i{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends i{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=I(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class f extends i{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,r)=>t+r.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const s=r[n];s.optimizeNames(e,t)||(D(e,s.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>P(e,t.names)),{})}}class g extends f{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends f{}class v extends g{}v.kind="else";class b extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(O(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=I(this.condition,e,t),this}get names(){const e=super.names;return T(e,this.condition),this.else&&P(e,this.else.names),e}}b.kind="if";class w extends g{}w.kind="for";class S extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=I(this.iteration,e,t),this}get names(){return P(super.names,this.iteration.names)}}class C extends w{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:r,from:n,to:a}=this;return`for(${t} ${r}=${n}; ${r}<${a}; ${r}++)`+super.render(e)}get names(){const e=T(super.names,this.from);return T(e,this.to)}}class x extends w{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=I(this.iterable,e,t),this}get names(){return P(super.names,this.iterable.names)}}class E extends g{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}E.kind="func";class $ extends f{render(e){return"return "+super.render(e)}}$.kind="return";class _ extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&P(e,this.catch.names),this.finally&&P(e,this.finally.names),e}}class A extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}A.kind="catch";class k extends g{render(e){return"finally"+super.render(e)}}function P(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function T(e,t){return t instanceof n._CodeOrName?P(e,t.names):e}function I(e,t,r){return e instanceof n.Name?a(e):(s=e)instanceof n._Code&&s._items.some((e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str]))?new n._Code(e._items.reduce(((e,t)=>(t instanceof n.Name&&(t=a(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e)),[])):e;var s;function a(e){const n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function D(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function O(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:n._`!${F(e)}`}k.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const s=this._scope.toName(t);return void 0!==r&&n&&(this._constants[s.str]=r),this._leafNode(new l(e,s,r)),s}const(e,t,r){return this._def(s.varKinds.const,e,t,r)}let(e,t,r){return this._def(s.varKinds.let,e,t,r)}var(e,t,r){return this._def(s.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new c(e,t,r))}add(e,r){return this._leafNode(new d(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[r,s]of e)t.length>1&&t.push(","),t.push(r),(r!==s||this.opts.es5)&&(t.push(":"),(0,n.addCodeArg)(t,s));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new b(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(b,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new S(e),t)}forRange(e,t,r,n,a=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const o=this._scope.toName(e);return this._for(new C(a,o,t,r),(()=>n(o)))}forOf(e,t,r,a=s.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,n._`${e}.length`,(t=>{this.var(o,n._`${e}[${t}]`),r(o)}))}return this._for(new x("of",a,o,t),(()=>r(o)))}forIn(e,t,r,a=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,n._`Object.keys(${t})`,r);const o=this._scope.toName(e);return this._for(new x("in",a,o,t),(()=>r(o)))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new $;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new _;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new A(e),t(e)}return r&&(this._currNode=n.finally=new k,this.code(r)),this._endBlockNode(A,k)}throw(e){return this._leafNode(new m(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,s){return this._blockNode(new E(e,t,r)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=O;const N=M(t.operators.AND);t.and=function(...e){return e.reduce(N)};const R=M(t.operators.OR);function M(e){return(t,r)=>t===n.nil?r:r===n.nil?t:n._`${F(t)} ${e} ${F(r)}`}function F(e){return e instanceof n.Name?e:n._`(${e})`}t.or=function(...e){return e.reduce(R)}}}]);