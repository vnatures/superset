(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3784],{31746:(e,a,t)=>{var l={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,7020],"./langDE.js":[87020,7020],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,9271],"./langPL.js":[39271,9271],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function n(e){if(!t.o(l,e))return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=l[e],n=a[0];return Promise.all(a.slice(1).map(t.e)).then((()=>t(n)))}n.keys=()=>Object.keys(l),n.id=31746,e.exports=n},85867:(e,a,t)=>{"use strict";t.d(a,{A:()=>D});var l=t(96540),n=t(61225),r=t(96453),s=t(3087),o=t(53080),u=t(92351),c=t(42900),i=t(51719),g=t(74508),h=t(61030),d=t(45567),p=t(49714),f=t(11734),m=t(80491),b=t(25652),j=t(73900),v=t(32003),y=t(22329),w=t(31441),E=t(12458),F=t(39539),I=t(5553),k=t(45967),O=t(40830),C=t(45620),R=t(39838),S=t(42998),T=t(69380),N=t(25384),V=t(6641),A=t(28540),x=t(35278),H=t(51536),U=t(2445);const L=r.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function M({width:e,height:a,echartOptions:r,eventHandlers:s,zrEventHandlers:c,selectedValues:i={},refs:g},h){const d=(0,l.useRef)(null);g&&(g.divRef=d);const p=(0,l.useRef)(),f=(0,l.useMemo)((()=>Object.keys(i)||[]),[i]),m=(0,l.useRef)([]);(0,l.useImperativeHandle)(h,(()=>({getEchartInstance:()=>p.current})));const b=(0,n.d4)((e=>{var a,t;return null!=(a=null==e||null==(t=e.common)?void 0:t.locale)?a:H.Xn})).toUpperCase(),j=(0,l.useCallback)((({width:e,height:a})=>{p.current&&p.current.resize({width:e,height:a})}),[]);return(0,l.useEffect)((()=>{(async()=>{if(!d.current)return;const l=await t(31746)(`./lang${b}`).catch((e=>{console.error(`Locale ${b} not supported in ECharts`,e)}));null!=l&&l.default&&(0,o.E)(b,l.default),p.current||(p.current=(0,u.Ts)(d.current,null,{locale:b})),Object.entries(s||{}).forEach((([e,a])=>{var t,l;null==(t=p.current)||t.off(e),null==(l=p.current)||l.on(e,a)})),Object.entries(c||{}).forEach((([e,a])=>{var t,l;null==(t=p.current)||t.getZr().off(e),null==(l=p.current)||l.getZr().on(e,a)})),p.current.setOption(r,!0),j({width:e,height:a})})()}),[r,s,c,b]),(0,l.useEffect)((()=>{p.current&&(p.current.dispatchAction({type:"downplay",dataIndex:m.current.filter((e=>!f.includes(e)))}),f.length&&p.current.dispatchAction({type:"highlight",dataIndex:f}),m.current=f)}),[f,p.current]),(0,l.useLayoutEffect)((()=>{j({width:e,height:a})}),[e,a,j]),(0,U.Y)(L,{ref:d,height:a,width:e})}(0,s.Y)([F.a,c.a,i.a,g.a,h.a,d.a,p.a,f.a,m.a,b.a,j.a,v.a,y.a,w.a,E.a,I.a,k.a,O.a,C.a,R.a,S.a,T.a,N.a,V.a,A.a,x._]);const D=(0,l.forwardRef)(M)},93784:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var l=t(96540),n=t(58863),r=t(96627),s=t(7349),o=t(32142),u=t(86444),c=t(85867),i=t(71194),g=t(2445);function h({height:e,width:a,echartOptions:t,setDataMask:h,labelMap:d,labelMapB:p,groupby:f,groupbyB:m,selectedValues:b,formData:j,emitCrossFilters:v,seriesBreakdown:y,onContextMenu:w,onFocusedSeries:E,xValueFormatter:F,xAxis:I,refs:k,coltypeMapping:O}){const C=(0,l.useCallback)((e=>e<y),[y]),R=(0,l.useCallback)(((e,a)=>{const t=Object.values(b||{});let l;l=t.includes(e)?t.filter((a=>a!==e)):[e];const n=C(a)?f:m,r=C(a)?d:p,s=l.map((e=>null==r?void 0:r[e])).filter((e=>!!e));return{dataMask:{extraFormData:{filters:0===l.length?[]:[...n.map(((e,a)=>{const t=s.map((e=>e[a]));return null==t?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:t}}))]},filterState:{value:s.length?s:null,selectedValues:l.length?l:null}},isCurrentValueSelected:t.includes(e)}}),[f,m,C,d,p,b]),S=(0,l.useCallback)(((e,a)=>{const t=C(a);!v||t&&0===f.length||!t&&0===m.length||h(R(e,a).dataMask)}),[C,v,f.length,m.length,h,R]),T={click:e=>{const{seriesName:a,seriesIndex:t}=e;S(a,t)},mouseout:()=>{E(null)},mouseover:e=>{E(e.seriesName)},contextmenu:async e=>{if(w){e.event.stop();const{data:a,seriesName:t,seriesIndex:l}=e,c=e.event.event,g=[],h=[],b=C(l),v=[...e.name?[e.name]:[],...(b?d:p)[e.seriesName]||[]];a&&I.type===n.Gw.Time&&g.push({col:I.label===r.Tf?j.granularitySqla:I.label,grain:j.timeGrainSqla,op:"==",val:a[0],formattedVal:F(a[0])}),[...a&&I.type===n.Gw.Category?[I.label]:[],...b?j.groupby:j.groupbyB].forEach(((e,a)=>g.push({col:e,op:"==",val:v[a],formattedVal:String(v[a])}))),[...b?j.groupby:j.groupbyB].forEach(((e,a)=>h.push({col:e,op:"==",val:v[a],formattedVal:(0,i.Wy)(v[a],{timeFormatter:(0,s.mo)(j.dateFormat),numberFormatter:(0,o.gV)(j.numberFormat),coltype:null==O?void 0:O[(0,u.A)(e)]})})));const y=b&&f.length>0||!b&&m.length>0;w(c.clientX,c.clientY,{drillToDetail:g,crossFilter:y?R(t,l):void 0,drillBy:{filters:h,groupbyFieldName:b?"groupby":"groupby_b",adhocFilterFieldName:b?"adhoc_filters":"adhoc_filters_b"}})}}};return(0,g.Y)(c.A,{refs:k,height:e,width:a,echartOptions:t,eventHandlers:T,selectedValues:b})}}}]);